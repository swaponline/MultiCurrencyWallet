(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.bech32 = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBitArray=createBitArray,exports.toBits=toBits,exports.fromBits=fromBits;function toBitArrayUnchecked(a){return a}function createBitArray(a){return toBitArrayUnchecked(new Uint8Array(a))}function convert(a,c,d,e,f){var g=(1<<e)-1,h=0,i=0,j=0;if(a.forEach(function(a){for(h=(h<<c)+a,i+=c;i>=e;)i-=e,d[j]=h>>i&g,j+=1}),f)0<i&&(d[j]=h<<e-i&g);else{if(i>=c)throw new Error("Excessive padding: ".concat(i," (max ").concat(c-1," allowed)"));if(0!=h%(1<<i))throw new Error("Non-zero padding")}}function toBits(a,b,c){if(8<b||1>b)throw new RangeError("Invalid bits per element; 1 to 8 expected");return convert(toBitArrayUnchecked(a),8,c,b,!0),c}function fromBits(a,b,c){if(8<b||1>b)throw new RangeError("Invalid bits per element; 1 to 8 expected");return convert(a,b,toBitArrayUnchecked(c),8,!1),c}

},{}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expandPrefix=expandPrefix,exports.verifyChecksum=verifyChecksum,exports.createChecksum=createChecksum,exports.encode=encode,exports.decode=decode,exports.decodeWithPrefix=decodeWithPrefix,exports.CHECKSUM_LENGTH=void 0;var _bitConverter=require("./bit-converter"),CHARSET="qpzry9x8gf2tvdw0s3jn54khce6mua7l",CHECKSUM_LENGTH=6;exports.CHECKSUM_LENGTH=CHECKSUM_LENGTH;var CHAR_LOOKUP=function(){for(var a="undefined"==typeof Map?{map:{},get:function b(a){return this.map[a]},set:function c(a,b){return this.map[a]=b,this}}:new Map,b=0;b<CHARSET.length;b+=1)a.set(CHARSET[b],b);return a}(),GEN=[996825010,642813549,513874426,1027748829,705979059];function polymod(a){return a.reduce(function(a,b){return GEN.reduce(function(b,c,d){return 0==(1&a>>25>>d)?b:b^c},(33554431&a)<<5^b)},1)}function expandPrefix(a,b){for(var c,d=0;d<a.length;d+=1)c=a.charCodeAt(d),b[d]=c>>5,b[d+a.length+1]=31&c;b[a.length]=0}function verifyChecksum(a){return 1===polymod(a)}function createChecksum(a){for(var b,c=1^polymod(a),d=0;d<CHECKSUM_LENGTH;d+=1)b=5*(5-d),a[a.length-CHECKSUM_LENGTH+d]=31&c>>b}function encode(a){return Array.prototype.reduce.call(a,function(a,b){return a+CHARSET[b]},"")}function decode(a,b){for(var c,d=b||(0,_bitConverter.createBitArray)(a.length),e=0;e<a.length;e+=1){if(c=CHAR_LOOKUP.get(a[e]),void 0===c)throw new Error("Invalid char in message: ".concat(a[e]));d[e]=c}return d}function decodeWithPrefix(a,b){var c=b.length+2*a.length+1,d=(0,_bitConverter.createBitArray)(c);return expandPrefix(a,d.subarray(0,2*a.length+1)),decode(b,d.subarray(2*a.length+1)),d}

},{"./bit-converter":1}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.to5BitArray=to5BitArray,exports.from5BitArray=from5BitArray,exports.encode5BitArray=encode5BitArray,exports.encode=encode,exports.decodeTo5BitArray=decodeTo5BitArray,exports.decode=decode,exports.BitcoinAddress=void 0;var _bitConverter=require("./bit-converter"),_encoding=require("./encoding");function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}var MIN_CHAR_CODE=33,MAX_CHAR_CODE=126,MAX_ENC_LENGTH=90;function to5BitArray(a,b){var c=Math.ceil(8*a.length/5),d=b||(0,_bitConverter.createBitArray)(c);return(0,_bitConverter.toBits)(a,5,d)}function from5BitArray(a,b){var c=Math.floor(5*a.length/8),d=b||new Uint8Array(c);return(0,_bitConverter.fromBits)(a,5,d)}function encode5BitArray(a,b){var c=2*a.length+1+b.length+_encoding.CHECKSUM_LENGTH;if(c-a.length>MAX_ENC_LENGTH)throw new Error("Message to be produced is too long (max ".concat(MAX_ENC_LENGTH," supported)"));for(var g,h=0;h<a.length;h+=1)if(g=a.charCodeAt(h),g<MIN_CHAR_CODE||g>MAX_CHAR_CODE)throw new TypeError("Invalid char in prefix: ".concat(g,"; should be in ASCII range ").concat(MIN_CHAR_CODE,"-").concat(MAX_CHAR_CODE));var d=(0,_bitConverter.createBitArray)(c);(0,_encoding.expandPrefix)(a,d.subarray(0,2*a.length+1));var e=d.subarray(2*a.length+1,d.length-_encoding.CHECKSUM_LENGTH);e.set(b),(0,_encoding.createChecksum)(d);var f=(0,_encoding.encode)(d.subarray(2*a.length+1));return"".concat(a,"1").concat(f)}function encode(a,b){return encode5BitArray(a,to5BitArray(b))}function decodeTo5BitArray(a){if(a.length>MAX_ENC_LENGTH)throw new TypeError("Message too long; max ".concat(MAX_ENC_LENGTH," expected"));for(var b,c=!1,d=!1,e=0;e<a.length;e+=1){if(b=a.charCodeAt(e),b<MIN_CHAR_CODE||b>MAX_CHAR_CODE)throw new TypeError("Invalid char in message: ".concat(b,"; should be in ASCII range ").concat(MIN_CHAR_CODE,"-").concat(MAX_CHAR_CODE));c=c||65<=b&&90>=b,d=d||97<=b&&122>=b}if(c&&d)throw new TypeError("Mixed-case message");var f=a.toLowerCase(),g=f.lastIndexOf("1");if(0>g)throw new Error("No separator char (\"1\") found");if(g>a.length-_encoding.CHECKSUM_LENGTH-1)throw new Error("Data part of the message too short (at least ".concat(_encoding.CHECKSUM_LENGTH," chars expected)"));var h=f.substring(0,g),j=(0,_encoding.decodeWithPrefix)(h,f.substring(g+1));if(!(0,_encoding.verifyChecksum)(j))throw new Error("Invalid checksum");return{prefix:h,data:j.subarray(2*h.length+1,j.length-_encoding.CHECKSUM_LENGTH)}}function decode(a){var b=decodeTo5BitArray(a),c=b.prefix,d=b.data;return{prefix:c,data:from5BitArray(d)}}var BitcoinAddress=function(){var b=Math.ceil;function a(b,c,d){if(_classCallCheck(this,a),"bc"!==b&&"tb"!==b)throw new Error("Invalid human-readable prefix, \"bc\" or \"tb\" expected");if(0>c||16<c)throw new RangeError("Invalid scriptVersion, value in range [0, 16] expected");if(2>d.length||40<d.length)throw new RangeError("Invalid script length: expected 2 to 40 bytes");if(0===c&&20!==d.length&&32!==d.length)throw new Error("Invalid v0 script length: expected 20 or 32 bytes");this.prefix=b,this.scriptVersion=c,this.data=d}return _createClass(a,null,[{key:"decode",value:function(a){var b=decodeTo5BitArray(a),c=b.prefix,d=b.data;if("bc"!==c&&"tb"!==c)throw new Error("Invalid human-readable prefix, \"bc\" or \"tb\" expected");return new this(c,d[0],from5BitArray(d.subarray(1)))}}]),_createClass(a,[{key:"type",value:function a(){if(0===this.scriptVersion)switch(this.data.length){case 20:return"p2wpkh";case 32:return"p2wsh";default:}}},{key:"encode",value:function(){var a=b(8*this.data.length/5),c=(0,_bitConverter.createBitArray)(a+1);return c[0]=this.scriptVersion,to5BitArray(this.data,c.subarray(1)),encode5BitArray(this.prefix,c)}}]),a}();exports.BitcoinAddress=BitcoinAddress;

},{"./bit-converter":1,"./encoding":2}]},{},[3])(3)
});
