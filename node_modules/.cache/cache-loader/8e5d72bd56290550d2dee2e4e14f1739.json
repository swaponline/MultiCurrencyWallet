{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modals\\WithdrawModalMultisig\\WithdrawModalMultisig.tsx","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modals\\WithdrawModalMultisig\\WithdrawModalMultisig.tsx","mtime":1614850626654},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2RlYywgX2RlYzIsIF9jbGFzcywgX2NsYXNzMiwgX3RlbXA7CgppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7CgpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfQoKZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCi8vIEB0cy1ub2NoZWNrCmltcG9ydCBSZWFjdCwgeyBGcmFnbWVudCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJzsKaW1wb3J0IGhlbHBlcnMsIHsgY29uc3RhbnRzIH0gZnJvbSAnaGVscGVycyc7CmltcG9ydCBhY3Rpb25zIGZyb20gJ3JlZHV4L2FjdGlvbnMnOwppbXBvcnQgTGluayBmcm9tICdsb2NhbF9tb2R1bGVzL3N3LXZhbHVlbGluayc7CmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWRhY3Rpb24nOwppbXBvcnQgY29uZmlnIGZyb20gJ2FwcC1jb25maWcnOwppbXBvcnQgY3NzTW9kdWxlcyBmcm9tICdyZWFjdC1jc3MtbW9kdWxlcyc7CmltcG9ydCBzdHlsZXMgZnJvbSAnLi4vV2l0aGRyYXdNb2RhbC9XaXRoZHJhd01vZGFsLnNjc3MnOwppbXBvcnQgb3duU3R5bGUgZnJvbSAnLi9XaXRoZHJhd01vZGFsTXVsdGlzaWcuc2Nzcyc7CmltcG9ydCB7IEJpZ051bWJlciB9IGZyb20gJ2JpZ251bWJlci5qcyc7CmltcG9ydCBNb2RhbCBmcm9tICdjb21wb25lbnRzL21vZGFsL01vZGFsL01vZGFsJzsKaW1wb3J0IEZpZWxkTGFiZWwgZnJvbSAnY29tcG9uZW50cy9mb3Jtcy9GaWVsZExhYmVsL0ZpZWxkTGFiZWwnOwppbXBvcnQgSW5wdXQgZnJvbSAnY29tcG9uZW50cy9mb3Jtcy9JbnB1dC9JbnB1dCc7CmltcG9ydCBCdXR0b24gZnJvbSAnY29tcG9uZW50cy9jb250cm9scy9CdXR0b24vQnV0dG9uJzsKaW1wb3J0IFRvb2x0aXAgZnJvbSAnY29tcG9uZW50cy91aS9Ub29sdGlwL1Rvb2x0aXAnOwppbXBvcnQgeyBGb3JtYXR0ZWRNZXNzYWdlLCBpbmplY3RJbnRsLCBkZWZpbmVNZXNzYWdlcyB9IGZyb20gJ3JlYWN0LWludGwnOwppbXBvcnQgUmVhY3RUb29sdGlwIGZyb20gJ3JlYWN0LXRvb2x0aXAnOwppbXBvcnQgeyBpc01vYmlsZSB9IGZyb20gJ3JlYWN0LWRldmljZS1kZXRlY3QnOwppbXBvcnQgSW52b2ljZUluZm9CbG9jayBmcm9tICdjb21wb25lbnRzL0ludm9pY2VJbmZvQmxvY2svSW52b2ljZUluZm9CbG9jayc7CmltcG9ydCB0eXBlZm9yY2UgZnJvbSAnc3dhcC5hcHAvdXRpbC90eXBlZm9yY2UnOyAvLyBpbXBvcnQgeyBpc0NvaW5BZGRyZXNzIH0gZnJvbSAnc3dhcC5hcHAvdXRpbC90eXBlZm9yY2UnCgppbXBvcnQgbWluQW1vdW50IGZyb20gJ2hlbHBlcnMvY29uc3RhbnRzL21pbkFtb3VudCc7CmltcG9ydCB7IGlucHV0UmVwbGFjZUNvbW1hV2l0aERvdCB9IGZyb20gJ2hlbHBlcnMvZG9tVXRpbHMnOwppbXBvcnQgUXJSZWFkZXIgZnJvbSAnY29tcG9uZW50cy9RclJlYWRlcic7CmltcG9ydCByZWRpcmVjdFRvIGZyb20gJ2hlbHBlcnMvcmVkaXJlY3RUbyc7CmltcG9ydCBsc0RhdGFDYWNoZSBmcm9tICdoZWxwZXJzL2xzRGF0YUNhY2hlJzsKdmFyIGlzRGFyayA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2UuaXNEYXJrKTsKdmFyIFdpdGhkcmF3TW9kYWxNdWx0aXNpZyA9IChfZGVjID0gY29ubmVjdChmdW5jdGlvbiAoX3JlZikgewogIHZhciBjdXJyZW5jaWVzID0gX3JlZi5jdXJyZW5jaWVzLAogICAgICBfcmVmJHVzZXIgPSBfcmVmLnVzZXIsCiAgICAgIGJ0Y0RhdGEgPSBfcmVmJHVzZXIuYnRjRGF0YSwKICAgICAgYWN0aXZlRmlhdCA9IF9yZWYkdXNlci5hY3RpdmVGaWF0LAogICAgICBidGNNdWx0aXNpZ1NNU0RhdGEgPSBfcmVmJHVzZXIuYnRjTXVsdGlzaWdTTVNEYXRhLAogICAgICBkYXNoYm9hcmRNb2RhbHNBbGxvd2VkID0gX3JlZi51aS5kYXNoYm9hcmRNb2RhbHNBbGxvd2VkOwogIHJldHVybiB7CiAgICBhY3RpdmVGaWF0OiBhY3RpdmVGaWF0LAogICAgY3VycmVuY2llczogY3VycmVuY2llcy5pdGVtcywKICAgIGl0ZW1zOiBbYnRjRGF0YSwgYnRjTXVsdGlzaWdTTVNEYXRhXSwKICAgIGRhc2hib2FyZFZpZXc6IGRhc2hib2FyZE1vZGFsc0FsbG93ZWQKICB9Owp9KSwgX2RlYzIgPSBjc3NNb2R1bGVzKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3R5bGVzKSwgb3duU3R5bGUpLCB7CiAgYWxsb3dNdWx0aXBsZTogdHJ1ZQp9KSwgaW5qZWN0SW50bChfY2xhc3MgPSBfZGVjKF9jbGFzcyA9IF9kZWMyKF9jbGFzcyA9IChfdGVtcCA9IF9jbGFzczIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHsKICBfaW5oZXJpdHMoV2l0aGRyYXdNb2RhbE11bHRpc2lnLCBfUmVhY3QkQ29tcG9uZW50KTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihXaXRoZHJhd01vZGFsTXVsdGlzaWcpOwoKICBmdW5jdGlvbiBXaXRoZHJhd01vZGFsTXVsdGlzaWcocHJvcHMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV2l0aGRyYXdNb2RhbE11bHRpc2lnKTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJwcm9wcyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZmlhdFJhdGVzIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJnb3RvU21zIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgc21zU3RhdHVzOiAnc2VuZGVkJywKICAgICAgICBzdGVwOiAnY29uZmlybScKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJnZXRNaW5BbW91bnRGb3JFdGhUb2tlbiIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGN1cnJlbmN5ID0gX3RoaXMucHJvcHMuZGF0YS5jdXJyZW5jeTsKICAgICAgdmFyIGN1cnJlbnREZWNpbWFscyA9IF90aGlzLnN0YXRlLmN1cnJlbnREZWNpbWFsczsKICAgICAgdmFyIGV0aFRva2VuTWluQW1vdW50ID0gJzAuJzsKCiAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgY3VycmVudERlY2ltYWxzIC0gMTsgYSsrKSB7CiAgICAgICAgZXRoVG9rZW5NaW5BbW91bnQgKz0gJzAnOwogICAgICB9CgogICAgICByZXR1cm4gZXRoVG9rZW5NaW5BbW91bnQgKz0gJzEnOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiYWN0dWFseU1pbkFtb3VudCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgdXNlZEFkbWluRmVlLCBtaW47CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdXNlZEFkbWluRmVlID0gX3RoaXMuc3RhdGUudXNlZEFkbWluRmVlOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBoZWxwZXJzWydidGMnXS5lc3RpbWF0ZUZlZVZhbHVlKHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ3NlbmRfMmZhJywKICAgICAgICAgICAgICAgIHNwZWVkOiAnZmFzdCcKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBtaW4gPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIG1pbkFtb3VudFsnYnRjX211bHRpc2lnXzJmYSddID0gbWluOwoKICAgICAgICAgICAgICBpZiAodXNlZEFkbWluRmVlKSB7CiAgICAgICAgICAgICAgICBtaW4gPSBuZXcgQmlnTnVtYmVyKG1pbikucGx1cyh1c2VkQWRtaW5GZWUubWluKS50b051bWJlcigpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgbWluOiBtaW4KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNldEJhbGFuY2VPblN0YXRlIiwgLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoY3VycmVuY3kpIHsKICAgICAgICB2YXIgdW5jb25maXJtZWRCYWxhbmNlLCBiYWxhbmNlLCBmaW5hbEJhbGFuY2UsIGV0aEJhbGFuY2U7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB1bmNvbmZpcm1lZEJhbGFuY2UgPSBfdGhpcy5wcm9wcy5kYXRhLnVuY29uZmlybWVkQmFsYW5jZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLmJ0Y211bHRpc2lnLmdldEJhbGFuY2UoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgYmFsYW5jZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgZmluYWxCYWxhbmNlID0gdW5jb25maXJtZWRCYWxhbmNlICE9PSB1bmRlZmluZWQgJiYgdW5jb25maXJtZWRCYWxhbmNlIDwgMCA/IG5ldyBCaWdOdW1iZXIoYmFsYW5jZSkucGx1cyh1bmNvbmZpcm1lZEJhbGFuY2UpLnRvU3RyaW5nKCkgOiBiYWxhbmNlOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMuZXRoLmdldEJhbGFuY2UoKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgZXRoQmFsYW5jZSA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiBmaW5hbEJhbGFuY2UsCiAgICAgICAgICAgICAgICAgICAgZXRoQmFsYW5jZTogZXRoQmFsYW5jZQogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZ2V0RmlhdEJhbGFuY2UiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcywgY3VycmVuY3ksIGFjdGl2ZUZpYXQsIGV4Q3VycmVuY3lSYXRlOwoKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcywgY3VycmVuY3kgPSBfdGhpcyRwcm9wcy5kYXRhLmN1cnJlbmN5LCBhY3RpdmVGaWF0ID0gX3RoaXMkcHJvcHMuYWN0aXZlRmlhdDsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMudXNlci5nZXRFeGNoYW5nZVJhdGUoY3VycmVuY3ksIGFjdGl2ZUZpYXQudG9Mb3dlckNhc2UoKSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgZXhDdXJyZW5jeVJhdGUgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBfdGhpcy5maWF0UmF0ZXNbY3VycmVuY3ldID0gZXhDdXJyZW5jeVJhdGU7CgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIGV4Q3VycmVuY3lSYXRlOiBleEN1cnJlbmN5UmF0ZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25GaW5pc2hXaXRoZHJhdyIsIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmNSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KHR4SWQpIHsKICAgICAgICB2YXIgX3RoaXMkc3RhdGUsIGFtb3VudCwgdG8sIF90aGlzJHByb3BzMiwgX3RoaXMkcHJvcHMyJGRhdGEsIGN1cnJlbmN5LCBhZGRyZXNzLCBiYWxhbmNlLCBpbnZvaWNlLCBvblJlYWR5LCBuYW1lLCB0eEluZm9DYWNoZSwgdHhJbmZvVXJsOwoKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzJHN0YXRlID0gX3RoaXMuc3RhdGUsIGFtb3VudCA9IF90aGlzJHN0YXRlLmFtb3VudCwgdG8gPSBfdGhpcyRzdGF0ZS5hZGRyZXNzOwogICAgICAgICAgICAgICAgX3RoaXMkcHJvcHMyID0gX3RoaXMucHJvcHMsIF90aGlzJHByb3BzMiRkYXRhID0gX3RoaXMkcHJvcHMyLmRhdGEsIGN1cnJlbmN5ID0gX3RoaXMkcHJvcHMyJGRhdGEuY3VycmVuY3ksIGFkZHJlc3MgPSBfdGhpcyRwcm9wczIkZGF0YS5hZGRyZXNzLCBiYWxhbmNlID0gX3RoaXMkcHJvcHMyJGRhdGEuYmFsYW5jZSwgaW52b2ljZSA9IF90aGlzJHByb3BzMiRkYXRhLmludm9pY2UsIG9uUmVhZHkgPSBfdGhpcyRwcm9wczIkZGF0YS5vblJlYWR5LCBuYW1lID0gX3RoaXMkcHJvcHMyLm5hbWU7CiAgICAgICAgICAgICAgICBhY3Rpb25zLmxvYWRlci5oaWRlKCk7CgogICAgICAgICAgICAgICAgaWYgKCFpbnZvaWNlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMuaW52b2ljZXMubWFya0ludm9pY2UoaW52b2ljZS5pZCwgJ3JlYWR5JywgdHhJZCwgYWRkcmVzcyk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF90aGlzLnNldEJhbGFuY2VPblN0YXRlKGN1cnJlbmN5KTsKICAgICAgICAgICAgICAgIC8qDQogICAgICAgICAgICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLkluZm9QYXksIHsNCiAgICAgICAgICAgICAgICAgIGFtb3VudCwNCiAgICAgICAgICAgICAgICAgIGN1cnJlbmN5LA0KICAgICAgICAgICAgICAgICAgYmFsYW5jZSwNCiAgICAgICAgICAgICAgICAgIG9sZEJhbGFuY2U6IDAsIC8vIEBUb2RvINC00L7QtNC10LvQsNGC0Ywgb2xkIGJhbGFuY2UNCiAgICAgICAgICAgICAgICAgIHR4SWQsDQogICAgICAgICAgICAgICAgICB0b0FkZHJlc3M6IHRvDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INGC0YDQsNC90LfQsNC60YbQuNGOINCyINC60LXRiAoKCiAgICAgICAgICAgICAgICB0eEluZm9DYWNoZSA9IHsKICAgICAgICAgICAgICAgICAgYW1vdW50OiBhbW91bnQsCiAgICAgICAgICAgICAgICAgIHNlbmRlckFkZHJlc3M6IGFkZHJlc3MsCiAgICAgICAgICAgICAgICAgIHJlY2VpdmVyQWRkcmVzczogdG8sCiAgICAgICAgICAgICAgICAgIGNvbmZpcm1lZDogZmFsc2UKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBsc0RhdGFDYWNoZS5wdXNoKHsKICAgICAgICAgICAgICAgICAga2V5OiAiVHhJbmZvX2J0Y18iLmNvbmNhdCh0eElkKSwKICAgICAgICAgICAgICAgICAgdGltZTogMzYwMCwKICAgICAgICAgICAgICAgICAgZGF0YTogdHhJbmZvQ2FjaGUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgaXNTaGlwcGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgZXJyb3I6IGZhbHNlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAob25SZWFkeSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7CiAgICAgICAgICAgICAgICAgIG9uUmVhZHkoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0eEluZm9VcmwgPSBoZWxwZXJzLnRyYW5zYWN0aW9ucy5nZXRUeFJvdXRlcignYnRjJywgdHhJZCk7CiAgICAgICAgICAgICAgICByZWRpcmVjdFRvKHR4SW5mb1VybCk7CiAgICAgICAgICAgICAgICBhY3Rpb25zLm1vZGFscy5jbG9zZShuYW1lKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgICAgcmV0dXJuIF9yZWY1LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUNvbmZpcm1TTVMiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgIHZhciBjb2RlLCBfdGhpcyRzdGF0ZTIsIHRvLCBhbW91bnQsIF90aGlzJHByb3BzMywgX3RoaXMkcHJvcHMzJGRhdGEsIGN1cnJlbmN5LCBhZGRyZXNzLCBiYWxhbmNlLCBpbnZvaWNlLCBvblJlYWR5LCBuYW1lLCByZXN1bHQ7CgogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb2RlID0gX3RoaXMuc3RhdGUuY29kZTsKICAgICAgICAgICAgICBfdGhpcyRzdGF0ZTIgPSBfdGhpcy5zdGF0ZSwgdG8gPSBfdGhpcyRzdGF0ZTIuYWRkcmVzcywgYW1vdW50ID0gX3RoaXMkc3RhdGUyLmFtb3VudDsKICAgICAgICAgICAgICBfdGhpcyRwcm9wczMgPSBfdGhpcy5wcm9wcywgX3RoaXMkcHJvcHMzJGRhdGEgPSBfdGhpcyRwcm9wczMuZGF0YSwgY3VycmVuY3kgPSBfdGhpcyRwcm9wczMkZGF0YS5jdXJyZW5jeSwgYWRkcmVzcyA9IF90aGlzJHByb3BzMyRkYXRhLmFkZHJlc3MsIGJhbGFuY2UgPSBfdGhpcyRwcm9wczMkZGF0YS5iYWxhbmNlLCBpbnZvaWNlID0gX3RoaXMkcHJvcHMzJGRhdGEuaW52b2ljZSwgb25SZWFkeSA9IF90aGlzJHByb3BzMyRkYXRhLm9uUmVhZHksIG5hbWUgPSBfdGhpcyRwcm9wczMubmFtZTsKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMuYnRjbXVsdGlzaWcuY29uZmlybVNNU1Byb3RlY3RlZChjb2RlKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDYuc2VudDsKCiAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQudHhJRCkgewogICAgICAgICAgICAgICAgX3RoaXMub25GaW5pc2hXaXRoZHJhdyhyZXN1bHQudHhJRCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7CgogICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQuZXJyb3IgJiYgcmVzdWx0LmVycm9yID09ICdGYWlsIGJyb2FkY2FzdCcgJiYgcmVzdWx0LnJhd1RYKSB7CiAgICAgICAgICAgICAgICAgIGFjdGlvbnMuYnRjLmJyb2FkY2FzdFR4KHJlc3VsdC5yYXdUWCkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjggPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNShfcmVmNykgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHR4aWQ7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHhpZCA9IF9yZWY3LnR4aWQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHhpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9uRmluaXNoV2l0aGRyYXcodHhpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvYWRjYXN0RXJyb3I6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdUeDogcmVzdWx0LnJhd1RYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTaGlwcGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAiV2l0aGRyYXdTTVNfQnJvYWRjYXN0RXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRFx1MDQzNSBcdTA0NDNcdTA0MzRcdTA0MzBcdTA0M0JcdTA0M0VcdTA0NDFcdTA0NEMgXHUwNDNFXHUwNDQyXHUwNDNGXHUwNDQwXHUwNDMwXHUwNDMyXHUwNDM4XHUwNDQyXHUwNDRDIFx1MDQ0Mlx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzN1x1MDQzMFx1MDQzQVx1MDQ0Nlx1MDQzOFx1MDQ0RSBcdTA0MzIgXHUwNDQxXHUwNDM1XHUwNDQyXHUwNDRDICh7ZXJyb3JUZXh0fSkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvclRleHQ6ICJ1bmtub3duIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MykgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgfSgpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNik7CiAgICB9KSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVN1Ym1pdCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgdmFyIF90aGlzJHN0YXRlMywgdG8sIGFtb3VudCwgb3duVHgsIHJhd1R4LCBfdGhpcyRwcm9wczQsIF90aGlzJHByb3BzNCRkYXRhLCBjdXJyZW5jeSwgYWRkcmVzcywgYmFsYW5jZSwgaW52b2ljZSwgb25SZWFkeSwgbmFtZSwgc2VuZE9wdGlvbnMsIHJlc3VsdDsKCiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzJHN0YXRlMyA9IF90aGlzLnN0YXRlLCB0byA9IF90aGlzJHN0YXRlMy5hZGRyZXNzLCBhbW91bnQgPSBfdGhpcyRzdGF0ZTMuYW1vdW50LCBvd25UeCA9IF90aGlzJHN0YXRlMy5vd25UeCwgcmF3VHggPSBfdGhpcyRzdGF0ZTMucmF3VHg7CiAgICAgICAgICAgICAgX3RoaXMkcHJvcHM0ID0gX3RoaXMucHJvcHMsIF90aGlzJHByb3BzNCRkYXRhID0gX3RoaXMkcHJvcHM0LmRhdGEsIGN1cnJlbmN5ID0gX3RoaXMkcHJvcHM0JGRhdGEuY3VycmVuY3ksIGFkZHJlc3MgPSBfdGhpcyRwcm9wczQkZGF0YS5hZGRyZXNzLCBiYWxhbmNlID0gX3RoaXMkcHJvcHM0JGRhdGEuYmFsYW5jZSwgaW52b2ljZSA9IF90aGlzJHByb3BzNCRkYXRhLmludm9pY2UsIG9uUmVhZHkgPSBfdGhpcyRwcm9wczQkZGF0YS5vblJlYWR5LCBuYW1lID0gX3RoaXMkcHJvcHM0Lm5hbWU7CgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIGlzU2hpcHBlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgc3RlcDogJ2NvbmZpcm0nCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRCYWxhbmNlT25TdGF0ZShjdXJyZW5jeSk7CgogICAgICAgICAgICAgIGlmICghKGludm9pY2UgJiYgb3duVHgpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMuaW52b2ljZXMubWFya0ludm9pY2UoaW52b2ljZS5pZCwgJ3JlYWR5Jywgb3duVHgsIGFkZHJlc3MpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGFjdGlvbnMubG9hZGVyLmhpZGUoKTsKICAgICAgICAgICAgICBhY3Rpb25zLm5vdGlmaWNhdGlvbnMuc2hvdyhjb25zdGFudHMubm90aWZpY2F0aW9ucy5TdWNjZXNzV2l0aGRyYXcsIHsKICAgICAgICAgICAgICAgIGFtb3VudDogYW1vdW50LAogICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5LAogICAgICAgICAgICAgICAgYWRkcmVzczogdG8KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgaXNTaGlwcGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgZXJyb3I6IGZhbHNlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBhY3Rpb25zLm1vZGFscy5jbG9zZShuYW1lKTsKCiAgICAgICAgICAgICAgaWYgKG9uUmVhZHkgaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgICAgICAgICAgb25SZWFkeSgpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBzZW5kT3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgIHRvOiB0bywKICAgICAgICAgICAgICAgIGFtb3VudDogYW1vdW50LAogICAgICAgICAgICAgICAgc3BlZWQ6ICdmYXN0JywKICAgICAgICAgICAgICAgIGZyb206IGFkZHJlc3MKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBzZW5kU21zU3RhdHVzOiAnc2VuZGluZycKICAgICAgICAgICAgICB9KTsgLy9ACgoKICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDE3OwogICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLmJ0Y211bHRpc2lnLnNlbmRTTVNQcm90ZWN0ZWQoc2VuZE9wdGlvbnMpOwoKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDcuc2VudDsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2VuZFNNU1Byb3RlY3RlZCByZXN1bHQnLCByZXN1bHQpOwoKICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5hbnN3ZXIgPT09ICdvaycpIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgaXNTaGlwcGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgcmF3VHg6IHJlc3VsdC5yYXdUeCA/IHJlc3VsdC5yYXdUeCA6IHJhd1R4LAogICAgICAgICAgICAgICAgICBzZW5kU21zU3RhdHVzOiAnc2VuZGVkJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgaXNTaGlwcGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgc2VuZFNtc1N0YXR1czogJ29mZmxpbmUnLAogICAgICAgICAgICAgICAgICByYXdUeDogcmVzdWx0LnJhd1R4ID8gcmVzdWx0LnJhd1R4IDogcmF3VHgKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNyk7CiAgICB9KSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNlbGxBbGxCYWxhbmNlIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICB2YXIgX3RoaXMkc3RhdGU0LCBhbW91bnQsIGJhbGFuY2UsIGN1cnJlbmN5LCBpc0V0aFRva2VuLCBtaW4sIHVzZWRBZG1pbkZlZSwgZGF0YSwgbWluRmVlLCBmZWVGcm9tQW1vdW50LCBiYWxhbmNlTWluZXI7CgogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpcyRzdGF0ZTQgPSBfdGhpcy5zdGF0ZSwgYW1vdW50ID0gX3RoaXMkc3RhdGU0LmFtb3VudCwgYmFsYW5jZSA9IF90aGlzJHN0YXRlNC5iYWxhbmNlLCBjdXJyZW5jeSA9IF90aGlzJHN0YXRlNC5jdXJyZW5jeSwgaXNFdGhUb2tlbiA9IF90aGlzJHN0YXRlNC5pc0V0aFRva2VuLCBtaW4gPSBfdGhpcyRzdGF0ZTQubWluLCB1c2VkQWRtaW5GZWUgPSBfdGhpcyRzdGF0ZTQudXNlZEFkbWluRmVlOwogICAgICAgICAgICAgIGRhdGEgPSBfdGhpcy5wcm9wcy5kYXRhOwogICAgICAgICAgICAgIG1pbkZlZSA9IG1pbjsKCiAgICAgICAgICAgICAgaWYgKHVzZWRBZG1pbkZlZSkgewogICAgICAgICAgICAgICAgZmVlRnJvbUFtb3VudCA9IG5ldyBCaWdOdW1iZXIodXNlZEFkbWluRmVlLmZlZSkuZGl2aWRlZEJ5KDEwMCkubXVsdGlwbGllZEJ5KGJhbGFuY2UpOwogICAgICAgICAgICAgICAgbWluRmVlID0gbmV3IEJpZ051bWJlcihtaW5GZWUpLnBsdXMoZmVlRnJvbUFtb3VudCkudG9OdW1iZXIoKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJhbGFuY2VNaW5lciA9IGJhbGFuY2UgPyBiYWxhbmNlICE9PSAwID8gbmV3IEJpZ051bWJlcihiYWxhbmNlKS5taW51cyhtaW5GZWUpLnRvU3RyaW5nKCkgOiBiYWxhbmNlIDogJ1dhaXQgcGxlYXNlLiBMb2FkaW5nLi4uJzsKCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgYW1vdW50OiBiYWxhbmNlTWluZXIKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU4KTsKICAgIH0pKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib3BlblNjYW4iLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvcGVuU2NhbkNhbSA9IF90aGlzLnN0YXRlLm9wZW5TY2FuQ2FtOwoKICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBvcGVuU2NhbkNhbTogIW9wZW5TY2FuQ2FtCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVNbmVtb25pY1NpZ24iLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0ZTUgPSBfdGhpcy5zdGF0ZSwKICAgICAgICAgIG1uZW1vbmljID0gX3RoaXMkc3RhdGU1Lm1uZW1vbmljLAogICAgICAgICAgcmF3VHggPSBfdGhpcyRzdGF0ZTUucmF3VHgsCiAgICAgICAgICBiYWxhbmNlID0gX3RoaXMkc3RhdGU1LmJhbGFuY2UsCiAgICAgICAgICBhbW91bnQgPSBfdGhpcyRzdGF0ZTUuYW1vdW50LAogICAgICAgICAgdG8gPSBfdGhpcyRzdGF0ZTUudG87CgogICAgICBpZiAoIW1uZW1vbmljIHx8ICFhY3Rpb25zLmJ0Yy52YWxpZGF0ZU1uZW1vbmljV29yZHMobW5lbW9uaWMudHJpbSgpKSkgewogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGVycm9yOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgIGlkOiAiV2l0aGRyYXdTTVNfTm90VmFsaWRNbmVtb25pYyIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDIxXHUwNDM1XHUwNDNBXHUwNDQwXHUwNDM1XHUwNDQyXHUwNDNEXHUwNDMwXHUwNDRGIFx1MDQ0NFx1MDQ0MFx1MDQzMFx1MDQzN1x1MDQzMCBcdTA0M0RcdTA0MzUgXHUwNDMyXHUwNDMwXHUwNDNCXHUwNDM4XHUwNDM0XHUwNDNEXHUwNDMwIgogICAgICAgICAgfSkKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIWFjdGlvbnMuYnRjbXVsdGlzaWcuY2hlY2tTbXNNbmVtb25pYyhtbmVtb25pYy50cmltKCkpKSB7CiAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgZXJyb3I6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJXaXRoZHJhd1NNU19Xcm9uZ01uZW1vbmljIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MURcdTA0MzUgXHUwNDNGXHUwNDQwXHUwNDMwXHUwNDMyXHUwNDM4XHUwNDNCXHUwNDRDXHUwNDNEXHUwNDMwXHUwNDRGIFx1MDQ0MVx1MDQzNVx1MDQzQVx1MDQ0MFx1MDQzNVx1MDQ0Mlx1MDQzRFx1MDQzMFx1MDQ0RiBcdTA0NDRcdTA0NDBcdTA0MzBcdTA0MzdcdTA0MzAiCiAgICAgICAgICB9KQogICAgICAgIH0pOwoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBpc1NoaXBwZWQ6IHRydWUsCiAgICAgICAgZXJyb3I6IGZhbHNlLAogICAgICAgIGJyb2FkY2FzdEVycm9yOiBmYWxzZQogICAgICB9KTsKCiAgICAgIGFjdGlvbnMuYnRjbXVsdGlzaWcuc2lnblNtc01uZW1vbmljQW5kQnVpbGQocmF3VHgsIG1uZW1vbmljLnRyaW0oKSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZjExID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKHR4SGV4KSB7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzaWduZWQnLCB0eEhleCk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgdHhIZXg6IHR4SGV4CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgYWN0aW9ucy5idGMuYnJvYWRjYXN0VHgodHhIZXgpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYxMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KF9yZWYxMikgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHR4aWQ7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHhpZCA9IF9yZWYxMi50eGlkOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR4aWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbkZpbmlzaFdpdGhkcmF3KHR4aWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb2FkY2FzdEVycm9yOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTaGlwcGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAiV2l0aGRyYXdTTVNfQnJvYWRjYXN0RXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRFx1MDQzNSBcdTA0NDNcdTA0MzRcdTA0MzBcdTA0M0JcdTA0M0VcdTA0NDFcdTA0NEMgXHUwNDNFXHUwNDQyXHUwNDNGXHUwNDQwXHUwNDMwXHUwNDMyXHUwNDM4XHUwNDQyXHUwNDRDIFx1MDQ0Mlx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzN1x1MDQzMFx1MDQzQVx1MDQ0Nlx1MDQzOFx1MDQ0RSBcdTA0MzIgXHUwNDQxXHUwNDM1XHUwNDQyXHUwNDRDICh7ZXJyb3JUZXh0fSkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvclRleHQ6ICJ1bmtub3duIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlOSk7CiAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYxMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0oKSlbImNhdGNoIl0oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgICAgICAgICAgIHZhciBlcnJvclRleHQgPSBlLnJlcyA/IGUucmVzLnRleHQgOiBlLm1lc3NhZ2U7CgogICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgIGJyb2FkY2FzdEVycm9yOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgaXNTaGlwcGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAiV2l0aGRyYXdTTVNfQnJvYWRjYXN0RXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRFx1MDQzNSBcdTA0NDNcdTA0MzRcdTA0MzBcdTA0M0JcdTA0M0VcdTA0NDFcdTA0NEMgXHUwNDNFXHUwNDQyXHUwNDNGXHUwNDQwXHUwNDMwXHUwNDMyXHUwNDM4XHUwNDQyXHUwNDRDIFx1MDQ0Mlx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzN1x1MDQzMFx1MDQzQVx1MDQ0Nlx1MDQzOFx1MDQ0RSBcdTA0MzIgXHUwNDQxXHUwNDM1XHUwNDQyXHUwNDRDICh7ZXJyb3JUZXh0fSkiLAogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvclRleHQ6IGVycm9yVGV4dAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDQpIHsKICAgICAgICAgIHJldHVybiBfcmVmMTEuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpWyJjYXRjaCJdKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2ZhaWwgc2lnbiB0eCBieSBtbmVtb25pYycpOwoKICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBpc1NoaXBwZWQ6IGZhbHNlLAogICAgICAgICAgZXJyb3I6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJXaXRoZHJhd1NNU19GYWlsU2lnbkJ5TW5lbW9uaWMiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRFx1MDQzNSBcdTA0NDNcdTA0MzRcdTA0MzBcdTA0M0JcdTA0M0VcdTA0NDFcdTA0NEMgXHUwNDNGXHUwNDNFXHUwNDM0XHUwNDNGXHUwNDM4XHUwNDQxXHUwNDMwXHUwNDQyXHUwNDRDIFx1MDQ0Mlx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzN1x1MDQzMFx1MDQzQVx1MDQ0Nlx1MDQzOFx1MDQ0RSIKICAgICAgICAgIH0pCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlU3dpdGNoVG9NbmVtb25pYyIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIHN0ZXA6ICdtbmVtb25pY1NpZ24nCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlU3dpdGNoVG9TbXMiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBzdGVwOiAnY29uZmlybScKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVFcnJvciIsIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlU2NhbiIsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgdmFyIGFkZHJlc3MgPSBkYXRhLnNwbGl0KCc6JylbMV0uc3BsaXQoJz8nKVswXTsKICAgICAgICB2YXIgYW1vdW50ID0gZGF0YS5zcGxpdCgnPScpWzFdOwoKICAgICAgICBfdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBhZGRyZXNzOiBhZGRyZXNzLAogICAgICAgICAgICBhbW91bnQ6IGFtb3VudAogICAgICAgICAgfTsKICAgICAgICB9KTsKCiAgICAgICAgX3RoaXMub3BlblNjYW4oKTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlQ2xvc2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBuYW1lID0gX3RoaXMucHJvcHMubmFtZTsKICAgICAgYWN0aW9ucy5tb2RhbHMuY2xvc2UobmFtZSk7CiAgICB9KTsKCiAgICB2YXIgX3Byb3BzJGRhdGEgPSBwcm9wcy5kYXRhLAogICAgICAgIF9hbW91bnQgPSBfcHJvcHMkZGF0YS5hbW91bnQsCiAgICAgICAgdG9BZGRyZXNzID0gX3Byb3BzJGRhdGEudG9BZGRyZXNzLAogICAgICAgIF9jdXJyZW5jeSA9IF9wcm9wcyRkYXRhLmN1cnJlbmN5LAogICAgICAgIGl0ZW1zID0gcHJvcHMuaXRlbXM7IC8vQAoKICAgIHZhciBfY3VycmVudERlY2ltYWxzID0gY29uc3RhbnRzLnRva2VuRGVjaW1hbHMuYnRjbXVsdGlzaWc7CiAgICB2YXIgc2VsZWN0ZWRJdGVtID0gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiBpdGVtLmN1cnJlbmN5ID09PSBfY3VycmVuY3k7CiAgICB9KVswXTsKICAgIHZhciBfdXNlZEFkbWluRmVlID0gZmFsc2U7CiAgICB2YXIgX21pbiA9IG1pbkFtb3VudFsnYnRjX211bHRpc2lnXzJmYSddOwoKICAgIGlmIChjb25maWcgJiYgY29uZmlnLm9wdHMgJiYgY29uZmlnLm9wdHMuZmVlICYmIGNvbmZpZy5vcHRzLmZlZS5idGMpIHsKICAgICAgX3VzZWRBZG1pbkZlZSA9IGNvbmZpZy5vcHRzLmZlZS5idGM7CgogICAgICBpZiAoX3VzZWRBZG1pbkZlZSkgewogICAgICAgIC8vIG1pbmVyIGZlZSArIG1pbmltYWwgYWRtaW4gZmVlCiAgICAgICAgLy9ACiAgICAgICAgX21pbiA9IG5ldyBCaWdOdW1iZXIoX21pbikucGx1cyhfdXNlZEFkbWluRmVlLm1pbikudG9OdW1iZXIoKTsKICAgICAgfQogICAgfQoKICAgIF90aGlzLnN0YXRlID0gewogICAgICB1c2VkQWRtaW5GZWU6IF91c2VkQWRtaW5GZWUsCiAgICAgIHN0ZXA6ICdmaWxsZm9ybScsCiAgICAgIGlzU2hpcHBlZDogZmFsc2UsCiAgICAgIGFkZHJlc3M6IHRvQWRkcmVzcyA/IHRvQWRkcmVzcyA6ICcnLAogICAgICBhbW91bnQ6IF9hbW91bnQgPyBfYW1vdW50IDogJycsCiAgICAgIGNvZGU6ICcnLAogICAgICBtaW51czogJycsCiAgICAgIGJhbGFuY2U6IHNlbGVjdGVkSXRlbS5iYWxhbmNlIHx8IDAsCiAgICAgIGV0aEJhbGFuY2U6IG51bGwsCiAgICAgIGlzRXRoVG9rZW46IGZhbHNlLAogICAgICBjdXJyZW50RGVjaW1hbHM6IF9jdXJyZW50RGVjaW1hbHMsCiAgICAgIGdldEZpYXQ6IDAsCiAgICAgIGVycm9yOiBmYWxzZSwKICAgICAgc21zQ29uZmlybWVkOiBmYWxzZSwKICAgICAgb3duVHg6ICcnLAogICAgICBtbmVtb25pYzogJycsCiAgICAgIGJyb2FkY2FzdEVycm9yOiBmYWxzZSwKICAgICAgc2VuZFNtc1RpbWVvdXQ6IDAsCiAgICAgIHNlbmRTbXNUaW1lb3V0VGltZXI6IGZhbHNlLAogICAgICBtaW46IF9taW4KICAgIH07CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoV2l0aGRyYXdNb2RhbE11bHRpc2lnLCBbewogICAga2V5OiAiY29tcG9uZW50V2lsbFVubW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkgewogICAgICBjbGVhckludGVydmFsKHRoaXMuc3RhdGUuc2VuZFNtc1RpbWVvdXRUaW1lcik7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB2YXIgZXhDdXJyZW5jeVJhdGUgPSB0aGlzLnN0YXRlLmV4Q3VycmVuY3lSYXRlOwogICAgICB2YXIgY3VycmVuY3kgPSB0aGlzLnByb3BzLmRhdGEuY3VycmVuY3k7CiAgICAgIHRoaXMuc2V0QmFsYW5jZU9uU3RhdGUoY3VycmVuY3kpOwogICAgICB0aGlzLmZpYXRSYXRlcyA9IHt9OwogICAgICB0aGlzLmdldEZpYXRCYWxhbmNlKCk7CiAgICAgIHRoaXMuYWN0dWFseU1pbkFtb3VudCgpOyAvL3RoaXMuZ290b1NtcygpCiAgICB9CiAgfSwgewogICAga2V5OiAiaXNFdGhPckVSQzIwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0V0aE9yRVJDMjAoKSB7fQogIH0sIHsKICAgIGtleTogImFkZHJlc3NJc0NvcnJlY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZHJlc3NJc0NvcnJlY3QoKSB7CiAgICAgIHZhciBhZGRyZXNzID0gdGhpcy5zdGF0ZS5hZGRyZXNzOwoKICAgICAgaWYgKCF0eXBlZm9yY2UuaXNDb2luQWRkcmVzcy5CVEMoYWRkcmVzcykpIHsKICAgICAgICByZXR1cm4gYWN0aW9ucy5idGMuYWRkcmVzc0lzQ29ycmVjdChhZGRyZXNzKTsKICAgICAgfSBlbHNlIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMkc3RhdGU2ID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIGFkZHJlc3MgPSBfdGhpcyRzdGF0ZTYuYWRkcmVzcywKICAgICAgICAgIGFtb3VudCA9IF90aGlzJHN0YXRlNi5hbW91bnQsCiAgICAgICAgICBjb2RlID0gX3RoaXMkc3RhdGU2LmNvZGUsCiAgICAgICAgICBiYWxhbmNlID0gX3RoaXMkc3RhdGU2LmJhbGFuY2UsCiAgICAgICAgICBpc1NoaXBwZWQgPSBfdGhpcyRzdGF0ZTYuaXNTaGlwcGVkLAogICAgICAgICAgbWludXMgPSBfdGhpcyRzdGF0ZTYubWludXMsCiAgICAgICAgICBldGhCYWxhbmNlID0gX3RoaXMkc3RhdGU2LmV0aEJhbGFuY2UsCiAgICAgICAgICBleEN1cnJlbmN5UmF0ZSA9IF90aGlzJHN0YXRlNi5leEN1cnJlbmN5UmF0ZSwKICAgICAgICAgIGN1cnJlbnREZWNpbWFscyA9IF90aGlzJHN0YXRlNi5jdXJyZW50RGVjaW1hbHMsCiAgICAgICAgICBlcnJvciA9IF90aGlzJHN0YXRlNi5lcnJvciwKICAgICAgICAgIG1uZW1vbmljID0gX3RoaXMkc3RhdGU2Lm1uZW1vbmljLAogICAgICAgICAgb3BlblNjYW5DYW0gPSBfdGhpcyRzdGF0ZTYub3BlblNjYW5DYW0sCiAgICAgICAgICBzdGVwID0gX3RoaXMkc3RhdGU2LnN0ZXAsCiAgICAgICAgICBvd25UeCA9IF90aGlzJHN0YXRlNi5vd25UeCwKICAgICAgICAgIHNlbmRTbXNUaW1lb3V0ID0gX3RoaXMkc3RhdGU2LnNlbmRTbXNUaW1lb3V0LAogICAgICAgICAgc2VuZFNtc1N0YXR1cyA9IF90aGlzJHN0YXRlNi5zZW5kU21zU3RhdHVzLAogICAgICAgICAgdXNlZEFkbWluRmVlID0gX3RoaXMkc3RhdGU2LnVzZWRBZG1pbkZlZTsKICAgICAgdmFyIF90aGlzJHByb3BzNSA9IHRoaXMucHJvcHMsCiAgICAgICAgICBuYW1lID0gX3RoaXMkcHJvcHM1Lm5hbWUsCiAgICAgICAgICBfdGhpcyRwcm9wczUkZGF0YSA9IF90aGlzJHByb3BzNS5kYXRhLAogICAgICAgICAgY3VycmVuY3kgPSBfdGhpcyRwcm9wczUkZGF0YS5jdXJyZW5jeSwKICAgICAgICAgIGludm9pY2UgPSBfdGhpcyRwcm9wczUkZGF0YS5pbnZvaWNlLAogICAgICAgICAgdG9rZW5JdGVtcyA9IF90aGlzJHByb3BzNS50b2tlbkl0ZW1zLAogICAgICAgICAgaXRlbXMgPSBfdGhpcyRwcm9wczUuaXRlbXMsCiAgICAgICAgICBpbnRsID0gX3RoaXMkcHJvcHM1LmludGwsCiAgICAgICAgICBwb3J0YWxVSSA9IF90aGlzJHByb3BzNS5wb3J0YWxVSTsKICAgICAgdmFyIF90aGlzJHN0YXRlNyA9IHRoaXMuc3RhdGUsCiAgICAgICAgICBtaW4gPSBfdGhpcyRzdGF0ZTcubWluLAogICAgICAgICAgZGVmYXVsdE1pbiA9IF90aGlzJHN0YXRlNy5taW47CgogICAgICBpZiAodXNlZEFkbWluRmVlKSB7CiAgICAgICAgaWYgKGFtb3VudCkgewogICAgICAgICAgdmFyIGZlZUZyb21BbW91bnQgPSBuZXcgQmlnTnVtYmVyKHVzZWRBZG1pbkZlZS5mZWUpLmRpdmlkZWRCeSgxMDApLm11bHRpcGxpZWRCeShhbW91bnQpOwogICAgICAgICAgaWYgKG5ldyBCaWdOdW1iZXIodXNlZEFkbWluRmVlLm1pbikuaXNHcmVhdGVyVGhhbihmZWVGcm9tQW1vdW50KSkgZmVlRnJvbUFtb3VudCA9IG5ldyBCaWdOdW1iZXIodXNlZEFkbWluRmVlLm1pbik7CiAgICAgICAgICBtaW4gPSBuZXcgQmlnTnVtYmVyKG1pbikucGx1cyhmZWVGcm9tQW1vdW50KS50b051bWJlcigpOyAvLyBBZG1pbiBmZWUgaW4gc2F0b3NoaQogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGxpbmtlZCA9IExpbmsuYWxsKHRoaXMsICdhZGRyZXNzJywgJ2Ftb3VudCcsICdjb2RlJywgJ293blR4JywgJ21uZW1vbmljJyk7CiAgICAgIHZhciBkYXRhQ3VycmVuY3kgPSBjdXJyZW5jeS50b1VwcGVyQ2FzZSgpOwogICAgICB2YXIgaXNEaXNhYmxlZCA9ICFhZGRyZXNzIHx8ICFhbW91bnQgfHwgaXNTaGlwcGVkIHx8IG93blR4IHx8ICF0aGlzLmFkZHJlc3NJc0NvcnJlY3QoKSB8fCBuZXcgQmlnTnVtYmVyKGFtb3VudCkuaXNHcmVhdGVyVGhhbihiYWxhbmNlKSB8fCBuZXcgQmlnTnVtYmVyKGFtb3VudCkuZHAoKSA+IGN1cnJlbnREZWNpbWFsczsKICAgICAgdmFyIE5hblJlcGxhY2VtZW50ID0gYmFsYW5jZSB8fCAnLi4uJzsKICAgICAgdmFyIGdldEZpYXQgPSBhbW91bnQgKiBleEN1cnJlbmN5UmF0ZTsKCiAgICAgIGlmIChuZXcgQmlnTnVtYmVyKGFtb3VudCkuaXNHcmVhdGVyVGhhbigwKSkgewogICAgICAgIGxpbmtlZC5hbW91bnQuY2hlY2soZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gbmV3IEJpZ051bWJlcih2YWx1ZSkuaXNMZXNzVGhhbk9yRXF1YWxUbyhiYWxhbmNlKTsKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgd2lkdGg6ICczNDBweCcsCiAgICAgICAgICAgIGZvbnRTaXplOiAnMTJweCcKICAgICAgICAgIH0KICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogIldpdGhkcm93MTcwIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVGhlIGFtb3VudCBtdXN0IGJlIG5vIG1vcmUgdGhhbiB5b3VyIGJhbGFuY2UiLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIG1pbjogbWluLAogICAgICAgICAgICBjdXJyZW5jeTogIiIuY29uY2F0KGN1cnJlbmN5KQogICAgICAgICAgfQogICAgICAgIH0pKSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnN0YXRlLmFtb3VudCA8IDApIHsKICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGFtb3VudDogJycsCiAgICAgICAgICBtaW51czogdHJ1ZQogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgbGFiZWxzID0gZGVmaW5lTWVzc2FnZXMoewogICAgICAgIHdpdGhkcm93TW9kYWw6IHsKICAgICAgICAgIGlkOiAnd2l0aGRyb3dUaXRsZTI3MScsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNlbmQiCiAgICAgICAgfSwKICAgICAgICBvd25UeFBsYWNlaG9sZGVyOiB7CiAgICAgICAgICBpZDogJ3dpdGhkcmF3T3duVHhQbGFjZWhvbGRlcicsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ9CV0YHQu9C4INC+0L/Qu9Cw0YLQuNC70Lgg0YEg0LTRgNGD0LPQvtCz0L4g0LjRgdGC0L7Rh9C90LjQutCwJwogICAgICAgIH0sCiAgICAgICAgc21zUGxhY2Vob2xkZXI6IHsKICAgICAgICAgIGlkOiAnd2l0aGRyYXdTTVNDb2RlUGxhY2Vob2xkZXInLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdFbnRlciBTTVMtY29kZScKICAgICAgICB9LAogICAgICAgIG1uZW1vbmljUGxhY2Vob2xkZXI6IHsKICAgICAgICAgIGlkOiAncmVnaXN0ZXJTTVNNUGxhY2VIb2xkZXInLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICIxMiBcdTA0NDFcdTA0M0JcdTA0M0VcdTA0MzIiCiAgICAgICAgfQogICAgICB9KTsKICAgICAgdmFyIGZvcm1SZW5kZXIgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgb3BlblNjYW5DYW0gJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUXJSZWFkZXIsIHsKICAgICAgICBvcGVuU2NhbjogdGhpcy5vcGVuU2NhbiwKICAgICAgICBoYW5kbGVFcnJvcjogdGhpcy5oYW5kbGVFcnJvciwKICAgICAgICBoYW5kbGVTY2FuOiB0aGlzLmhhbmRsZVNjYW4KICAgICAgfSksIGludm9pY2UgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSW52b2ljZUluZm9CbG9jaywgewogICAgICAgIGludm9pY2VEYXRhOiBpbnZvaWNlCiAgICAgIH0pLCBzdGVwID09PSAnbW5lbW9uaWNTaWduJyAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInAiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAibm90aWNlIGRhc2hib2FyZFZpZXdOb3RpY2UiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcmF3U01TX01uZW1vbmljU2lnbkNhcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFGXHUwNDNFXHUwNDM0XHUwNDQyXHUwNDMyXHUwNDM1XHUwNDQwXHUwNDM2XHUwNDM0XHUwNDM1XHUwNDNEXHUwNDM4XHUwNDM1IFx1MDQ0Mlx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzN1x1MDQzMFx1MDQzQVx1MDQ0Nlx1MDQzOFx1MDQzOCBcdTA0NDFcdTA0MzVcdTA0M0FcdTA0NDBcdTA0MzVcdTA0NDJcdTA0M0RcdTA0M0VcdTA0MzkgXHUwNDQ0XHUwNDQwXHUwNDMwXHUwNDM3XHUwNDNFXHUwNDM5IgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiaGlnaExldmVsIiwKICAgICAgICBjbGFzc05hbWU6ICJ5bS1oaWRlLWNvbnRlbnQiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZpZWxkTGFiZWwsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInJlZ2lzdGVyU01TTW9kYWxXb3JkcyIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MjFcdTA0MzVcdTA0M0FcdTA0NDBcdTA0MzVcdTA0NDJcdTA0M0RcdTA0MzBcdTA0NEYgXHUwNDQ0XHUwNDQwXHUwNDMwXHUwNDM3XHUwNDMwICgxMiBcdTA0NDFcdTA0M0JcdTA0M0VcdTA0MzIpOiIKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dCwgewogICAgICAgIHN0eWxlTmFtZTogImlucHV0IiwKICAgICAgICB2YWx1ZUxpbms6IGxpbmtlZC5tbmVtb25pYywKICAgICAgICBtdWx0aWxpbmU6IHRydWUsCiAgICAgICAgcGxhY2Vob2xkZXI6ICIiLmNvbmNhdChpbnRsLmZvcm1hdE1lc3NhZ2UobGFiZWxzLm1uZW1vbmljUGxhY2Vob2xkZXIpKQogICAgICB9KSksIGVycm9yICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAicmVkbm90ZXMiCiAgICAgIH0sIGVycm9yKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiYnV0dG9uRnVsbCIsCiAgICAgICAgYmlnOiB0cnVlLAogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgZnVsbFdpZHRoOiB0cnVlLAogICAgICAgIGRpc2FibGVkOiBpc1NoaXBwZWQsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVNbmVtb25pY1NpZ24KICAgICAgfSwgaXNTaGlwcGVkID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiV2l0aGRyYXdNb2RhbDExMjEyIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlByb2Nlc3NpbmcgLi4uIgogICAgICB9KSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImJ0Y1NNU1Byb3RlY3RlZFNpZ25CeU1uZW1vbmljIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxOFx1MDQ0MVx1MDQzRlx1MDQzRVx1MDQzQlx1MDQ0Q1x1MDQzN1x1MDQzRVx1MDQzMlx1MDQzMFx1MDQ0Mlx1MDQ0QyBcdTA0NDFcdTA0MzVcdTA0M0FcdTA0NDBcdTA0MzVcdTA0NDJcdTA0M0RcdTA0NDNcdTA0NEUgXHUwNDQ0XHUwNDQwXHUwNDMwXHUwNDM3XHUwNDQzIgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJociIsIG51bGwpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicCIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJub3RpY2UgbW5lbW9uaWNVc2VOb3RlIGRhc2hib2FyZFZpZXdOb3RpY2UiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcmF3U01TX1VzZVNNU05vdGUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDIyXHUwNDMwXHUwNDNBLVx1MDQzNlx1MDQzNSBcdTA0MzJcdTA0NEIgXHUwNDNDXHUwNDNFXHUwNDM2XHUwNDM1XHUwNDQyXHUwNDM1IFx1MDQzOFx1MDQ0MVx1MDQzRlx1MDQzRVx1MDQzQlx1MDQ0Q1x1MDQzN1x1MDQzRVx1MDQzMlx1MDQzMFx1MDQ0Mlx1MDQ0QyBcdTA0NDFcdTA0M0NcdTA0NDEtXHUwNDNBXHUwNDNFXHUwNDM0LCBcdTA0M0VcdTA0NDJcdTA0M0ZcdTA0NDBcdTA0MzBcdTA0MzJcdTA0M0JcdTA0MzVcdTA0M0RcdTA0M0RcdTA0NEJcdTA0MzkgXHUwNDNEXHUwNDMwIFx1MDQzRlx1MDQ0MFx1MDQzOFx1MDQzMlx1MDQ0Rlx1MDQzN1x1MDQzMFx1MDQzRFx1MDQzRFx1MDQ0Qlx1MDQzOSBcdTA0M0RcdTA0M0VcdTA0M0NcdTA0MzVcdTA0NDAgXHUwNDQyXHUwNDM1XHUwNDNCXHUwNDM1XHUwNDQ0XHUwNDNFXHUwNDNEXHUwNDMwIgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIHN0eWxlTmFtZTogInVzZUF1dGhNZXRob2RCdXR0b24iLAogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVTd2l0Y2hUb1NtcwogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXaXRoZHJhd1NNU19Vc2VTTVMiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDE4XHUwNDQxXHUwNDNGXHUwNDNFXHUwNDNCXHUwNDRDXHUwNDM3XHUwNDNFXHUwNDMyXHUwNDMwXHUwNDQyXHUwNDRDIFx1MDQ0MVx1MDQzQ1x1MDQ0MS1cdTA0M0FcdTA0M0VcdTA0MzQiCiAgICAgIH0pKSksIHN0ZXAgPT09ICdmaWxsZm9ybScgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwIiwgewogICAgICAgIHN0eWxlTmFtZTogIm5vdGljZSBkYXNoYm9hcmRWaWV3Tm90aWNlIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXaXRoZHJvdzIxMyIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJQbGVhc2Ugbm90ZTogRmVlIGlzIHttaW5BbW91bnR9IHtkYXRhfS57YnJ9WW91ciBiYWxhbmNlIG11c3QgZXhjZWVkIHRoaXMgc3VtIHRvIHBlcmZvcm0gdHJhbnNhY3Rpb24iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgbWluQW1vdW50OiAiIi5jb25jYXQobWluKSwKICAgICAgICAgIGJyOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnIiLCBudWxsKSwKICAgICAgICAgIGRhdGE6ICIiLmNvbmNhdChkYXRhQ3VycmVuY3kpCiAgICAgICAgfQogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiaGlnaExldmVsIiwKICAgICAgICBzdHlsZTogewogICAgICAgICAgbWFyZ2luQm90dG9tOiAnMjBweCcKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZpZWxkTGFiZWwsIHsKICAgICAgICBpblJvdzogdHJ1ZQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICBzdHlsZTogewogICAgICAgICAgZm9udFNpemU6ICcxNnB4JwogICAgICAgIH0KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiV2l0aGRyb3cxMTk0IiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkFkZHJlc3MgIgogICAgICB9KSksICcgJywgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcCwgewogICAgICAgIGlkOiAiV3RIMjAzIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInCiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXVEgyNzUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTWFrZSBzdXJlIHRoZSB3YWxsZXQgeW91e2JyfWFyZSBzZW5kaW5nIHRoZSBmdW5kcyB0byBzdXBwb3J0cyB7Y3VycmVuY3l9IiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGJyOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnIiLCBudWxsKSwKICAgICAgICAgIGN1cnJlbmN5OiAiIi5jb25jYXQoY3VycmVuY3kudG9VcHBlckNhc2UoKSkKICAgICAgICB9CiAgICAgIH0pKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dCwgewogICAgICAgIHZhbHVlTGluazogbGlua2VkLmFkZHJlc3MsCiAgICAgICAgZm9jdXNPbkluaXQ6IHRydWUsCiAgICAgICAgcGF0dGVybjogIjAtOWEtekEtWjoiLAogICAgICAgIHBsYWNlaG9sZGVyOiAiRW50ZXIgIi5jb25jYXQoY3VycmVuY3kudG9VcHBlckNhc2UoKSwgIiBhZGRyZXNzIHRvIHRyYW5zZmVyIiksCiAgICAgICAgcXI6IHRydWUsCiAgICAgICAgd2l0aE1hcmdpbjogdHJ1ZSwKICAgICAgICBvcGVuU2NhbjogdGhpcy5vcGVuU2NhbgogICAgICB9KSwgYWRkcmVzcyAmJiAhdGhpcy5hZGRyZXNzSXNDb3JyZWN0KCkgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJyZWRub3RlIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXaXRoZHJhd0luY29yZWN0QWRkcmVzcyIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJZb3VyIGFkZHJlc3Mgbm90IGNvcnJlY3QiCiAgICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAibG93TGV2ZWwgIi5jb25jYXQoaXNEYXJrID8gJ2RhcmsnIDogJycpLAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBtYXJnaW5Cb3R0b206ICc1MHB4JwogICAgICAgIH0KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInAiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiYmFsYW5jZSIKICAgICAgfSwgYmFsYW5jZSwgIiAiLCAiQlRDIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZpZWxkTGFiZWwsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcm93MTE4IiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkFtb3VudCAiCiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJncm91cCIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXQsIHsKICAgICAgICBzdHlsZU5hbWU6ICJpbnB1dCIsCiAgICAgICAgdmFsdWVMaW5rOiBsaW5rZWQuYW1vdW50LAogICAgICAgIHBhdHRlcm46ICIwLTlcXC4iLAogICAgICAgIHBsYWNlaG9sZGVyOiAiRW50ZXIgdGhlIGFtb3VudCIsCiAgICAgICAgZmlhdDogZ2V0RmlhdC50b0ZpeGVkKDIpLAogICAgICAgIG9uS2V5RG93bjogaW5wdXRSZXBsYWNlQ29tbWFXaXRoRG90CiAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBtYXJnaW5MZWZ0OiAnMTVweCcKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgYmlnOiB0cnVlLAogICAgICAgIG9uQ2xpY2s6IHRoaXMuc2VsbEFsbEJhbGFuY2UsCiAgICAgICAgImRhdGEtdGlwIjogdHJ1ZSwKICAgICAgICAiZGF0YS1mb3IiOiAiV2l0aGRyb3cxMzQiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIlNlbGVjdDIxMCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJNQVgiCiAgICAgIH0pKSksICFpc01vYmlsZSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdFRvb2x0aXAsIHsKICAgICAgICBpZDogIldpdGhkcm93MTM0IiwKICAgICAgICB0eXBlOiAibGlnaHQiLAogICAgICAgIGVmZmVjdDogInNvbGlkIiwKICAgICAgICBzdHlsZU5hbWU6ICJyLXRvb2x0aXAiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcmF3QnV0dG9uMzIiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAid2hlbiB5b3UgY2xpY2sgdGhpcyBidXR0b24sIGluIHRoZSBmaWVsZCwgYW4gYW1vdW50IGVxdWFsIHRvIHlvdXIgYmFsYW5jZSBtaW51cyB0aGUgbWluZXJzIGNvbW1pc3Npb24gd2lsbCBhcHBlYXIiCiAgICAgIH0pKSwgIWxpbmtlZC5hbW91bnQuZXJyb3IgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6IG1pbnVzID8gJ3JlZG5vdGUnIDogJ25vdGUnCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcmF3TW9kYWwyNTYiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTm8gbGVzcyB0aGFuIHttaW5BbW91bnR9IiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIG1pbkFtb3VudDogIiIuY29uY2F0KGRlZmF1bHRNaW4pCiAgICAgICAgfQogICAgICB9KSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJzZW5kQnRuc1dyYXBwZXIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiYWN0aW9uQnRuIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBibHVlOiB0cnVlLAogICAgICAgIGJpZzogdHJ1ZSwKICAgICAgICBmaWxsOiB0cnVlLAogICAgICAgIGRpc2FibGVkOiBpc0Rpc2FibGVkLAogICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlU3VibWl0CiAgICAgIH0sIGlzU2hpcHBlZCA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXaXRoZHJhd01vZGFsMTEyMTIiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUHJvY2Vzc2luZyAuLi4iCiAgICAgIH0pKSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXaXRoZHJhd01vZGFsMTExIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNlbmQiCiAgICAgIH0pKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImFjdGlvbkJ0biIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7CiAgICAgICAgYmlnOiB0cnVlLAogICAgICAgIGZpbGw6IHRydWUsCiAgICAgICAgZ3JheTogdHJ1ZSwKICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUNsb3NlCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXaXRoZHJhd01vZGFsQ2FuY2VsQnRuIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNhbmNlbCIKICAgICAgfSkpKSkpLCBlcnJvciAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogInJlZG5vdGUiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcmF3TW9kYWxFcnJvclNlbmQiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAie2Vycm9yTmFtZX0ge2N1cnJlbmN5fTp7YnJ9e2Vycm9yTWVzc2FnZX0iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgZXJyb3JOYW1lOiBpbnRsLmZvcm1hdE1lc3NhZ2UoZXJyb3IubmFtZSksCiAgICAgICAgICBlcnJvck1lc3NhZ2U6IGludGwuZm9ybWF0TWVzc2FnZShlcnJvci5tZXNzYWdlKSwKICAgICAgICAgIGJyOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnIiLCBudWxsKSwKICAgICAgICAgIGN1cnJlbmN5OiAiIi5jb25jYXQoY3VycmVuY3kpCiAgICAgICAgfQogICAgICB9KSksIGludm9pY2UgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJociIsIG51bGwpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImxvd0xldmVsICIuY29uY2F0KGlzRGFyayA/ICdkYXJrJyA6ICcnKSwKICAgICAgICBzdHlsZTogewogICAgICAgICAgbWFyZ2luQm90dG9tOiAnNTBweCcKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiZ3JvdXBGaWVsZCIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJkb3duTGFiZWwiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZpZWxkTGFiZWwsIHsKICAgICAgICBpblJvdzogdHJ1ZQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJtb2JpbGVGb250IgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXaXRoZHJvd093blRYIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxOFx1MDQzQlx1MDQzOCBcdTA0NDNcdTA0M0FcdTA0MzBcdTA0MzZcdTA0MzhcdTA0NDJcdTA0MzUgVFgiCiAgICAgIH0pKSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJncm91cCIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXQsIHsKICAgICAgICBzdHlsZU5hbWU6ICJpbnB1dCIsCiAgICAgICAgdmFsdWVMaW5rOiBsaW5rZWQub3duVHgsCiAgICAgICAgcGxhY2Vob2xkZXI6ICIiLmNvbmNhdChpbnRsLmZvcm1hdE1lc3NhZ2UobGFiZWxzLm93blR4UGxhY2Vob2xkZXIpKQogICAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBzdHlsZU5hbWU6ICJidXR0b25GdWxsIiwKICAgICAgICBiaWc6IHRydWUsCiAgICAgICAgYmx1ZTogdHJ1ZSwKICAgICAgICBmdWxsV2lkdGg6IHRydWUsCiAgICAgICAgZGlzYWJsZWQ6ICFvd25UeCB8fCBpc1NoaXBwZWQsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVTdWJtaXQKICAgICAgfSwgaXNTaGlwcGVkID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcmF3TW9kYWwxMTIxMiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJQcm9jZXNzaW5nIC4uLiIKICAgICAgfSkpIDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiV2l0aGRyYXdNb2RhbEludm9pY2VTYXZlVHgiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFFXHUwNDQyXHUwNDNDXHUwNDM1XHUwNDQyXHUwNDM4XHUwNDQyXHUwNDRDIFx1MDQzQVx1MDQzMFx1MDQzQSBcdTA0M0VcdTA0M0ZcdTA0M0JcdTA0MzBcdTA0NDdcdTA0MzVcdTA0M0RcdTA0M0RcdTA0NEJcdTA0MzkiCiAgICAgIH0pKSkpLCBzdGVwID09PSAnY29uZmlybScgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiaGlnaExldmVsIHNtc0NvZGVIb2xkZXIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZpZWxkTGFiZWwsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcm93MjIyMyIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTTVMgY29kZSIKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dCwgewogICAgICAgIHN0eWxlTmFtZTogImlucHV0IiwKICAgICAgICB2YWx1ZUxpbms6IGxpbmtlZC5jb2RlLAogICAgICAgIHBhdHRlcm46ICIwLTkiLAogICAgICAgIHBsYWNlaG9sZGVyOiAiIi5jb25jYXQoaW50bC5mb3JtYXRNZXNzYWdlKGxhYmVscy5zbXNQbGFjZWhvbGRlcikpCiAgICAgIH0pKSwgc2VuZFNtc1N0YXR1cyA9PT0gJ3NlbmRpbmcnICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAic21zU2VydmVyU3RhdHVzIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXaXRoZHJhd1NNU19TbXNTZW5kaW5nIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRVx1MDQ0Mlx1MDQzRlx1MDQ0MFx1MDQzMFx1MDQzMlx1MDQzQVx1MDQzMCBcdTA0M0ZcdTA0NDBcdTA0M0VcdTA0MzJcdTA0MzVcdTA0NDBcdTA0M0VcdTA0NDdcdTA0M0RcdTA0M0VcdTA0MzNcdTA0M0UgXHUwNDNBXHUwNDNFXHUwNDM0XHUwNDMwIgogICAgICB9KSksIHNlbmRTbXNTdGF0dXMgPT09ICdzZW5kZWQnICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAic21zU2VydmVyU3RhdHVzIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXaXRoZHJhd1NNU19TbXNTZW5kZWQiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFBXHUwNDNFXHUwNDM0IFx1MDQzRVx1MDQ0Mlx1MDQzRlx1MDQ0MFx1MDQzMFx1MDQzMlx1MDQzQlx1MDQzNVx1MDQzRCIKICAgICAgfSkpLCBzZW5kU21zU3RhdHVzID09PSAnb2ZmbGluZScgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJyZWRub3RlcyBzbXNTZXJ2ZXJTdGF0dXMiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcmF3U01TX1NlcnZlck9mZmxpbmUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDIxXHUwNDM1XHUwNDQwXHUwNDMyXHUwNDM1XHUwNDQwIFx1MDQzMFx1MDQzMlx1MDQ0Mlx1MDQzRVx1MDQ0MFx1MDQzOFx1MDQzN1x1MDQzMFx1MDQ0Nlx1MDQzOFx1MDQzOCBcdTA0M0RcdTA0MzUgXHUwNDM0XHUwNDNFXHUwNDQxXHUwNDQyXHUwNDQzXHUwNDNGXHUwNDM1XHUwNDNEIgogICAgICB9KSksIGxpbmtlZC5jb2RlLmVycm9yICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAicmVkbm90ZXMgc21zU2VydmVyU3RhdHVzIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXaXRoZHJhd01vZGFsMjIyNSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTb21ldGhpbmcgd2VudCB3cm9uZywgZW50ZXIgeW91ciBjdXJyZW50IGNvZGUgcGxlYXNlIgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIHN0eWxlTmFtZTogImJ1dHRvbkZ1bGwgY29uZmlybVNtc0NvZGUiLAogICAgICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgICAgICBkaXNhYmxlZDogaXNTaGlwcGVkIHx8IHNlbmRTbXNTdGF0dXMgPT09ICdzZW5kaW5nJyB8fCBzZW5kU21zU3RhdHVzID09PSAnb2ZmbGluZScsCiAgICAgICAgYmlnOiB0cnVlLAogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVDb25maXJtU01TCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcm93MjIyNCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDb25maXJtIgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJociIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJtYXJnaW5IciIKICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwIiwgewogICAgICAgIHN0eWxlTmFtZTogIm5vdGljZSBtbmVtb25pY1VzZU5vdGUgZGFzaGJvYXJkVmlld05vdGljZSIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiV2l0aGRyYXdTTVNfTW5lbW9uaWNOb3RlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxNVx1MDQ0MVx1MDQzQlx1MDQzOCBcdTA0NDMgXHUwNDMyXHUwNDMwXHUwNDQxIFx1MDQzRFx1MDQzNVx1MDQ0MiBcdTA0MzRcdTA0M0VcdTA0NDFcdTA0NDJcdTA0NDNcdTA0M0ZcdTA0MzAgXHUwNDNBIFx1MDQ0Mlx1MDQzNVx1MDQzQlx1MDQzNVx1MDQ0NFx1MDQzRVx1MDQzRFx1MDQ0MyBcdTA0MzhcdTA0M0JcdTA0MzggXHUwNDNEXHUwNDM1IFx1MDQzRlx1MDQzRVx1MDQzQlx1MDQ0M1x1MDQ0N1x1MDQzMFx1MDQzNVx1MDQ0Mlx1MDQ0MVx1MDQ0RiBcdTA0M0ZcdTA0M0VcdTA0M0JcdTA0NDNcdTA0NDdcdTA0MzhcdTA0NDJcdTA0NEMgXHUwNDNBXHUwNDNFXHUwNDM0LCBcdTA0MzJcdTA0NEIgXHUwNDNDXHUwNDNFXHUwNDM2XHUwNDM1XHUwNDQyXHUwNDM1IFx1MDQzMlx1MDQzRVx1MDQ0MVx1MDQzRlx1MDQzRVx1MDQzQlx1MDQ0Q1x1MDQzN1x1MDQzRVx1MDQzMlx1MDQzMFx1MDQ0Mlx1MDQ0QyBcdTA0NDFcdTA0MzVcdTA0M0FcdTA0NDBcdTA0MzVcdTA0NDJcdTA0M0RcdTA0M0VcdTA0MzkgXHUwNDQ0XHUwNDQwXHUwNDMwXHUwNDM3XHUwNDNFXHUwNDM5IgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIHN0eWxlTmFtZTogInVzZUF1dGhNZXRob2RCdXR0b24iLAogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVTd2l0Y2hUb01uZW1vbmljCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcmF3U01TX1VzZU1uZW1vbmljIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxOFx1MDQ0MVx1MDQzRlx1MDQzRVx1MDQzQlx1MDQ0Q1x1MDQzN1x1MDQzRVx1MDQzMlx1MDQzMFx1MDQ0Mlx1MDQ0QyBcdTA0NDFcdTA0MzVcdTA0M0FcdTA0NDBcdTA0MzVcdTA0NDJcdTA0M0RcdTA0NDNcdTA0NEUgXHUwNDQ0XHUwNDQwXHUwNDMwXHUwNDM3XHUwNDQzIgogICAgICB9KSkpKTsKICAgICAgcmV0dXJuIHBvcnRhbFVJID8gZm9ybVJlbmRlciA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE1vZGFsLCB7CiAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICB0aXRsZTogIiIuY29uY2F0KGludGwuZm9ybWF0TWVzc2FnZShsYWJlbHMud2l0aGRyb3dNb2RhbCksICcgJykuY29uY2F0KGN1cnJlbmN5LnRvVXBwZXJDYXNlKCkpCiAgICAgIH0sIGZvcm1SZW5kZXIpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFdpdGhkcmF3TW9kYWxNdWx0aXNpZzsKfShSZWFjdC5Db21wb25lbnQpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzMiwgInByb3BUeXBlcyIsIHsKICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLAogIGRhdGE6IFByb3BUeXBlcy5vYmplY3QKfSksIF90ZW1wKSkgfHwgX2NsYXNzKSB8fCBfY2xhc3MpIHx8IF9jbGFzcyk7CmV4cG9ydCB7IFdpdGhkcmF3TW9kYWxNdWx0aXNpZyBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/components/modals/WithdrawModalMultisig/WithdrawModalMultisig.tsx"],"names":["React","Fragment","PropTypes","helpers","constants","actions","Link","connect","config","cssModules","styles","ownStyle","BigNumber","Modal","FieldLabel","Input","Button","Tooltip","FormattedMessage","injectIntl","defineMessages","ReactTooltip","isMobile","InvoiceInfoBlock","typeforce","minAmount","inputReplaceCommaWithDot","QrReader","redirectTo","lsDataCache","isDark","localStorage","getItem","WithdrawModalMultisig","currencies","user","btcData","activeFiat","btcMultisigSMSData","dashboardModalsAllowed","ui","items","dashboardView","allowMultiple","props","setState","smsStatus","step","currency","data","currentDecimals","state","ethTokenMinAmount","a","usedAdminFee","estimateFeeValue","method","speed","min","plus","toNumber","unconfirmedBalance","btcmultisig","getBalance","balance","finalBalance","undefined","toString","eth","ethBalance","getExchangeRate","toLowerCase","exCurrencyRate","fiatRates","txId","amount","to","address","invoice","onReady","name","loader","hide","invoices","markInvoice","id","setBalanceOnState","txInfoCache","senderAddress","receiverAddress","confirmed","push","key","time","isShipped","error","Function","txInfoUrl","transactions","getTxRouter","modals","close","code","confirmSMSProtected","result","txID","onFinishWithdraw","console","log","rawTX","btc","broadcastTx","then","txid","broadcastError","rawTx","errorText","ownTx","notifications","show","SuccessWithdraw","sendOptions","from","sendSmsStatus","sendSMSProtected","answer","isEthToken","minFee","feeFromAmount","fee","dividedBy","multipliedBy","balanceMiner","minus","openScanCam","mnemonic","validateMnemonicWords","trim","checkSmsMnemonic","signSmsMnemonicAndBuild","txHex","e","res","text","message","err","split","openScan","toAddress","tokenDecimals","selectedItem","filter","item","opts","getFiat","smsConfirmed","sendSmsTimeout","sendSmsTimeoutTimer","clearInterval","getFiatBalance","actualyMinAmount","isCoinAddress","BTC","addressIsCorrect","tokenItems","intl","portalUI","defaultMin","isGreaterThan","linked","all","dataCurrency","toUpperCase","isDisabled","dp","NanReplacement","check","value","isLessThanOrEqualTo","width","fontSize","labels","withdrowModal","defaultMessage","ownTxPlaceholder","smsPlaceholder","mnemonicPlaceholder","formRender","handleError","handleScan","formatMessage","handleMnemonicSign","handleSwitchToSms","br","marginBottom","textAlign","toFixed","marginLeft","sellAllBalance","handleSubmit","handleClose","errorName","errorMessage","handleConfirmSMS","handleSwitchToMnemonic","Component","string","object"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,OAAP,IAAkBC,SAAlB,QAAmC,SAAnC;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,OAAOC,IAAP,MAAiB,4BAAjB;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AAEA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,OAAOC,MAAP,MAAmB,qCAAnB;AACA,OAAOC,QAAP,MAAqB,8BAArB;AAEA,SAASC,SAAT,QAA0B,cAA1B;AACA,OAAOC,KAAP,MAAkB,8BAAlB;AACA,OAAOC,UAAP,MAAuB,wCAAvB;AACA,OAAOC,KAAP,MAAkB,8BAAlB;AACA,OAAOC,MAAP,MAAmB,mCAAnB;AACA,OAAOC,OAAP,MAAoB,+BAApB;AACA,SAASC,gBAAT,EAA2BC,UAA3B,EAAuCC,cAAvC,QAA6D,YAA7D;AACA,OAAOC,YAAP,MAAyB,eAAzB;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,OAAOC,gBAAP,MAA6B,8CAA7B;AAEA,OAAOC,SAAP,MAAsB,yBAAtB,C,CACA;;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,SAASC,wBAAT,QAAyC,kBAAzC;AACA,OAAOC,QAAP,MAAqB,qBAArB;AAEA,OAAOC,UAAP,MAAuB,oBAAvB;AAEA,OAAOC,WAAP,MAAwB,qBAAxB;AAEA,IAAMC,MAAM,GAAGC,YAAY,CAACC,OAAb,CAAqB5B,SAAS,CAAC2B,YAAV,CAAuBD,MAA5C,CAAf;IAgBqBG,qB,WAbpB1B,OAAO,CACN;AAAA,MACE2B,UADF,QACEA,UADF;AAAA,uBAEEC,IAFF;AAAA,MAEUC,OAFV,aAEUA,OAFV;AAAA,MAEmBC,UAFnB,aAEmBA,UAFnB;AAAA,MAE+BC,kBAF/B,aAE+BA,kBAF/B;AAAA,MAGQC,sBAHR,QAGEC,EAHF,CAGQD,sBAHR;AAAA,SAIO;AACLF,IAAAA,UAAU,EAAVA,UADK;AAELH,IAAAA,UAAU,EAAEA,UAAU,CAACO,KAFlB;AAGLA,IAAAA,KAAK,EAAE,CAACL,OAAD,EAAUE,kBAAV,CAHF;AAILI,IAAAA,aAAa,EAAEH;AAJV,GAJP;AAAA,CADM,C,UAYP9B,UAAU,iCAAMC,MAAN,GAAiBC,QAAjB,GAA6B;AAAEgC,EAAAA,aAAa,EAAE;AAAjB,CAA7B,C,EAbVxB,U;;;;;AAwBC,iCAAYyB,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB;;AAAA;;AAAA,8DAqDT,YAAM;AACd,YAAKC,QAAL,CAAc;AACZC,QAAAA,SAAS,EAAE,QADC;AAEZC,QAAAA,IAAI,EAAE;AAFM,OAAd;AAID,KA1DkB;;AAAA,8EA0EO,YAAM;AAAA,UAEpBC,QAFoB,GAG1B,MAAKJ,KAHqB,CAE5BK,IAF4B,CAEpBD,QAFoB;AAAA,UAItBE,eAJsB,GAIF,MAAKC,KAJH,CAItBD,eAJsB;AAM9B,UAAIE,iBAAiB,GAAG,IAAxB;;AAEA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,eAAe,GAAG,CAAtC,EAAyCG,CAAC,EAA1C,EAA8C;AAC5CD,QAAAA,iBAAiB,IAAI,GAArB;AACD;;AAED,aAAQA,iBAAiB,IAAI,GAA7B;AACD,KAvFkB;;AAAA,6IAyFA;AAAA;AAAA;AAAA;AAAA;AAAA;AACTE,cAAAA,YADS,GACQ,MAAKH,KADb,CACTG,YADS;AAAA;AAAA,qBAGInD,OAAO,CAAC,KAAD,CAAP,CAAeoD,gBAAf,CAAgC;AAAEC,gBAAAA,MAAM,EAAE,UAAV;AAAsBC,gBAAAA,KAAK,EAAE;AAA7B,eAAhC,CAHJ;;AAAA;AAGbC,cAAAA,GAHa;AAIjBjC,cAAAA,SAAS,CAAC,kBAAD,CAAT,GAAgCiC,GAAhC;;AAEA,kBAAIJ,YAAJ,EAAkB;AAChBI,gBAAAA,GAAG,GAAG,IAAI9C,SAAJ,CAAc8C,GAAd,EAAmBC,IAAnB,CAAwBL,YAAY,CAACI,GAArC,EAA0CE,QAA1C,EAAN;AACD;;AAED,oBAAKf,QAAL,CAAc;AACZa,gBAAAA,GAAG,EAAHA;AADY,eAAd;;AAViB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAzFA;;AAAA;AAAA,2EAwGC,kBAAOV,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAERa,gBAAAA,kBAFQ,GAGd,MAAKjB,KAHS,CAEhBK,IAFgB,CAERY,kBAFQ;AAAA;AAAA,uBAKSxD,OAAO,CAACyD,WAAR,CAAoBC,UAApB,EALT;;AAAA;AAKZC,gBAAAA,OALY;AAOZC,gBAAAA,YAPY,GAQhBJ,kBAAkB,KAAKK,SAAvB,IAAoCL,kBAAkB,GAAG,CAAzD,GACI,IAAIjD,SAAJ,CAAcoD,OAAd,EAAuBL,IAAvB,CAA4BE,kBAA5B,EAAgDM,QAAhD,EADJ,GAEIH,OAVY;AAAA;AAAA,uBAWO3D,OAAO,CAAC+D,GAAR,CAAYL,UAAZ,EAXP;;AAAA;AAWZM,gBAAAA,UAXY;;AAalB,sBAAKxB,QAAL,CAAc;AAAA,yBAAO;AACnBmB,oBAAAA,OAAO,EAAEC,YADU;AAEnBI,oBAAAA,UAAU,EAAVA;AAFmB,mBAAP;AAAA,iBAAd;;AAbkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAxGD;;AAAA;AAAA;AAAA;AAAA;;AAAA,2IA2HF;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,4BAIX,MAAKzB,KAJM,EAELI,QAFK,eAEbC,IAFa,CAELD,QAFK,EAGbX,UAHa,eAGbA,UAHa;AAAA;AAAA,qBAMchC,OAAO,CAAC8B,IAAR,CAAamC,eAAb,CAA6BtB,QAA7B,EAAuCX,UAAU,CAACkC,WAAX,EAAvC,CANd;;AAAA;AAMTC,cAAAA,cANS;AAOf,oBAAKC,SAAL,CAAezB,QAAf,IAA2BwB,cAA3B;;AAEA,oBAAK3B,QAAL,CAAc;AAAA,uBAAO;AACnB2B,kBAAAA,cAAc,EAAdA;AADmB,iBAAP;AAAA,eAAd;;AATe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA3HE;;AAAA;AAAA,2EAyIA,kBAAOE,IAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,8BACe,MAAKvB,KADpB,EACTwB,MADS,eACTA,MADS,EACQC,EADR,eACDC,OADC;AAAA,+BAMb,MAAKjC,KANQ,mCAIfK,IAJe,EAIPD,QAJO,qBAIPA,QAJO,EAIG6B,OAJH,qBAIGA,OAJH,EAIYb,OAJZ,qBAIYA,OAJZ,EAIqBc,OAJrB,qBAIqBA,OAJrB,EAI8BC,OAJ9B,qBAI8BA,OAJ9B,EAKfC,IALe,gBAKfA,IALe;AAQjB3E,gBAAAA,OAAO,CAAC4E,MAAR,CAAeC,IAAf;;AARiB,qBAUbJ,OAVa;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAWTzE,OAAO,CAAC8E,QAAR,CAAiBC,WAAjB,CAA6BN,OAAO,CAACO,EAArC,EAAyC,OAAzC,EAAkDX,IAAlD,EAAwDG,OAAxD,CAXS;;AAAA;AAajB,sBAAKS,iBAAL,CAAuBtC,QAAvB;AAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEI;;;AACMuC,gBAAAA,WA3BW,GA2BG;AAClBZ,kBAAAA,MAAM,EAANA,MADkB;AAElBa,kBAAAA,aAAa,EAAEX,OAFG;AAGlBY,kBAAAA,eAAe,EAAEb,EAHC;AAIlBc,kBAAAA,SAAS,EAAE;AAJO,iBA3BH;AAkCjB7D,gBAAAA,WAAW,CAAC8D,IAAZ,CAAiB;AACfC,kBAAAA,GAAG,uBAAgBlB,IAAhB,CADY;AAEfmB,kBAAAA,IAAI,EAAE,IAFS;AAGf5C,kBAAAA,IAAI,EAAEsC;AAHS,iBAAjB;;AAMA,sBAAK1C,QAAL,CAAc;AACZiD,kBAAAA,SAAS,EAAE,KADC;AAEZC,kBAAAA,KAAK,EAAE;AAFK,iBAAd;;AAKA,oBAAIhB,OAAO,YAAYiB,QAAvB,EAAiC;AAC/BjB,kBAAAA,OAAO;AACR;;AAEKkB,gBAAAA,SAjDW,GAiDC9F,OAAO,CAAC+F,YAAR,CAAqBC,WAArB,CAAiC,KAAjC,EAAwCzB,IAAxC,CAjDD;AAkDjB9C,gBAAAA,UAAU,CAACqE,SAAD,CAAV;AAEA5F,gBAAAA,OAAO,CAAC+F,MAAR,CAAeC,KAAf,CAAqBrB,IAArB;;AApDiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAzIA;;AAAA;AAAA;AAAA;AAAA;;AAAA,6IAgMA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACTsB,cAAAA,IADS,GACA,MAAKnD,KADL,CACTmD,IADS;AAAA,6BAEe,MAAKnD,KAFpB,EAEAyB,EAFA,gBAETC,OAFS,EAEIF,MAFJ,gBAEIA,MAFJ;AAAA,6BAMb,MAAK/B,KANQ,mCAIfK,IAJe,EAIPD,QAJO,qBAIPA,QAJO,EAIG6B,OAJH,qBAIGA,OAJH,EAIYb,OAJZ,qBAIYA,OAJZ,EAIqBc,OAJrB,qBAIqBA,OAJrB,EAI8BC,OAJ9B,qBAI8BA,OAJ9B,EAKfC,IALe,gBAKfA,IALe;AAAA;AAAA,qBAQI3E,OAAO,CAACyD,WAAR,CAAoByC,mBAApB,CAAwCD,IAAxC,CARJ;;AAAA;AAQXE,cAAAA,MARW;;AASjB,kBAAIA,MAAM,IAAIA,MAAM,CAACC,IAArB,EAA2B;AACzB,sBAAKC,gBAAL,CAAsBF,MAAM,CAACC,IAA7B;AACD,eAFD,MAEO;AACLE,gBAAAA,OAAO,CAACC,GAAR,CAAYJ,MAAZ;;AACA,oBAAIA,MAAM,IAAIA,MAAM,CAACT,KAAjB,IAA0BS,MAAM,CAACT,KAAP,IAAgB,gBAA1C,IAA8DS,MAAM,CAACK,KAAzE,EAAgF;AAC9ExG,kBAAAA,OAAO,CAACyG,GAAR,CAAYC,WAAZ,CAAwBP,MAAM,CAACK,KAA/B,EAAsCG,IAAtC;AAAA,yFAA2C;AAAA;AAAA;AAAA;AAAA;AAAA;AAASC,8BAAAA,IAAT,SAASA,IAAT;;AACzC,kCAAIA,IAAJ,EAAU;AACR,sCAAKP,gBAAL,CAAsBO,IAAtB;AACD,+BAFD,MAEO;AACL,sCAAKpE,QAAL,CAAc;AACZqE,kCAAAA,cAAc,EAAE,IADJ;AAEZC,kCAAAA,KAAK,EAAEX,MAAM,CAACK,KAFF;AAGZf,kCAAAA,SAAS,EAAE,KAHC;AAIZC,kCAAAA,KAAK,eACH,oBAAC,gBAAD;AACE,oCAAA,EAAE,EAAC,4BADL;AAEE,oCAAA,cAAc,EAAC,2NAFjB;AAGE,oCAAA,MAAM,EAAE;AAAEqB,sCAAAA,SAAS;AAAX;AAHV;AALU,iCAAd;AAYD;;AAhBwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAA3C;;AAAA;AAAA;AAAA;AAAA;AAkBD;AACF;;AAjCgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAhMA;;AAAA,yIAoOJ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,6BACiC,MAAKjE,KADtC,EACIyB,EADJ,gBACLC,OADK,EACQF,MADR,gBACQA,MADR,EACgB0C,KADhB,gBACgBA,KADhB,EACuBF,KADvB,gBACuBA,KADvB;AAAA,6BAMT,MAAKvE,KANI,mCAIXK,IAJW,EAIHD,QAJG,qBAIHA,QAJG,EAIO6B,OAJP,qBAIOA,OAJP,EAIgBb,OAJhB,qBAIgBA,OAJhB,EAIyBc,OAJzB,qBAIyBA,OAJzB,EAIkCC,OAJlC,qBAIkCA,OAJlC,EAKXC,IALW,gBAKXA,IALW;;AAQb,oBAAKnC,QAAL,CAAc;AAAA,uBAAO;AACnBiD,kBAAAA,SAAS,EAAE,IADQ;AAEnB/C,kBAAAA,IAAI,EAAE;AAFa,iBAAP;AAAA,eAAd;;AAKA,oBAAKuC,iBAAL,CAAuBtC,QAAvB;;AAba,oBAeT8B,OAAO,IAAIuC,KAfF;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAgBLhH,OAAO,CAAC8E,QAAR,CAAiBC,WAAjB,CAA6BN,OAAO,CAACO,EAArC,EAAyC,OAAzC,EAAkDgC,KAAlD,EAAyDxC,OAAzD,CAhBK;;AAAA;AAiBXxE,cAAAA,OAAO,CAAC4E,MAAR,CAAeC,IAAf;AACA7E,cAAAA,OAAO,CAACiH,aAAR,CAAsBC,IAAtB,CAA2BnH,SAAS,CAACkH,aAAV,CAAwBE,eAAnD,EAAoE;AAClE7C,gBAAAA,MAAM,EAANA,MADkE;AAElE3B,gBAAAA,QAAQ,EAARA,QAFkE;AAGlE6B,gBAAAA,OAAO,EAAED;AAHyD,eAApE;;AAKA,oBAAK/B,QAAL,CAAc;AAAA,uBAAO;AAAEiD,kBAAAA,SAAS,EAAE,KAAb;AAAoBC,kBAAAA,KAAK,EAAE;AAA3B,iBAAP;AAAA,eAAd;;AACA1F,cAAAA,OAAO,CAAC+F,MAAR,CAAeC,KAAf,CAAqBrB,IAArB;;AACA,kBAAID,OAAO,YAAYiB,QAAvB,EAAiC;AAC/BjB,gBAAAA,OAAO;AACR;;AA3BU;;AAAA;AA+BT0C,cAAAA,WA/BS,GA+BK;AAChB7C,gBAAAA,EAAE,EAAFA,EADgB;AAEhBD,gBAAAA,MAAM,EAANA,MAFgB;AAGhBlB,gBAAAA,KAAK,EAAE,MAHS;AAIhBiE,gBAAAA,IAAI,EAAE7C;AAJU,eA/BL;;AAsCb,oBAAKhC,QAAL,CAAc;AACZ8E,gBAAAA,aAAa,EAAE;AADH,eAAd,EAtCa,CAyCb;;;AAzCa;AAAA,qBA0CQtH,OAAO,CAACyD,WAAR,CAAoB8D,gBAApB,CAAqCH,WAArC,CA1CR;;AAAA;AA0CPjB,cAAAA,MA1CO;AA4CbG,cAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCJ,MAAvC;;AACA,kBAAIA,MAAM,IAAIA,MAAM,CAACqB,MAAP,KAAkB,IAAhC,EAAsC;AACpC,sBAAKhF,QAAL,CAAc;AACZiD,kBAAAA,SAAS,EAAE,KADC;AAEZqB,kBAAAA,KAAK,EAAEX,MAAM,CAACW,KAAP,GAAeX,MAAM,CAACW,KAAtB,GAA8BA,KAFzB;AAGZQ,kBAAAA,aAAa,EAAE;AAHH,iBAAd;AAKD,eAND,MAMO;AACL,sBAAK9E,QAAL,CAAc;AACZiD,kBAAAA,SAAS,EAAE,KADC;AAEZ6B,kBAAAA,aAAa,EAAE,SAFH;AAGZR,kBAAAA,KAAK,EAAEX,MAAM,CAACW,KAAP,GAAeX,MAAM,CAACW,KAAtB,GAA8BA;AAHzB,iBAAd;AAKD;;AAzDY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KApOI;;AAAA,2IAgSF;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,6BACsD,MAAKhE,KAD3D,EACPwB,MADO,gBACPA,MADO,EACCX,OADD,gBACCA,OADD,EACUhB,QADV,gBACUA,QADV,EACoB8E,UADpB,gBACoBA,UADpB,EACgCpE,GADhC,gBACgCA,GADhC,EACqCJ,YADrC,gBACqCA,YADrC;AAGPL,cAAAA,IAHO,GAGE,MAAKL,KAHP,CAGPK,IAHO;AAKX8E,cAAAA,MALW,GAKFrE,GALE;;AAOf,kBAAIJ,YAAJ,EAAkB;AACZ0E,gBAAAA,aADY,GACI,IAAIpH,SAAJ,CAAc0C,YAAY,CAAC2E,GAA3B,EAAgCC,SAAhC,CAA0C,GAA1C,EAA+CC,YAA/C,CAA4DnE,OAA5D,CADJ;AAEhB+D,gBAAAA,MAAM,GAAG,IAAInH,SAAJ,CAAcmH,MAAd,EAAsBpE,IAAtB,CAA2BqE,aAA3B,EAA0CpE,QAA1C,EAAT;AACD;;AAEKwE,cAAAA,YAZS,GAYMpE,OAAO,GACxBA,OAAO,KAAK,CAAZ,GACE,IAAIpD,SAAJ,CAAcoD,OAAd,EAAuBqE,KAAvB,CAA6BN,MAA7B,EAAqC5D,QAArC,EADF,GAEEH,OAHsB,GAIxB,yBAhBW;;AAkBf,oBAAKnB,QAAL,CAAc;AACZ8B,gBAAAA,MAAM,EAAEyD;AADI,eAAd;;AAlBe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAhSE;;AAAA,+DAyTR,YAAM;AAAA,UACPE,WADO,GACS,MAAKnF,KADd,CACPmF,WADO;;AAGf,YAAKzF,QAAL,CAAc;AAAA,eAAO;AACnByF,UAAAA,WAAW,EAAE,CAACA;AADK,SAAP;AAAA,OAAd;AAGD,KA/TkB;;AAAA,yEAiUE,YAAM;AAAA,yBACwB,MAAKnF,KAD7B;AAAA,UACjBoF,QADiB,gBACjBA,QADiB;AAAA,UACPpB,KADO,gBACPA,KADO;AAAA,UACAnD,OADA,gBACAA,OADA;AAAA,UACSW,MADT,gBACSA,MADT;AAAA,UACiBC,EADjB,gBACiBA,EADjB;;AAGzB,UAAI,CAAC2D,QAAD,IAAa,CAAClI,OAAO,CAACyG,GAAR,CAAY0B,qBAAZ,CAAkCD,QAAQ,CAACE,IAAT,EAAlC,CAAlB,EAAsE;AACpE,cAAK5F,QAAL,CAAc;AACZkD,UAAAA,KAAK,eACH,oBAAC,gBAAD;AACE,YAAA,EAAE,EAAC,8BADL;AAEE,YAAA,cAAc,EAAC;AAFjB;AAFU,SAAd;;AAQA;AACD;;AACD,UAAI,CAAC1F,OAAO,CAACyD,WAAR,CAAoB4E,gBAApB,CAAqCH,QAAQ,CAACE,IAAT,EAArC,CAAL,EAA4D;AAC1D,cAAK5F,QAAL,CAAc;AACZkD,UAAAA,KAAK,eACH,oBAAC,gBAAD;AACE,YAAA,EAAE,EAAC,2BADL;AAEE,YAAA,cAAc,EAAC;AAFjB;AAFU,SAAd;;AAQA;AACD;;AAED,YAAKlD,QAAL,CAAc;AACZiD,QAAAA,SAAS,EAAE,IADC;AAEZC,QAAAA,KAAK,EAAE,KAFK;AAGZmB,QAAAA,cAAc,EAAE;AAHJ,OAAd;;AAMA7G,MAAAA,OAAO,CAACyD,WAAR,CACG6E,uBADH,CAC2BxB,KAD3B,EACkCoB,QAAQ,CAACE,IAAT,EADlC,EAEGzB,IAFH;AAAA,8EAEQ,mBAAO4B,KAAP;AAAA;AAAA;AAAA;AAAA;AACJjC,kBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBgC,KAAtB;;AACA,wBAAK/F,QAAL,CAAc;AACZ+F,oBAAAA,KAAK,EAALA;AADY,mBAAd;;AAGAvI,kBAAAA,OAAO,CAACyG,GAAR,CACGC,WADH,CACe6B,KADf,EAEG5B,IAFH;AAAA,0FAEQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAASC,8BAAAA,IAAT,UAASA,IAAT;;AACJ,kCAAIA,IAAJ,EAAU;AACR,sCAAKP,gBAAL,CAAsBO,IAAtB;AACD,+BAFD,MAEO;AACL,sCAAKpE,QAAL,CAAc;AACZqE,kCAAAA,cAAc,EAAE,IADJ;AAEZpB,kCAAAA,SAAS,EAAE,KAFC;AAGZC,kCAAAA,KAAK,eACH,oBAAC,gBAAD;AACE,oCAAA,EAAE,EAAC,4BADL;AAEE,oCAAA,cAAc,EAAC,2NAFjB;AAGE,oCAAA,MAAM,EAAE;AAAEqB,sCAAAA,SAAS;AAAX;AAHV;AAJU,iCAAd;AAWD;;AAfG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFR;;AAAA;AAAA;AAAA;AAAA,gCAmBS,UAACyB,CAAD,EAAO;AACZlC,oBAAAA,OAAO,CAACZ,KAAR,CAAc8C,CAAd;AACA,wBAAMzB,SAAS,GAAGyB,CAAC,CAACC,GAAF,GAAQD,CAAC,CAACC,GAAF,CAAMC,IAAd,GAAqBF,CAAC,CAACG,OAAzC;;AACA,0BAAKnG,QAAL,CAAc;AACZqE,sBAAAA,cAAc,EAAE,IADJ;AAEZpB,sBAAAA,SAAS,EAAE,KAFC;AAGZC,sBAAAA,KAAK,eACH,oBAAC,gBAAD;AACE,wBAAA,EAAE,EAAC,4BADL;AAEE,wBAAA,cAAc,EAAC,2NAFjB;AAGE,wBAAA,MAAM,EAAE;AAAEqB,0BAAAA,SAAS,EAATA;AAAF;AAHV;AAJU,qBAAd;AAWD,mBAjCH;;AALI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAFR;;AAAA;AAAA;AAAA;AAAA,oBA0CS,UAACyB,CAAD,EAAO;AACZlC,QAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;;AACA,cAAK/D,QAAL,CAAc;AACZiD,UAAAA,SAAS,EAAE,KADC;AAEZC,UAAAA,KAAK,eACH,oBAAC,gBAAD;AACE,YAAA,EAAE,EAAC,gCADL;AAEE,YAAA,cAAc,EAAC;AAFjB;AAHU,SAAd;AASD,OArDH;AAsDD,KAvZkB;;AAAA,6EAyZM,YAAM;AAC7B,YAAKlD,QAAL,CAAc;AACZE,QAAAA,IAAI,EAAE;AADM,OAAd;AAGD,KA7ZkB;;AAAA,wEA+ZC,YAAM;AACxB,YAAKF,QAAL,CAAc;AACZE,QAAAA,IAAI,EAAE;AADM,OAAd;AAGD,KAnakB;;AAAA,kEAqaL,UAACkG,GAAD,EAAS;AACrBtC,MAAAA,OAAO,CAACZ,KAAR,CAAckD,GAAd;AACD,KAvakB;;AAAA,iEAyaN,UAAChG,IAAD,EAAU;AACrB,UAAIA,IAAJ,EAAU;AACR,YAAM4B,OAAO,GAAG5B,IAAI,CAACiG,KAAL,CAAW,GAAX,EAAgB,CAAhB,EAAmBA,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAAhB;AACA,YAAMvE,MAAM,GAAG1B,IAAI,CAACiG,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAf;;AACA,cAAKrG,QAAL,CAAc;AAAA,iBAAO;AACnBgC,YAAAA,OAAO,EAAPA,OADmB;AAEnBF,YAAAA,MAAM,EAANA;AAFmB,WAAP;AAAA,SAAd;;AAIA,cAAKwE,QAAL;AACD;AACF,KAnbkB;;AAAA,kEA6bL,YAAM;AAAA,UACVnE,IADU,GACD,MAAKpC,KADJ,CACVoC,IADU;AAGlB3E,MAAAA,OAAO,CAAC+F,MAAR,CAAeC,KAAf,CAAqBrB,IAArB;AACD,KAjckB;;AAAA,sBAMbpC,KANa,CAIfK,IAJe;AAAA,QAIP0B,OAJO,eAIPA,MAJO;AAAA,QAICyE,SAJD,eAICA,SAJD;AAAA,QAIYpG,SAJZ,eAIYA,QAJZ;AAAA,QAKfP,KALe,GAMbG,KANa,CAKfH,KALe,EAQjB;;AACA,QAAMS,gBAAe,GAAG9C,SAAS,CAACiJ,aAAV,CAAwBvF,WAAhD;AACA,QAAMwF,YAAY,GAAG7G,KAAK,CAAC8G,MAAN,CAAa,UAACC,IAAD;AAAA,aAAUA,IAAI,CAACxG,QAAL,KAAkBA,SAA5B;AAAA,KAAb,EAAmD,CAAnD,CAArB;AAEA,QAAIM,aAAY,GAAG,KAAnB;AAEA,QAAII,IAAG,GAAGjC,SAAS,CAAC,kBAAD,CAAnB;;AAEA,QAAIjB,MAAM,IAAIA,MAAM,CAACiJ,IAAjB,IAAyBjJ,MAAM,CAACiJ,IAAP,CAAYxB,GAArC,IAA4CzH,MAAM,CAACiJ,IAAP,CAAYxB,GAAZ,CAAgBnB,GAAhE,EAAqE;AACnExD,MAAAA,aAAY,GAAG9C,MAAM,CAACiJ,IAAP,CAAYxB,GAAZ,CAAgBnB,GAA/B;;AACA,UAAIxD,aAAJ,EAAkB;AAChB;AACA;AACAI,QAAAA,IAAG,GAAG,IAAI9C,SAAJ,CAAc8C,IAAd,EAAmBC,IAAnB,CAAwBL,aAAY,CAACI,GAArC,EAA0CE,QAA1C,EAAN;AACD;AACF;;AAED,UAAKT,KAAL,GAAa;AACXG,MAAAA,YAAY,EAAZA,aADW;AAEXP,MAAAA,IAAI,EAAE,UAFK;AAGX+C,MAAAA,SAAS,EAAE,KAHA;AAIXjB,MAAAA,OAAO,EAAEuE,SAAS,GAAGA,SAAH,GAAe,EAJtB;AAKXzE,MAAAA,MAAM,EAAEA,OAAM,GAAGA,OAAH,GAAY,EALf;AAMX2B,MAAAA,IAAI,EAAE,EANK;AAOX+B,MAAAA,KAAK,EAAE,EAPI;AAQXrE,MAAAA,OAAO,EAAEsF,YAAY,CAACtF,OAAb,IAAwB,CARtB;AASXK,MAAAA,UAAU,EAAE,IATD;AAUXyD,MAAAA,UAAU,EAAE,KAVD;AAWX5E,MAAAA,eAAe,EAAfA,gBAXW;AAYXwG,MAAAA,OAAO,EAAE,CAZE;AAaX3D,MAAAA,KAAK,EAAE,KAbI;AAcX4D,MAAAA,YAAY,EAAE,KAdH;AAeXtC,MAAAA,KAAK,EAAE,EAfI;AAgBXkB,MAAAA,QAAQ,EAAE,EAhBC;AAiBXrB,MAAAA,cAAc,EAAE,KAjBL;AAkBX0C,MAAAA,cAAc,EAAE,CAlBL;AAmBXC,MAAAA,mBAAmB,EAAE,KAnBV;AAoBXnG,MAAAA,GAAG,EAAHA;AApBW,KAAb;AAzBiB;AA+ClB;;;;WAED,gCAAuB;AACrBoG,MAAAA,aAAa,CAAC,KAAK3G,KAAL,CAAW0G,mBAAZ,CAAb;AACD;;;WASD,6BAAoB;AAAA,UACVrF,cADU,GACS,KAAKrB,KADd,CACVqB,cADU;AAAA,UAGRxB,QAHQ,GAId,KAAKJ,KAJS,CAGhBK,IAHgB,CAGRD,QAHQ;AAMlB,WAAKsC,iBAAL,CAAuBtC,QAAvB;AAEA,WAAKyB,SAAL,GAAiB,EAAjB;AACA,WAAKsF,cAAL;AACA,WAAKC,gBAAL,GAVkB,CAWlB;AACD;;;WA+OD,wBAAe,CAAE;;;WA8HjB,4BAAmB;AAAA,UACTnF,OADS,GACG,KAAK1B,KADR,CACT0B,OADS;;AAGjB,UAAI,CAACrD,SAAS,CAACyI,aAAV,CAAwBC,GAAxB,CAA4BrF,OAA5B,CAAL,EAA2C;AACzC,eAAOxE,OAAO,CAACyG,GAAR,CAAYqD,gBAAZ,CAA6BtF,OAA7B,CAAP;AACD,OAFD,MAEO,OAAO,IAAP;AACR;;;WAQD,kBAAS;AAAA,yBAmBH,KAAK1B,KAnBF;AAAA,UAEL0B,OAFK,gBAELA,OAFK;AAAA,UAGLF,MAHK,gBAGLA,MAHK;AAAA,UAIL2B,IAJK,gBAILA,IAJK;AAAA,UAKLtC,OALK,gBAKLA,OALK;AAAA,UAML8B,SANK,gBAMLA,SANK;AAAA,UAOLuC,KAPK,gBAOLA,KAPK;AAAA,UAQLhE,UARK,gBAQLA,UARK;AAAA,UASLG,cATK,gBASLA,cATK;AAAA,UAULtB,eAVK,gBAULA,eAVK;AAAA,UAWL6C,KAXK,gBAWLA,KAXK;AAAA,UAYLwC,QAZK,gBAYLA,QAZK;AAAA,UAaLD,WAbK,gBAaLA,WAbK;AAAA,UAcLvF,IAdK,gBAcLA,IAdK;AAAA,UAeLsE,KAfK,gBAeLA,KAfK;AAAA,UAgBLuC,cAhBK,gBAgBLA,cAhBK;AAAA,UAiBLjC,aAjBK,gBAiBLA,aAjBK;AAAA,UAkBLrE,YAlBK,gBAkBLA,YAlBK;AAAA,yBA4BH,KAAKV,KA5BF;AAAA,UAsBLoC,IAtBK,gBAsBLA,IAtBK;AAAA,2CAuBL/B,IAvBK;AAAA,UAuBGD,QAvBH,qBAuBGA,QAvBH;AAAA,UAuBa8B,OAvBb,qBAuBaA,OAvBb;AAAA,UAwBLsF,UAxBK,gBAwBLA,UAxBK;AAAA,UAyBL3H,KAzBK,gBAyBLA,KAzBK;AAAA,UA0BL4H,IA1BK,gBA0BLA,IA1BK;AAAA,UA2BLC,QA3BK,gBA2BLA,QA3BK;AAAA,yBA8BwB,KAAKnH,KA9B7B;AAAA,UA8BDO,GA9BC,gBA8BDA,GA9BC;AAAA,UA8BS6G,UA9BT,gBA8BI7G,GA9BJ;;AAgCP,UAAIJ,YAAJ,EAAkB;AAChB,YAAIqB,MAAJ,EAAY;AACV,cAAIqD,aAAa,GAAG,IAAIpH,SAAJ,CAAc0C,YAAY,CAAC2E,GAA3B,EAAgCC,SAAhC,CAA0C,GAA1C,EAA+CC,YAA/C,CAA4DxD,MAA5D,CAApB;AACA,cAAI,IAAI/D,SAAJ,CAAc0C,YAAY,CAACI,GAA3B,EAAgC8G,aAAhC,CAA8CxC,aAA9C,CAAJ,EACEA,aAAa,GAAG,IAAIpH,SAAJ,CAAc0C,YAAY,CAACI,GAA3B,CAAhB;AAEFA,UAAAA,GAAG,GAAG,IAAI9C,SAAJ,CAAc8C,GAAd,EAAmBC,IAAnB,CAAwBqE,aAAxB,EAAuCpE,QAAvC,EAAN,CALU,CAK8C;AACzD;AACF;;AAED,UAAM6G,MAAM,GAAGnK,IAAI,CAACoK,GAAL,CAAS,IAAT,EAAe,SAAf,EAA0B,QAA1B,EAAoC,MAApC,EAA4C,OAA5C,EAAqD,UAArD,CAAf;AAEA,UAAMC,YAAY,GAAG3H,QAAQ,CAAC4H,WAAT,EAArB;AAEA,UAAMC,UAAU,GACd,CAAChG,OAAD,IACA,CAACF,MADD,IAEAmB,SAFA,IAGAuB,KAHA,IAIA,CAAC,KAAK8C,gBAAL,EAJD,IAKA,IAAIvJ,SAAJ,CAAc+D,MAAd,EAAsB6F,aAAtB,CAAoCxG,OAApC,CALA,IAMA,IAAIpD,SAAJ,CAAc+D,MAAd,EAAsBmG,EAAtB,KAA6B5H,eAP/B;AASA,UAAM6H,cAAc,GAAG/G,OAAO,IAAI,KAAlC;AACA,UAAM0F,OAAO,GAAG/E,MAAM,GAAGH,cAAzB;;AAEA,UAAI,IAAI5D,SAAJ,CAAc+D,MAAd,EAAsB6F,aAAtB,CAAoC,CAApC,CAAJ,EAA4C;AAC1CC,QAAAA,MAAM,CAAC9F,MAAP,CAAcqG,KAAd,CACE,UAACC,KAAD;AAAA,iBAAW,IAAIrK,SAAJ,CAAcqK,KAAd,EAAqBC,mBAArB,CAAyClH,OAAzC,CAAX;AAAA,SADF,eAEE;AAAK,UAAA,KAAK,EAAE;AAAEmH,YAAAA,KAAK,EAAE,OAAT;AAAkBC,YAAAA,QAAQ,EAAE;AAA5B;AAAZ,wBACE,oBAAC,gBAAD;AACE,UAAA,EAAE,EAAC,aADL;AAEE,UAAA,cAAc,EAAC,8CAFjB;AAGE,UAAA,MAAM,EAAE;AACN1H,YAAAA,GAAG,EAAHA,GADM;AAENV,YAAAA,QAAQ,YAAKA,QAAL;AAFF;AAHV,UADF,CAFF;AAaD;;AAED,UAAI,KAAKG,KAAL,CAAWwB,MAAX,GAAoB,CAAxB,EAA2B;AACzB,aAAK9B,QAAL,CAAc;AACZ8B,UAAAA,MAAM,EAAE,EADI;AAEZ0D,UAAAA,KAAK,EAAE;AAFK,SAAd;AAID;;AAED,UAAMgD,MAAM,GAAGjK,cAAc,CAAC;AAC5BkK,QAAAA,aAAa,EAAE;AACbjG,UAAAA,EAAE,EAAE,kBADS;AAEbkG,UAAAA,cAAc;AAFD,SADa;AAK5BC,QAAAA,gBAAgB,EAAE;AAChBnG,UAAAA,EAAE,EAAE,0BADY;AAEhBkG,UAAAA,cAAc,EAAE;AAFA,SALU;AAS5BE,QAAAA,cAAc,EAAE;AACdpG,UAAAA,EAAE,EAAE,4BADU;AAEdkG,UAAAA,cAAc,EAAE;AAFF,SATY;AAa5BG,QAAAA,mBAAmB,EAAE;AACnBrG,UAAAA,EAAE,EAAE,yBADe;AAEnBkG,UAAAA,cAAc;AAFK;AAbO,OAAD,CAA7B;AAmBA,UAAMI,UAAU,gBACd,oBAAC,QAAD,QACGrD,WAAW,iBACV,oBAAC,QAAD;AACE,QAAA,QAAQ,EAAE,KAAKa,QADjB;AAEE,QAAA,WAAW,EAAE,KAAKyC,WAFpB;AAGE,QAAA,UAAU,EAAE,KAAKC;AAHnB,QAFJ,EAQG/G,OAAO,iBAAI,oBAAC,gBAAD;AAAkB,QAAA,WAAW,EAAEA;AAA/B,QARd,EASG/B,IAAI,KAAK,cAAT,iBACC,oBAAC,QAAD,qBACE;AAAG,QAAA,SAAS,EAAC;AAAb,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,iCADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CADF,eAOE;AAAK,QAAA,SAAS,EAAC,WAAf;AAA2B,QAAA,SAAS,EAAC;AAArC,sBACE,oBAAC,UAAD,qBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,uBADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CADF,eAOE,oBAAC,KAAD;AACE,QAAA,SAAS,EAAC,OADZ;AAEE,QAAA,SAAS,EAAE0H,MAAM,CAAClC,QAFpB;AAGE,QAAA,SAAS,EAAE,IAHb;AAIE,QAAA,WAAW,YAAK8B,IAAI,CAACyB,aAAL,CAAmBT,MAAM,CAACK,mBAA1B,CAAL;AAJb,QAPF,CAPF,EAqBG3F,KAAK,iBAAI;AAAK,QAAA,SAAS,EAAC;AAAf,SAA2BA,KAA3B,CArBZ,eAsBE,oBAAC,MAAD;AACE,QAAA,SAAS,EAAC,YADZ;AAEE,QAAA,GAAG,MAFL;AAGE,QAAA,IAAI,MAHN;AAIE,QAAA,SAAS,MAJX;AAKE,QAAA,QAAQ,EAAED,SALZ;AAME,QAAA,OAAO,EAAE,KAAKiG;AANhB,SAQGjG,SAAS,gBACR,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,oBAArB;AAA0C,QAAA,cAAc,EAAC;AAAzD,QADQ,gBAGR,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,+BADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QAXJ,CAtBF,eAuCE,+BAvCF,eAwCE;AAAG,QAAA,SAAS,EAAC;AAAb,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,wBADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CAxCF,eA8CE,oBAAC,MAAD;AAAQ,QAAA,SAAS,EAAC,qBAAlB;AAAwC,QAAA,IAAI,MAA5C;AAA6C,QAAA,OAAO,EAAE,KAAKkG;AAA3D,sBACE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,oBAArB;AAA0C,QAAA,cAAc,EAAC;AAAzD,QADF,CA9CF,CAVJ,EA6DGjJ,IAAI,KAAK,UAAT,iBACC,oBAAC,QAAD,qBACE;AAAG,QAAA,SAAS,EAAC;AAAb,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,aADL;AAEE,QAAA,cAAc,EAAC,qGAFjB;AAGE,QAAA,MAAM,EAAE;AAAEtB,UAAAA,SAAS,YAAKiC,GAAL,CAAX;AAAuBuI,UAAAA,EAAE,eAAE,+BAA3B;AAAmChJ,UAAAA,IAAI,YAAK0H,YAAL;AAAvC;AAHV,QADF,CADF,eAQE;AAAK,QAAA,SAAS,EAAC,WAAf;AAA2B,QAAA,KAAK,EAAE;AAAEuB,UAAAA,YAAY,EAAE;AAAhB;AAAlC,sBACE,oBAAC,UAAD;AAAY,QAAA,KAAK;AAAjB,sBACE;AAAM,QAAA,KAAK,EAAE;AAAEd,UAAAA,QAAQ,EAAE;AAAZ;AAAb,sBACE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,cAArB;AAAoC,QAAA,cAAc,EAAC;AAAnD,QADF,CADF,EAGU,GAHV,eAIE,oBAAC,OAAD;AAAS,QAAA,EAAE,EAAC;AAAZ,sBACE;AAAK,QAAA,KAAK,EAAE;AAAEe,UAAAA,SAAS,EAAE;AAAb;AAAZ,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,QADL;AAEE,QAAA,cAAc,EAAC,0EAFjB;AAGE,QAAA,MAAM,EAAE;AAAEF,UAAAA,EAAE,eAAE,+BAAN;AAAcjJ,UAAAA,QAAQ,YAAKA,QAAQ,CAAC4H,WAAT,EAAL;AAAtB;AAHV,QADF,CADF,CAJF,CADF,eAeE,oBAAC,KAAD;AACE,QAAA,SAAS,EAAEH,MAAM,CAAC5F,OADpB;AAEE,QAAA,WAAW,MAFb;AAGE,QAAA,OAAO,EAAC,YAHV;AAIE,QAAA,WAAW,kBAAW7B,QAAQ,CAAC4H,WAAT,EAAX,yBAJb;AAKE,QAAA,EAAE,MALJ;AAME,QAAA,UAAU,MANZ;AAOE,QAAA,QAAQ,EAAE,KAAKzB;AAPjB,QAfF,EAwBGtE,OAAO,IAAI,CAAC,KAAKsF,gBAAL,EAAZ,iBACC;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,yBADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CAzBJ,CARF,eAyCE;AAAK,QAAA,SAAS,qBAAcrI,MAAM,GAAG,MAAH,GAAY,EAAhC,CAAd;AAAoD,QAAA,KAAK,EAAE;AAAEoK,UAAAA,YAAY,EAAE;AAAhB;AAA3D,sBACE;AAAG,QAAA,SAAS,EAAC;AAAb,SACGlI,OADH,aADF,eAIE,oBAAC,UAAD,qBACE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,aAArB;AAAmC,QAAA,cAAc,EAAC;AAAlD,QADF,CAJF,eAQE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,KAAD;AACE,QAAA,SAAS,EAAC,OADZ;AAEE,QAAA,SAAS,EAAEyG,MAAM,CAAC9F,MAFpB;AAGE,QAAA,OAAO,EAAC,QAHV;AAIE,QAAA,WAAW,EAAC,kBAJd;AAKE,QAAA,IAAI,EAAE+E,OAAO,CAAC0C,OAAR,CAAgB,CAAhB,CALR;AAME,QAAA,SAAS,EAAE1K;AANb,QADF,eASE;AAAK,QAAA,KAAK,EAAE;AAAE2K,UAAAA,UAAU,EAAE;AAAd;AAAZ,sBACE,oBAAC,MAAD;AAAQ,QAAA,IAAI,MAAZ;AAAa,QAAA,GAAG,MAAhB;AAAiB,QAAA,OAAO,EAAE,KAAKC,cAA/B;AAA+C,wBAA/C;AAAwD,oBAAS;AAAjE,sBACE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,WAArB;AAAiC,QAAA,cAAc,EAAC;AAAhD,QADF,CADF,CATF,EAcG,CAAChL,QAAD,iBACC,oBAAC,YAAD;AAAc,QAAA,EAAE,EAAC,aAAjB;AAA+B,QAAA,IAAI,EAAC,OAApC;AAA4C,QAAA,MAAM,EAAC,OAAnD;AAA2D,QAAA,SAAS,EAAC;AAArE,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,kBADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CAfJ,EAsBG,CAACmJ,MAAM,CAAC9F,MAAP,CAAcoB,KAAf,iBACC;AAAK,QAAA,SAAS,EAAEsC,KAAK,GAAG,SAAH,GAAe;AAApC,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,kBADL;AAEE,QAAA,cAAc,EAAC,0BAFjB;AAGE,QAAA,MAAM,EAAE;AAAE5G,UAAAA,SAAS,YAAK8I,UAAL;AAAX;AAHV,QADF,CAvBJ,CARF,CAzCF,eAkFE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,MAAD;AAAQ,QAAA,IAAI,MAAZ;AAAa,QAAA,GAAG,MAAhB;AAAiB,QAAA,IAAI,MAArB;AAAsB,QAAA,QAAQ,EAAEM,UAAhC;AAA4C,QAAA,OAAO,EAAE,KAAK0B;AAA1D,SACGzG,SAAS,gBACR,oBAAC,QAAD,qBACE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,oBAArB;AAA0C,QAAA,cAAc,EAAC;AAAzD,QADF,CADQ,gBAKR,oBAAC,QAAD,qBACE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,kBAArB;AAAwC,QAAA,cAAc,EAAC;AAAvD,QADF,CANJ,CADF,CADF,eAcE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,MAAD;AAAQ,QAAA,GAAG,MAAX;AAAY,QAAA,IAAI,MAAhB;AAAiB,QAAA,IAAI,MAArB;AAAsB,QAAA,OAAO,EAAE,KAAK0G;AAApC,sBACE,oBAAC,QAAD,qBACE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,wBAArB;AAA8C,QAAA,cAAc,EAAC;AAA7D,QADF,CADF,CADF,CAdF,CAlFF,EAwGGzG,KAAK,iBACJ;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,wBADL;AAEE,QAAA,cAAc,EAAC,2CAFjB;AAGE,QAAA,MAAM,EAAE;AACN0G,UAAAA,SAAS,EAAEpC,IAAI,CAACyB,aAAL,CAAmB/F,KAAK,CAACf,IAAzB,CADL;AAEN0H,UAAAA,YAAY,EAAErC,IAAI,CAACyB,aAAL,CAAmB/F,KAAK,CAACiD,OAAzB,CAFR;AAGNiD,UAAAA,EAAE,eAAE,+BAHE;AAINjJ,UAAAA,QAAQ,YAAKA,QAAL;AAJF;AAHV,QADF,CAzGJ,EAsHG8B,OAAO,iBACN,oBAAC,QAAD,qBACE,+BADF,eAEE;AACE,QAAA,SAAS,qBAAchD,MAAM,GAAG,MAAH,GAAY,EAAhC,CADX;AAEE,QAAA,KAAK,EAAE;AAAEoK,UAAAA,YAAY,EAAE;AAAhB;AAFT,sBAIE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,UAAD;AAAY,QAAA,KAAK;AAAjB,sBACE;AAAM,QAAA,SAAS,EAAC;AAAhB,sBACE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,eAArB;AAAqC,QAAA,cAAc,EAAC;AAApD,QADF,CADF,CADF,CADF,CAJF,eAaE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,KAAD;AACE,QAAA,SAAS,EAAC,OADZ;AAEE,QAAA,SAAS,EAAEzB,MAAM,CAACpD,KAFpB;AAGE,QAAA,WAAW,YAAKgD,IAAI,CAACyB,aAAL,CAAmBT,MAAM,CAACG,gBAA1B,CAAL;AAHb,QADF,CAbF,CAFF,eAuBE,oBAAC,MAAD;AACE,QAAA,SAAS,EAAC,YADZ;AAEE,QAAA,GAAG,MAFL;AAGE,QAAA,IAAI,MAHN;AAIE,QAAA,SAAS,MAJX;AAKE,QAAA,QAAQ,EAAE,CAACnE,KAAD,IAAUvB,SALtB;AAME,QAAA,OAAO,EAAE,KAAKyG;AANhB,SAQGzG,SAAS,gBACR,oBAAC,QAAD,qBACE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,oBAArB;AAA0C,QAAA,cAAc,EAAC;AAAzD,QADF,CADQ,gBAKR,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,4BADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QAbJ,CAvBF,CAvHJ,CA9DJ,EAoOG/C,IAAI,KAAK,SAAT,iBACC,oBAAC,QAAD,qBACE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,UAAD,qBACE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,cAArB;AAAoC,QAAA,cAAc,EAAC;AAAnD,QADF,CADF,eAIE,oBAAC,KAAD;AACE,QAAA,SAAS,EAAC,OADZ;AAEE,QAAA,SAAS,EAAE0H,MAAM,CAACnE,IAFpB;AAGE,QAAA,OAAO,EAAC,KAHV;AAIE,QAAA,WAAW,YAAK+D,IAAI,CAACyB,aAAL,CAAmBT,MAAM,CAACI,cAA1B,CAAL;AAJb,QAJF,CADF,EAYG9D,aAAa,KAAK,SAAlB,iBACC;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,wBADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CAbJ,EAoBGA,aAAa,KAAK,QAAlB,iBACC;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,uBAArB;AAA6C,QAAA,cAAc,EAAC;AAA5D,QADF,CArBJ,EAyBGA,aAAa,KAAK,SAAlB,iBACC;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,2BADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CA1BJ,EAiCG8C,MAAM,CAACnE,IAAP,CAAYP,KAAZ,iBACC;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,mBADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CAlCJ,eAyCE,oBAAC,MAAD;AACE,QAAA,SAAS,EAAC,2BADZ;AAEE,QAAA,SAAS,MAFX;AAGE,QAAA,QAAQ,EAAED,SAAS,IAAI6B,aAAa,KAAK,SAA/B,IAA4CA,aAAa,KAAK,SAH1E;AAIE,QAAA,GAAG,MAJL;AAKE,QAAA,IAAI,MALN;AAME,QAAA,OAAO,EAAE,KAAKgF;AANhB,sBAQE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,cAArB;AAAoC,QAAA,cAAc,EAAC;AAAnD,QARF,CAzCF,eAmDE;AAAI,QAAA,SAAS,EAAC;AAAd,QAnDF,eAoDE;AAAG,QAAA,SAAS,EAAC;AAAb,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,0BADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CApDF,eA0DE,oBAAC,MAAD;AAAQ,QAAA,SAAS,EAAC,qBAAlB;AAAwC,QAAA,IAAI,MAA5C;AAA6C,QAAA,OAAO,EAAE,KAAKC;AAA3D,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,yBADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CA1DF,CArOJ,CADF;AA2SA,aAAOtC,QAAQ,GACbqB,UADa,gBAGb,oBAAC,KAAD;AACE,QAAA,IAAI,EAAE3G,IADR;AAEE,QAAA,KAAK,YAAKqF,IAAI,CAACyB,aAAL,CAAmBT,MAAM,CAACC,aAA1B,CAAL,EAAgD,GAAhD,SAAsDtI,QAAQ,CAAC4H,WAAT,EAAtD;AAFP,SAIGe,UAJH,CAHF;AAUD;;;;EAt2BgD3L,KAAK,CAAC6M,S,yCAGpC;AACjB7H,EAAAA,IAAI,EAAE9E,SAAS,CAAC4M,MADC;AAEjB7J,EAAAA,IAAI,EAAE/C,SAAS,CAAC6M;AAFC,C;SAHA9K,qB","sourcesContent":["// @ts-nocheck\r\nimport React, { Fragment } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport helpers, { constants } from 'helpers'\r\nimport actions from 'redux/actions'\r\nimport Link from 'local_modules/sw-valuelink'\r\nimport { connect } from 'redaction'\r\nimport config from 'app-config'\r\n\r\nimport cssModules from 'react-css-modules'\r\nimport styles from '../WithdrawModal/WithdrawModal.scss'\r\nimport ownStyle from './WithdrawModalMultisig.scss'\r\n\r\nimport { BigNumber } from 'bignumber.js'\r\nimport Modal from 'components/modal/Modal/Modal'\r\nimport FieldLabel from 'components/forms/FieldLabel/FieldLabel'\r\nimport Input from 'components/forms/Input/Input'\r\nimport Button from 'components/controls/Button/Button'\r\nimport Tooltip from 'components/ui/Tooltip/Tooltip'\r\nimport { FormattedMessage, injectIntl, defineMessages } from 'react-intl'\r\nimport ReactTooltip from 'react-tooltip'\r\nimport { isMobile } from 'react-device-detect'\r\nimport InvoiceInfoBlock from 'components/InvoiceInfoBlock/InvoiceInfoBlock'\r\n\r\nimport typeforce from 'swap.app/util/typeforce'\r\n// import { isCoinAddress } from 'swap.app/util/typeforce'\r\nimport minAmount from 'helpers/constants/minAmount'\r\nimport { inputReplaceCommaWithDot } from 'helpers/domUtils'\r\nimport QrReader from 'components/QrReader'\r\n\r\nimport redirectTo from 'helpers/redirectTo'\r\nimport AdminFeeInfoBlock from 'components/AdminFeeInfoBlock/AdminFeeInfoBlock'\r\nimport lsDataCache from 'helpers/lsDataCache'\r\n\r\nconst isDark = localStorage.getItem(constants.localStorage.isDark)\r\n\r\n@injectIntl\r\n@connect(\r\n  ({\r\n    currencies,\r\n    user: { btcData, activeFiat, btcMultisigSMSData },\r\n    ui: { dashboardModalsAllowed },\r\n  }) => ({\r\n    activeFiat,\r\n    currencies: currencies.items,\r\n    items: [btcData, btcMultisigSMSData],\r\n    dashboardView: dashboardModalsAllowed,\r\n  })\r\n)\r\n@cssModules({ ...styles, ...ownStyle }, { allowMultiple: true })\r\nexport default class WithdrawModalMultisig extends React.Component<any, any> {\r\n  props: any\r\n\r\n  static propTypes = {\r\n    name: PropTypes.string,\r\n    data: PropTypes.object,\r\n  }\r\n\r\n  fiatRates: any\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    const {\r\n      data: { amount, toAddress, currency },\r\n      items,\r\n    } = props\r\n\r\n    //@\r\n    const currentDecimals = constants.tokenDecimals.btcmultisig\r\n    const selectedItem = items.filter((item) => item.currency === currency)[0]\r\n\r\n    let usedAdminFee = false\r\n\r\n    let min = minAmount['btc_multisig_2fa']\r\n\r\n    if (config && config.opts && config.opts.fee && config.opts.fee.btc) {\r\n      usedAdminFee = config.opts.fee.btc\r\n      if (usedAdminFee) {\r\n        // miner fee + minimal admin fee\r\n        //@\r\n        min = new BigNumber(min).plus(usedAdminFee.min).toNumber()\r\n      }\r\n    }\r\n\r\n    this.state = {\r\n      usedAdminFee,\r\n      step: 'fillform',\r\n      isShipped: false,\r\n      address: toAddress ? toAddress : '',\r\n      amount: amount ? amount : '',\r\n      code: '',\r\n      minus: '',\r\n      balance: selectedItem.balance || 0,\r\n      ethBalance: null,\r\n      isEthToken: false,\r\n      currentDecimals,\r\n      getFiat: 0,\r\n      error: false,\r\n      smsConfirmed: false,\r\n      ownTx: '',\r\n      mnemonic: '',\r\n      broadcastError: false,\r\n      sendSmsTimeout: 0,\r\n      sendSmsTimeoutTimer: false,\r\n      min,\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.state.sendSmsTimeoutTimer)\r\n  }\r\n\r\n  gotoSms = () => {\r\n    this.setState({\r\n      smsStatus: 'sended',\r\n      step: 'confirm',\r\n    })\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { exCurrencyRate } = this.state\r\n    const {\r\n      data: { currency },\r\n    } = this.props\r\n\r\n    this.setBalanceOnState(currency)\r\n\r\n    this.fiatRates = {}\r\n    this.getFiatBalance()\r\n    this.actualyMinAmount()\r\n    //this.gotoSms()\r\n  }\r\n\r\n  getMinAmountForEthToken = () => {\r\n    const {\r\n      data: { currency },\r\n    } = this.props\r\n    const { currentDecimals } = this.state\r\n\r\n    let ethTokenMinAmount = '0.'\r\n\r\n    for (let a = 0; a < currentDecimals - 1; a++) {\r\n      ethTokenMinAmount += '0'\r\n    }\r\n\r\n    return (ethTokenMinAmount += '1')\r\n  }\r\n\r\n  actualyMinAmount = async () => {\r\n    const { usedAdminFee } = this.state\r\n\r\n    let min: any = await helpers['btc'].estimateFeeValue({ method: 'send_2fa', speed: 'fast' })\r\n    minAmount['btc_multisig_2fa'] = min\r\n\r\n    if (usedAdminFee) {\r\n      min = new BigNumber(min).plus(usedAdminFee.min).toNumber()\r\n    }\r\n\r\n    this.setState({\r\n      min,\r\n    })\r\n  }\r\n\r\n  setBalanceOnState = async (currency) => {\r\n    const {\r\n      data: { unconfirmedBalance },\r\n    } = this.props\r\n\r\n    const balance: any = await actions.btcmultisig.getBalance()\r\n\r\n    const finalBalance =\r\n      unconfirmedBalance !== undefined && unconfirmedBalance < 0\r\n        ? new BigNumber(balance).plus(unconfirmedBalance).toString()\r\n        : balance\r\n    const ethBalance = await actions.eth.getBalance()\r\n\r\n    this.setState(() => ({\r\n      balance: finalBalance,\r\n      ethBalance,\r\n    }))\r\n  }\r\n\r\n  getFiatBalance = async () => {\r\n    const {\r\n      data: { currency },\r\n      activeFiat,\r\n    } = this.props\r\n\r\n    const exCurrencyRate = await actions.user.getExchangeRate(currency, activeFiat.toLowerCase())\r\n    this.fiatRates[currency] = exCurrencyRate\r\n\r\n    this.setState(() => ({\r\n      exCurrencyRate,\r\n    }))\r\n  }\r\n\r\n  onFinishWithdraw = async (txId) => {\r\n    const { amount, address: to } = this.state\r\n\r\n    const {\r\n      data: { currency, address, balance, invoice, onReady },\r\n      name,\r\n    } = this.props\r\n\r\n    actions.loader.hide()\r\n\r\n    if (invoice) {\r\n      await actions.invoices.markInvoice(invoice.id, 'ready', txId, address)\r\n    }\r\n    this.setBalanceOnState(currency)\r\n\r\n    /*\r\n    actions.modals.open(constants.modals.InfoPay, {\r\n      amount,\r\n      currency,\r\n      balance,\r\n      oldBalance: 0, // @Todo  old balance\r\n      txId,\r\n      toAddress: to\r\n    })\r\n    */\r\n\r\n    //    \r\n    const txInfoCache = {\r\n      amount,\r\n      senderAddress: address,\r\n      receiverAddress: to,\r\n      confirmed: false,\r\n    }\r\n\r\n    lsDataCache.push({\r\n      key: `TxInfo_btc_${txId}`,\r\n      time: 3600,\r\n      data: txInfoCache,\r\n    })\r\n\r\n    this.setState({\r\n      isShipped: false,\r\n      error: false,\r\n    })\r\n\r\n    if (onReady instanceof Function) {\r\n      onReady()\r\n    }\r\n\r\n    const txInfoUrl = helpers.transactions.getTxRouter('btc', txId)\r\n    redirectTo(txInfoUrl)\r\n\r\n    actions.modals.close(name)\r\n  }\r\n\r\n  handleConfirmSMS = async () => {\r\n    const { code } = this.state\r\n    const { address: to, amount } = this.state\r\n    const {\r\n      data: { currency, address, balance, invoice, onReady },\r\n      name,\r\n    } = this.props\r\n\r\n    const result = await actions.btcmultisig.confirmSMSProtected(code)\r\n    if (result && result.txID) {\r\n      this.onFinishWithdraw(result.txID)\r\n    } else {\r\n      console.log(result)\r\n      if (result && result.error && result.error == 'Fail broadcast' && result.rawTX) {\r\n        actions.btc.broadcastTx(result.rawTX).then(async ({ txid }) => {\r\n          if (txid) {\r\n            this.onFinishWithdraw(txid)\r\n          } else {\r\n            this.setState({\r\n              broadcastError: true,\r\n              rawTx: result.rawTX,\r\n              isShipped: false,\r\n              error: (\r\n                <FormattedMessage\r\n                  id=\"WithdrawSMS_BroadcastError\"\r\n                  defaultMessage=\"      ({errorText})\"\r\n                  values={{ errorText: `unknown` }}\r\n                />\r\n              ),\r\n            })\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  handleSubmit = async () => {\r\n    const { address: to, amount, ownTx, rawTx } = this.state\r\n\r\n    const {\r\n      data: { currency, address, balance, invoice, onReady },\r\n      name,\r\n    } = this.props\r\n\r\n    this.setState(() => ({\r\n      isShipped: true,\r\n      step: 'confirm',\r\n    }))\r\n\r\n    this.setBalanceOnState(currency)\r\n\r\n    if (invoice && ownTx) {\r\n      await actions.invoices.markInvoice(invoice.id, 'ready', ownTx, address)\r\n      actions.loader.hide()\r\n      actions.notifications.show(constants.notifications.SuccessWithdraw, {\r\n        amount,\r\n        currency,\r\n        address: to,\r\n      })\r\n      this.setState(() => ({ isShipped: false, error: false }))\r\n      actions.modals.close(name)\r\n      if (onReady instanceof Function) {\r\n        onReady()\r\n      }\r\n      return\r\n    }\r\n\r\n    let sendOptions = {\r\n      to,\r\n      amount,\r\n      speed: 'fast',\r\n      from: address,\r\n    }\r\n\r\n    this.setState({\r\n      sendSmsStatus: 'sending',\r\n    })\r\n    //@\r\n    const result = await actions.btcmultisig.sendSMSProtected(sendOptions)\r\n\r\n    console.log('sendSMSProtected result', result)\r\n    if (result && result.answer === 'ok') {\r\n      this.setState({\r\n        isShipped: false,\r\n        rawTx: result.rawTx ? result.rawTx : rawTx,\r\n        sendSmsStatus: 'sended',\r\n      })\r\n    } else {\r\n      this.setState({\r\n        isShipped: false,\r\n        sendSmsStatus: 'offline',\r\n        rawTx: result.rawTx ? result.rawTx : rawTx,\r\n      })\r\n    }\r\n  }\r\n\r\n  sellAllBalance = async () => {\r\n    const { amount, balance, currency, isEthToken, min, usedAdminFee } = this.state\r\n\r\n    const { data } = this.props\r\n\r\n    let minFee = min\r\n\r\n    if (usedAdminFee) {\r\n      let feeFromAmount = new BigNumber(usedAdminFee.fee).dividedBy(100).multipliedBy(balance)\r\n      minFee = new BigNumber(minFee).plus(feeFromAmount).toNumber()\r\n    }\r\n\r\n    const balanceMiner = balance\r\n      ? balance !== 0\r\n        ? new BigNumber(balance).minus(minFee).toString()\r\n        : balance\r\n      : 'Wait please. Loading...'\r\n\r\n    this.setState({\r\n      amount: balanceMiner,\r\n    })\r\n  }\r\n\r\n  isEthOrERC20() {}\r\n\r\n  openScan = () => {\r\n    const { openScanCam } = this.state\r\n\r\n    this.setState(() => ({\r\n      openScanCam: !openScanCam,\r\n    }))\r\n  }\r\n\r\n  handleMnemonicSign = () => {\r\n    const { mnemonic, rawTx, balance, amount, to } = this.state\r\n\r\n    if (!mnemonic || !actions.btc.validateMnemonicWords(mnemonic.trim())) {\r\n      this.setState({\r\n        error: (\r\n          <FormattedMessage\r\n            id=\"WithdrawSMS_NotValidMnemonic\"\r\n            defaultMessage=\"   \"\r\n          />\r\n        ),\r\n      })\r\n      return\r\n    }\r\n    if (!actions.btcmultisig.checkSmsMnemonic(mnemonic.trim())) {\r\n      this.setState({\r\n        error: (\r\n          <FormattedMessage\r\n            id=\"WithdrawSMS_WrongMnemonic\"\r\n            defaultMessage=\"   \"\r\n          />\r\n        ),\r\n      })\r\n      return\r\n    }\r\n\r\n    this.setState({\r\n      isShipped: true,\r\n      error: false,\r\n      broadcastError: false,\r\n    })\r\n\r\n    actions.btcmultisig\r\n      .signSmsMnemonicAndBuild(rawTx, mnemonic.trim())\r\n      .then(async (txHex) => {\r\n        console.log('signed', txHex)\r\n        this.setState({\r\n          txHex,\r\n        })\r\n        actions.btc\r\n          .broadcastTx(txHex)\r\n          .then(async ({ txid }) => {\r\n            if (txid) {\r\n              this.onFinishWithdraw(txid)\r\n            } else {\r\n              this.setState({\r\n                broadcastError: true,\r\n                isShipped: false,\r\n                error: (\r\n                  <FormattedMessage\r\n                    id=\"WithdrawSMS_BroadcastError\"\r\n                    defaultMessage=\"      ({errorText})\"\r\n                    values={{ errorText: `unknown` }}\r\n                  />\r\n                ),\r\n              })\r\n            }\r\n          })\r\n          .catch((e) => {\r\n            console.error(e)\r\n            const errorText = e.res ? e.res.text : e.message\r\n            this.setState({\r\n              broadcastError: true,\r\n              isShipped: false,\r\n              error: (\r\n                <FormattedMessage\r\n                  id=\"WithdrawSMS_BroadcastError\"\r\n                  defaultMessage=\"      ({errorText})\"\r\n                  values={{ errorText }}\r\n                />\r\n              ),\r\n            })\r\n          })\r\n      })\r\n      .catch((e) => {\r\n        console.log('fail sign tx by mnemonic')\r\n        this.setState({\r\n          isShipped: false,\r\n          error: (\r\n            <FormattedMessage\r\n              id=\"WithdrawSMS_FailSignByMnemonic\"\r\n              defaultMessage=\"   \"\r\n            />\r\n          ),\r\n        })\r\n      })\r\n  }\r\n\r\n  handleSwitchToMnemonic = () => {\r\n    this.setState({\r\n      step: 'mnemonicSign',\r\n    })\r\n  }\r\n\r\n  handleSwitchToSms = () => {\r\n    this.setState({\r\n      step: 'confirm',\r\n    })\r\n  }\r\n\r\n  handleError = (err) => {\r\n    console.error(err)\r\n  }\r\n\r\n  handleScan = (data) => {\r\n    if (data) {\r\n      const address = data.split(':')[1].split('?')[0]\r\n      const amount = data.split('=')[1]\r\n      this.setState(() => ({\r\n        address,\r\n        amount,\r\n      }))\r\n      this.openScan()\r\n    }\r\n  }\r\n\r\n  addressIsCorrect() {\r\n    const { address } = this.state\r\n\r\n    if (!typeforce.isCoinAddress.BTC(address)) {\r\n      return actions.btc.addressIsCorrect(address)\r\n    } else return true\r\n  }\r\n\r\n  handleClose = () => {\r\n    const { name } = this.props\r\n\r\n    actions.modals.close(name)\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      address,\r\n      amount,\r\n      code,\r\n      balance,\r\n      isShipped,\r\n      minus,\r\n      ethBalance,\r\n      exCurrencyRate,\r\n      currentDecimals,\r\n      error,\r\n      mnemonic,\r\n      openScanCam,\r\n      step,\r\n      ownTx,\r\n      sendSmsTimeout,\r\n      sendSmsStatus,\r\n      usedAdminFee,\r\n    } = this.state\r\n\r\n    const {\r\n      name,\r\n      data: { currency, invoice },\r\n      tokenItems,\r\n      items,\r\n      intl,\r\n      portalUI,\r\n    } = this.props\r\n\r\n    let { min, min: defaultMin } = this.state\r\n\r\n    if (usedAdminFee) {\r\n      if (amount) {\r\n        let feeFromAmount = new BigNumber(usedAdminFee.fee).dividedBy(100).multipliedBy(amount)\r\n        if (new BigNumber(usedAdminFee.min).isGreaterThan(feeFromAmount))\r\n          feeFromAmount = new BigNumber(usedAdminFee.min)\r\n\r\n        min = new BigNumber(min).plus(feeFromAmount).toNumber() // Admin fee in satoshi\r\n      }\r\n    }\r\n\r\n    const linked = Link.all(this, 'address', 'amount', 'code', 'ownTx', 'mnemonic')\r\n\r\n    const dataCurrency = currency.toUpperCase()\r\n\r\n    const isDisabled =\r\n      !address ||\r\n      !amount ||\r\n      isShipped ||\r\n      ownTx ||\r\n      !this.addressIsCorrect() ||\r\n      new BigNumber(amount).isGreaterThan(balance) ||\r\n      new BigNumber(amount).dp() > currentDecimals\r\n\r\n    const NanReplacement = balance || '...'\r\n    const getFiat = amount * exCurrencyRate\r\n\r\n    if (new BigNumber(amount).isGreaterThan(0)) {\r\n      linked.amount.check(\r\n        (value) => new BigNumber(value).isLessThanOrEqualTo(balance),\r\n        <div style={{ width: '340px', fontSize: '12px' }}>\r\n          <FormattedMessage\r\n            id=\"Withdrow170\"\r\n            defaultMessage=\"The amount must be no more than your balance\"\r\n            values={{\r\n              min,\r\n              currency: `${currency}`,\r\n            }}\r\n          />\r\n        </div>\r\n      )\r\n    }\r\n\r\n    if (this.state.amount < 0) {\r\n      this.setState({\r\n        amount: '',\r\n        minus: true,\r\n      })\r\n    }\r\n\r\n    const labels = defineMessages({\r\n      withdrowModal: {\r\n        id: 'withdrowTitle271',\r\n        defaultMessage: `Send`,\r\n      },\r\n      ownTxPlaceholder: {\r\n        id: 'withdrawOwnTxPlaceholder',\r\n        defaultMessage: '    ',\r\n      },\r\n      smsPlaceholder: {\r\n        id: 'withdrawSMSCodePlaceholder',\r\n        defaultMessage: 'Enter SMS-code',\r\n      },\r\n      mnemonicPlaceholder: {\r\n        id: 'registerSMSMPlaceHolder',\r\n        defaultMessage: `12 `,\r\n      },\r\n    })\r\n\r\n    const formRender = (\r\n      <Fragment>\r\n        {openScanCam && (\r\n          <QrReader\r\n            openScan={this.openScan}\r\n            handleError={this.handleError}\r\n            handleScan={this.handleScan}\r\n          />\r\n        )}\r\n        {invoice && <InvoiceInfoBlock invoiceData={invoice} />}\r\n        {step === 'mnemonicSign' && (\r\n          <Fragment>\r\n            <p styleName=\"notice dashboardViewNotice\">\r\n              <FormattedMessage\r\n                id=\"WithdrawSMS_MnemonicSignCaption\"\r\n                defaultMessage=\"   \"\r\n              />\r\n            </p>\r\n            <div styleName=\"highLevel\" className=\"ym-hide-content\">\r\n              <FieldLabel>\r\n                <FormattedMessage\r\n                  id=\"registerSMSModalWords\"\r\n                  defaultMessage=\"  (12 ):\"\r\n                />\r\n              </FieldLabel>\r\n              <Input\r\n                styleName=\"input\"\r\n                valueLink={linked.mnemonic}\r\n                multiline={true}\r\n                placeholder={`${intl.formatMessage(labels.mnemonicPlaceholder)}`}\r\n              />\r\n            </div>\r\n            {error && <div styleName=\"rednotes\">{error}</div>}\r\n            <Button\r\n              styleName=\"buttonFull\"\r\n              big\r\n              blue\r\n              fullWidth\r\n              disabled={isShipped}\r\n              onClick={this.handleMnemonicSign}\r\n            >\r\n              {isShipped ? (\r\n                <FormattedMessage id=\"WithdrawModal11212\" defaultMessage=\"Processing ...\" />\r\n              ) : (\r\n                <FormattedMessage\r\n                  id=\"btcSMSProtectedSignByMnemonic\"\r\n                  defaultMessage=\"  \"\r\n                />\r\n              )}\r\n            </Button>\r\n            <hr />\r\n            <p styleName=\"notice mnemonicUseNote dashboardViewNotice\">\r\n              <FormattedMessage\r\n                id=\"WithdrawSMS_UseSMSNote\"\r\n                defaultMessage=\"-    -,     \"\r\n              />\r\n            </p>\r\n            <Button styleName=\"useAuthMethodButton\" blue onClick={this.handleSwitchToSms}>\r\n              <FormattedMessage id=\"WithdrawSMS_UseSMS\" defaultMessage=\" -\" />\r\n            </Button>\r\n          </Fragment>\r\n        )}\r\n        {step === 'fillform' && (\r\n          <Fragment>\r\n            <p styleName=\"notice dashboardViewNotice\">\r\n              <FormattedMessage\r\n                id=\"Withdrow213\"\r\n                defaultMessage=\"Please note: Fee is {minAmount} {data}.{br}Your balance must exceed this sum to perform transaction\"\r\n                values={{ minAmount: `${min}`, br: <br />, data: `${dataCurrency}` }}\r\n              />\r\n            </p>\r\n            <div styleName=\"highLevel\" style={{ marginBottom: '20px' }}>\r\n              <FieldLabel inRow>\r\n                <span style={{ fontSize: '16px' }}>\r\n                  <FormattedMessage id=\"Withdrow1194\" defaultMessage=\"Address \" />\r\n                </span>{' '}\r\n                <Tooltip id=\"WtH203\">\r\n                  <div style={{ textAlign: 'center' }}>\r\n                    <FormattedMessage\r\n                      id=\"WTH275\"\r\n                      defaultMessage=\"Make sure the wallet you{br}are sending the funds to supports {currency}\"\r\n                      values={{ br: <br />, currency: `${currency.toUpperCase()}` }}\r\n                    />\r\n                  </div>\r\n                </Tooltip>\r\n              </FieldLabel>\r\n              <Input\r\n                valueLink={linked.address}\r\n                focusOnInit\r\n                pattern=\"0-9a-zA-Z:\"\r\n                placeholder={`Enter ${currency.toUpperCase()} address to transfer`}\r\n                qr\r\n                withMargin\r\n                openScan={this.openScan}\r\n              />\r\n              {address && !this.addressIsCorrect() && (\r\n                <div styleName=\"rednote\">\r\n                  <FormattedMessage\r\n                    id=\"WithdrawIncorectAddress\"\r\n                    defaultMessage=\"Your address not correct\"\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div styleName={`lowLevel ${isDark ? 'dark' : ''}`} style={{ marginBottom: '50px' }}>\r\n              <p styleName=\"balance\">\r\n                {balance} {`BTC`}\r\n              </p>\r\n              <FieldLabel>\r\n                <FormattedMessage id=\"Withdrow118\" defaultMessage=\"Amount \" />\r\n              </FieldLabel>\r\n\r\n              <div styleName=\"group\">\r\n                <Input\r\n                  styleName=\"input\"\r\n                  valueLink={linked.amount}\r\n                  pattern=\"0-9\\.\"\r\n                  placeholder=\"Enter the amount\"\r\n                  fiat={getFiat.toFixed(2)}\r\n                  onKeyDown={inputReplaceCommaWithDot}\r\n                />\r\n                <div style={{ marginLeft: '15px' }}>\r\n                  <Button blue big onClick={this.sellAllBalance} data-tip data-for=\"Withdrow134\">\r\n                    <FormattedMessage id=\"Select210\" defaultMessage=\"MAX\" />\r\n                  </Button>\r\n                </div>\r\n                {!isMobile && (\r\n                  <ReactTooltip id=\"Withdrow134\" type=\"light\" effect=\"solid\" styleName=\"r-tooltip\">\r\n                    <FormattedMessage\r\n                      id=\"WithdrawButton32\"\r\n                      defaultMessage=\"when you click this button, in the field, an amount equal to your balance minus the miners commission will appear\"\r\n                    />\r\n                  </ReactTooltip>\r\n                )}\r\n                {!linked.amount.error && (\r\n                  <div styleName={minus ? 'rednote' : 'note'}>\r\n                    <FormattedMessage\r\n                      id=\"WithdrawModal256\"\r\n                      defaultMessage=\"No less than {minAmount}\"\r\n                      values={{ minAmount: `${defaultMin}` }}\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div styleName=\"sendBtnsWrapper\">\r\n              <div styleName=\"actionBtn\">\r\n                <Button blue big fill disabled={isDisabled} onClick={this.handleSubmit}>\r\n                  {isShipped ? (\r\n                    <Fragment>\r\n                      <FormattedMessage id=\"WithdrawModal11212\" defaultMessage=\"Processing ...\" />\r\n                    </Fragment>\r\n                  ) : (\r\n                    <Fragment>\r\n                      <FormattedMessage id=\"WithdrawModal111\" defaultMessage=\"Send\" />\r\n                    </Fragment>\r\n                  )}\r\n                </Button>\r\n              </div>\r\n              <div styleName=\"actionBtn\">\r\n                <Button big fill gray onClick={this.handleClose}>\r\n                  <Fragment>\r\n                    <FormattedMessage id=\"WithdrawModalCancelBtn\" defaultMessage=\"Cancel\" />\r\n                  </Fragment>\r\n                </Button>\r\n              </div>\r\n            </div>\r\n            {error && (\r\n              <div styleName=\"rednote\">\r\n                <FormattedMessage\r\n                  id=\"WithdrawModalErrorSend\"\r\n                  defaultMessage=\"{errorName} {currency}:{br}{errorMessage}\"\r\n                  values={{\r\n                    errorName: intl.formatMessage(error.name),\r\n                    errorMessage: intl.formatMessage(error.message),\r\n                    br: <br />,\r\n                    currency: `${currency}`,\r\n                  }}\r\n                />\r\n              </div>\r\n            )}\r\n            {invoice && (\r\n              <Fragment>\r\n                <hr />\r\n                <div\r\n                  styleName={`lowLevel ${isDark ? 'dark' : ''}`}\r\n                  style={{ marginBottom: '50px' }}\r\n                >\r\n                  <div styleName=\"groupField\">\r\n                    <div styleName=\"downLabel\">\r\n                      <FieldLabel inRow>\r\n                        <span styleName=\"mobileFont\">\r\n                          <FormattedMessage id=\"WithdrowOwnTX\" defaultMessage=\"  TX\" />\r\n                        </span>\r\n                      </FieldLabel>\r\n                    </div>\r\n                  </div>\r\n                  <div styleName=\"group\">\r\n                    <Input\r\n                      styleName=\"input\"\r\n                      valueLink={linked.ownTx}\r\n                      placeholder={`${intl.formatMessage(labels.ownTxPlaceholder)}`}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <Button\r\n                  styleName=\"buttonFull\"\r\n                  big\r\n                  blue\r\n                  fullWidth\r\n                  disabled={!ownTx || isShipped}\r\n                  onClick={this.handleSubmit}\r\n                >\r\n                  {isShipped ? (\r\n                    <Fragment>\r\n                      <FormattedMessage id=\"WithdrawModal11212\" defaultMessage=\"Processing ...\" />\r\n                    </Fragment>\r\n                  ) : (\r\n                    <FormattedMessage\r\n                      id=\"WithdrawModalInvoiceSaveTx\"\r\n                      defaultMessage=\"  \"\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </Fragment>\r\n            )}\r\n          </Fragment>\r\n        )}\r\n\r\n        {step === 'confirm' && (\r\n          <Fragment>\r\n            <div styleName=\"highLevel smsCodeHolder\">\r\n              <FieldLabel>\r\n                <FormattedMessage id=\"Withdrow2223\" defaultMessage=\"SMS code\" />\r\n              </FieldLabel>\r\n              <Input\r\n                styleName=\"input\"\r\n                valueLink={linked.code}\r\n                pattern=\"0-9\"\r\n                placeholder={`${intl.formatMessage(labels.smsPlaceholder)}`}\r\n              />\r\n            </div>\r\n            {sendSmsStatus === 'sending' && (\r\n              <div styleName=\"smsServerStatus\">\r\n                <FormattedMessage\r\n                  id=\"WithdrawSMS_SmsSending\"\r\n                  defaultMessage=\"  \"\r\n                />\r\n              </div>\r\n            )}\r\n            {sendSmsStatus === 'sended' && (\r\n              <div styleName=\"smsServerStatus\">\r\n                <FormattedMessage id=\"WithdrawSMS_SmsSended\" defaultMessage=\" \" />\r\n              </div>\r\n            )}\r\n            {sendSmsStatus === 'offline' && (\r\n              <div styleName=\"rednotes smsServerStatus\">\r\n                <FormattedMessage\r\n                  id=\"WithdrawSMS_ServerOffline\"\r\n                  defaultMessage=\"   \"\r\n                />\r\n              </div>\r\n            )}\r\n            {linked.code.error && (\r\n              <div styleName=\"rednotes smsServerStatus\">\r\n                <FormattedMessage\r\n                  id=\"WithdrawModal2225\"\r\n                  defaultMessage=\"Something went wrong, enter your current code please\"\r\n                />\r\n              </div>\r\n            )}\r\n            <Button\r\n              styleName=\"buttonFull confirmSmsCode\"\r\n              fullWidth\r\n              disabled={isShipped || sendSmsStatus === 'sending' || sendSmsStatus === 'offline'}\r\n              big\r\n              blue\r\n              onClick={this.handleConfirmSMS}\r\n            >\r\n              <FormattedMessage id=\"Withdrow2224\" defaultMessage=\"Confirm\" />\r\n            </Button>\r\n            <hr styleName=\"marginHr\" />\r\n            <p styleName=\"notice mnemonicUseNote dashboardViewNotice\">\r\n              <FormattedMessage\r\n                id=\"WithdrawSMS_MnemonicNote\"\r\n                defaultMessage=\"           ,     \"\r\n              />\r\n            </p>\r\n            <Button styleName=\"useAuthMethodButton\" blue onClick={this.handleSwitchToMnemonic}>\r\n              <FormattedMessage\r\n                id=\"WithdrawSMS_UseMnemonic\"\r\n                defaultMessage=\"  \"\r\n              />\r\n            </Button>\r\n          </Fragment>\r\n        )}\r\n      </Fragment>\r\n    )\r\n\r\n    return portalUI ? (\r\n      formRender\r\n    ) : (\r\n      <Modal\r\n        name={name}\r\n        title={`${intl.formatMessage(labels.withdrowModal)}${' '}${currency.toUpperCase()}`}\r\n      >\r\n        {formRender}\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n"]}]}