{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\redux\\actions\\core.ts","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\redux\\actions\\core.ts","mtime":1614852356802},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIkBiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yIjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJ1bmRlZmluZWQiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lKSB7IHRocm93IF9lOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9IHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lMikgeyBkaWRFcnIgPSB0cnVlOyBlcnIgPSBfZTI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdFsicmV0dXJuIl0gIT0gbnVsbCkgaXRbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCi8vIEB0cy1ub2NoZWNrCmltcG9ydCByZWR1Y2VycyBmcm9tICdyZWR1eC9jb3JlL3JlZHVjZXJzJzsKaW1wb3J0IGFjdGlvbnMgZnJvbSAncmVkdXgvYWN0aW9ucyc7CmltcG9ydCB7IGdldFN0YXRlIH0gZnJvbSAncmVkdXgvY29yZSc7CmltcG9ydCBTd2FwQXBwIGZyb20gJ3N3YXAuYXBwJzsKaW1wb3J0IFN3YXAgZnJvbSAnc3dhcC5zd2FwJzsKaW1wb3J0IHsgY29uc3RhbnRzIH0gZnJvbSAnaGVscGVycyc7CmltcG9ydCBQYWlyIGZyb20gJ3BhZ2VzL0V4Y2hhbmdlL09yZGVycy9QYWlyJzsKaW1wb3J0IGNvbmZpZyBmcm9tICdoZWxwZXJzL2V4dGVybmFsQ29uZmlnJzsKaW1wb3J0IHsgQmlnTnVtYmVyIH0gZnJvbSAnYmlnbnVtYmVyLmpzJzsKaW1wb3J0IG1ldGFtYXNrIGZyb20gJ2hlbHBlcnMvbWV0YW1hc2snOwppbXBvcnQgeyBBZGRyZXNzVHlwZSB9IGZyb20gJ2RvbWFpbi9hZGRyZXNzJzsKaW1wb3J0IGhlbHBlcnMgZnJvbSAnaGVscGVycyc7Cgp2YXIgZGVidWcgPSBmdW5jdGlvbiBkZWJ1ZygpIHsKICB2YXIgX2NvbnNvbGU7CgogIHJldHVybiAoX2NvbnNvbGUgPSBjb25zb2xlKS5sb2cuYXBwbHkoX2NvbnNvbGUsIGFyZ3VtZW50cyk7Cn07Cgp2YXIgZ2V0T3JkZXJzID0gZnVuY3Rpb24gZ2V0T3JkZXJzKG9yZGVycykgewogIHJlZHVjZXJzLmNvcmUuZ2V0T3JkZXJzKHsKICAgIG9yZGVyczogb3JkZXJzCiAgfSk7CiAgYWN0aW9ucy5jb3JlLmFkZEN1cnJlbmN5RnJvbU9yZGVycyhvcmRlcnMpOwp9OwoKdmFyIGFkZEN1cnJlbmN5RnJvbU9yZGVycyA9IGZ1bmN0aW9uIGFkZEN1cnJlbmN5RnJvbU9yZGVycyhvcmRlcnMpIHsKICBpZiAoY29uZmlnICYmIGNvbmZpZy5pc1dpZGdldCkgcmV0dXJuOyAvLyDQndCVINC00L7QsdCw0LLQu9GP0LXQvCDQstCw0LvRjtGC0Ysg0LjQtyDQvtGA0LTQtdGA0L7QsiDQsiDRgNC10LbQuNC80LUg0LLQuNC00LbQtdGC0LAKICAvLyDQl9Cw0YfQtdC8INGC0L7Qu9GM0LrQviDRjdGC0L4/Pz8KICAvLyDQldGB0LvQuCDQsiByZWR1Y2Vycy5jdXJyZW5jaWVzLnBhcnRpYWxJdGVtcyDQt9Cw0LHRi9C70Lgg0LTQvtCx0LDQstC40YLRjD8KICAvLyDQotCw0Log0YLQsNC8INCw0LLRgtC+0LzQsNGC0LjRh9C10YHQutC4INCz0LXQvdC10YDQuNGA0YPQtdGCLi4uLgogIC8vIFRPRE8g0J/RgNC+0LLQtdGA0LjRgtGMINC30LDQstC40YHQuNC80L7RgdGC0Lgg0Lgg0YPQtNCw0LvQuNGC0YwKCiAgdmFyIGN1cnJlbmNpZXNHZXRTdGF0ZSA9IGdldFN0YXRlKCkuY3VycmVuY2llczsKICB2YXIgYWxsQ3VycmVuY3lpZXMgPSBjdXJyZW5jaWVzR2V0U3RhdGUuaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbS5uYW1lLnRvTG93ZXJDYXNlKCk7CiAgfSk7IC8vINCy0YHQtSDQstCw0LvRjtGC0Ysg0LTQvtGB0YLQv9GD0L3Ri9C1INCyINC60LvQuNC10L3RgtC1CgogIHZhciBwYXJ0aWFsQ3VycmVuY3kgPSBjdXJyZW5jaWVzR2V0U3RhdGUucGFydGlhbEl0ZW1zOyAvLyDQv9C+0LvRg9GH0LDQtdC8INCy0YHQtSDQv9GA0LXQvNC40LDQu9GM0L3Ri9C1INCy0LDQu9GO0YLRiwoKICB2YXIgc2VsbE9yZGVyQXJyYXkgPSBvcmRlcnMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbS5zZWxsQ3VycmVuY3kudG9Mb3dlckNhc2UoKTsKICB9KTsgLy8g0L/QvtC70YPRh9Cw0LXQvCDQuNC3INC+0YDQtNC10YDQvtCy0LAg0LLQsNC70Y7RgtGLINC90LAg0L/RgNC+0LTQsNC20YMKCiAgdmFyIGJ1eU9yZGVyQXJyYXkgPSBvcmRlcnMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbS5idXlDdXJyZW5jeS50b0xvd2VyQ2FzZSgpOwogIH0pOyAvLyDQv9C+0LvRg9GH0LDQtdC8INC40Lcg0L7RgNC00LXRgNC+0LLQsCDQstCw0LvRjtGC0Ysg0L3QsCDQv9C+0LrRg9C/0LrRgwoKICB2YXIgc29ydGVkQXJyYXkgPSBfdG9Db25zdW1hYmxlQXJyYXkoc2VsbE9yZGVyQXJyYXkpOyAvLyDQt9Cw0L/QuNGB0YvQstCw0LXQvCBzZWxsT3JkZXJBcnJheSDQsiDQvNCw0YHRgdC40LIKICAvLyB0ZXJhdG9ycy9nZW5lcmF0b3JzIHJlcXVpcmUgcmVnZW5lcmF0b3ItcnVudGltZQoKCiAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHNlbGxPcmRlckFycmF5KSwKICAgICAgX3N0ZXA7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICB2YXIgc2VsbEN1cnJlbmN5ID0gX3N0ZXAudmFsdWU7CgogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoYnV5T3JkZXJBcnJheSksCiAgICAgICAgICBfc3RlcDI7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgYnV5Q3VycmVuY3kgPSBfc3RlcDIudmFsdWU7CgogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAgICAgaWYgKHNlbGxDdXJyZW5jeSAhPT0gYnV5Q3VycmVuY3kpIHsKICAgICAgICAgICAgaWYgKCFzZWxsT3JkZXJBcnJheS5pbmNsdWRlcyhzZWxsQ3VycmVuY3kpKSB7CiAgICAgICAgICAgICAgc29ydGVkQXJyYXkucHVzaChzZWxsQ3VycmVuY3kudG9Mb3dlckNhc2UoKSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXNlbGxPcmRlckFycmF5LmluY2x1ZGVzKGJ1eUN1cnJlbmN5KSkgewogICAgICAgICAgICAgIHNvcnRlZEFycmF5LnB1c2goYnV5Q3VycmVuY3kudG9Mb3dlckNhc2UoKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICB9CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfaXRlcmF0b3IuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3IuZigpOwogIH0KCiAgdmFyIGhhc1VwZGF0ZXMgPSBmYWxzZTsKICBzb3J0ZWRBcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAvLyDQtNC+0LHQsNCy0LvRj9C10Lwg0L7QsdGK0LXQutGCINCyINC00YDQvtC/LCDQtdGJ0LUg0YDQsNC3INC/0YDQvtCy0LXRgNGP0Y8sINC90LAg0YHQvtCy0L/QsNC00LXQvdC40Y8KICAgIGlmICghcGFydGlhbEN1cnJlbmN5Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gaXRlbS5uYW1lLnRvTG93ZXJDYXNlKCk7CiAgICB9KS5pbmNsdWRlcyhpdGVtKSkgewogICAgICBpZiAoYWxsQ3VycmVuY3lpZXMuaW5jbHVkZXMoaXRlbSkpIHsKICAgICAgICAvLyDQvdC1INC/0YPRgdC60LDRjiDQstCw0LvRjtGC0Ysg0L3QtSDRgdGD0YnQtdGB0YLQstGD0Y7RidC40LUg0LIg0LrQu9C40LXQvdGC0LUKICAgICAgICBoYXNVcGRhdGVzID0gdHJ1ZTsKICAgICAgICBwYXJ0aWFsQ3VycmVuY3kucHVzaCh7CiAgICAgICAgICBuYW1lOiBpdGVtLnRvVXBwZXJDYXNlKCksCiAgICAgICAgICB0aXRsZTogaXRlbS50b1VwcGVyQ2FzZSgpLAogICAgICAgICAgaWNvbjogaXRlbS50b0xvd2VyQ2FzZSgpLAogICAgICAgICAgdmFsdWU6IGl0ZW0udG9Mb3dlckNhc2UoKQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSk7CgogIGlmIChoYXNVcGRhdGVzKSB7CiAgICByZWR1Y2Vycy5jdXJyZW5jaWVzLnVwZGF0ZVBhcnRpYWxJdGVtcyhwYXJ0aWFsQ3VycmVuY3kpOwogIH0KfTsgLy9ACgoKdmFyIGdldFN3YXBCeUlkID0gZnVuY3Rpb24gZ2V0U3dhcEJ5SWQoaWQpIHsKICByZXR1cm4gbmV3IFN3YXAoaWQsIFN3YXBBcHAuc2hhcmVkKCkpOwp9OwoKdmFyIGdldFVzZXJEYXRhID0gZnVuY3Rpb24gZ2V0VXNlckRhdGEoY3VycmVuY3kpIHsKICBzd2l0Y2ggKGN1cnJlbmN5LnRvVXBwZXJDYXNlKCkpIHsKICAgIGNhc2UgJ0JUQyc6CiAgICAgIHJldHVybiBnZXRTdGF0ZSgpLnVzZXIuYnRjRGF0YTsKCiAgICBjYXNlICdFVEgnOgogICAgICByZXR1cm4gZ2V0U3RhdGUoKS51c2VyLmV0aERhdGE7CgogICAgY2FzZSAnR0hPU1QnOgogICAgICByZXR1cm4gZ2V0U3RhdGUoKS51c2VyLmdob3N0RGF0YTsKCiAgICBjYXNlICdORVhUJzoKICAgICAgcmV0dXJuIGdldFN0YXRlKCkudXNlci5uZXh0RGF0YTsKCiAgICBkZWZhdWx0OgogICAgICByZXR1cm4ge307CiAgfQp9OwoKdmFyIHNldEZpbHRlciA9IGZ1bmN0aW9uIHNldEZpbHRlcihmaWx0ZXIpIHsKICByZWR1Y2Vycy5jb3JlLnNldEZpbHRlcih7CiAgICBmaWx0ZXI6IGZpbHRlcgogIH0pOwp9OwoKdmFyIGFjY2VwdFJlcXVlc3QgPSBmdW5jdGlvbiBhY2NlcHRSZXF1ZXN0KG9yZGVySWQsIHBhcnRpY2lwYW50UGVlcikgewogIHZhciBvcmRlciA9IFN3YXBBcHAuc2hhcmVkKCkuc2VydmljZXMub3JkZXJzLmdldEJ5S2V5KG9yZGVySWQpOwogIG9yZGVyLmFjY2VwdFJlcXVlc3QocGFydGljaXBhbnRQZWVyKTsKfTsKCnZhciBkZWNsaW5lUmVxdWVzdCA9IGZ1bmN0aW9uIGRlY2xpbmVSZXF1ZXN0KG9yZGVySWQsIHBhcnRpY2lwYW50UGVlcikgewogIHZhciBvcmRlciA9IFN3YXBBcHAuc2hhcmVkKCkuc2VydmljZXMub3JkZXJzLmdldEJ5S2V5KG9yZGVySWQpOwogIG9yZGVyLmRlY2xpbmVSZXF1ZXN0KHBhcnRpY2lwYW50UGVlcik7Cn07Cgp2YXIgcmVtZW1iZXJPcmRlciA9IGZ1bmN0aW9uIHJlbWVtYmVyT3JkZXIob3JkZXJJZCkgewogIHJlZHVjZXJzLnJlbWVtYmVyZWRPcmRlcnMuc2F2ZWRPcmRlcnMob3JkZXJJZCk7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY29uc3RhbnRzLmxvY2FsU3RvcmFnZS5zYXZlZE9yZGVycywgSlNPTi5zdHJpbmdpZnkoZ2V0U3RhdGUoKS5yZW1lbWJlcmVkT3JkZXJzLnNhdmVkT3JkZXJzKSk7Cn07Cgp2YXIgc2F2ZURlbGV0ZWRPcmRlciA9IGZ1bmN0aW9uIHNhdmVEZWxldGVkT3JkZXIob3JkZXJJZCkgewogIHJlZHVjZXJzLnJlbWVtYmVyZWRPcmRlcnMuZGVsZXRlZE9yZGVycyhvcmRlcklkKTsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjb25zdGFudHMubG9jYWxTdG9yYWdlLmRlbGV0ZWRPcmRlcnMsIEpTT04uc3RyaW5naWZ5KGdldFN0YXRlKCkucmVtZW1iZXJlZE9yZGVycy5kZWxldGVkT3JkZXJzKSk7Cn07Cgp2YXIgZm9yZ2V0T3JkZXJzID0gZnVuY3Rpb24gZm9yZ2V0T3JkZXJzKG9yZGVySWQpIHsKICByZWR1Y2Vycy5yZW1lbWJlcmVkT3JkZXJzLmZvcmdldE9yZGVycyhvcmRlcklkKTsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjb25zdGFudHMubG9jYWxTdG9yYWdlLnNhdmVkT3JkZXJzLCBKU09OLnN0cmluZ2lmeShnZXRTdGF0ZSgpLnJlbWVtYmVyZWRPcmRlcnMuc2F2ZWRPcmRlcnMpKTsKfTsKCnZhciByZW1vdmVPcmRlciA9IGZ1bmN0aW9uIHJlbW92ZU9yZGVyKG9yZGVySWQpIHsKICBhY3Rpb25zLmZlZWQuZGVsZXRlSXRlbVRvRmVlZChvcmRlcklkKTsKICBTd2FwQXBwLnNoYXJlZCgpLnNlcnZpY2VzLm9yZGVycy5yZW1vdmUob3JkZXJJZCk7CiAgYWN0aW9ucy5jb3JlLnVwZGF0ZUNvcmUoKTsKfTsKCnZhciBzaG93TXlPcmRlcnMgPSBmdW5jdGlvbiBzaG93TXlPcmRlcnMoKSB7CiAgU3dhcEFwcC5zaGFyZWQoKS5zZXJ2aWNlcy5vcmRlcnMuc2hvd015T3JkZXJzKCk7Cn07Cgp2YXIgaGlkZU15T3JkZXJzID0gZnVuY3Rpb24gaGlkZU15T3JkZXJzKCkgewogIFN3YXBBcHAuc2hhcmVkKCkuc2VydmljZXMub3JkZXJzLmhpZGVNeU9yZGVycygpOwp9OwoKdmFyIGRlbGV0ZWRQYXJ0aWFsQ3VycmVuY3kgPSBmdW5jdGlvbiBkZWxldGVkUGFydGlhbEN1cnJlbmN5KG9yZGVySWQpIHsKICB2YXIgZGVsZXRlZE9yZGVyID0gU3dhcEFwcC5zaGFyZWQoKS5zZXJ2aWNlcy5vcmRlcnMuZ2V0QnlLZXkob3JkZXJJZCk7CiAgdmFyIGRlbGV0ZWRPcmRlclNlbGxDdXJyZW5jeSA9IGRlbGV0ZWRPcmRlci5zZWxsQ3VycmVuY3k7CiAgdmFyIGRlbGV0ZWRPcmRlckJ1eUN1cnJlbmN5ID0gZGVsZXRlZE9yZGVyLmJ1eUN1cnJlbmN5OwogIHZhciBvcmRlcnMgPSBTd2FwQXBwLnNoYXJlZCgpLnNlcnZpY2VzLm9yZGVycy5pdGVtczsKICB2YXIgZGVsZXRlZE9yZGVyU2VsbCA9IG9yZGVycy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtLnNlbGxDdXJyZW5jeS50b1VwcGVyQ2FzZSgpID09PSBkZWxldGVkT3JkZXJTZWxsQ3VycmVuY3k7CiAgfSk7CiAgdmFyIGRlbGV0ZWRPcmRlckJ1eSA9IG9yZGVycy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtLmJ1eUN1cnJlbmN5LnRvVXBwZXJDYXNlKCkgPT09IGRlbGV0ZWRPcmRlckJ1eUN1cnJlbmN5OwogIH0pOwogIHZhciBwcmVtaXVtQ3VycmVuY2llcyA9IFsnQlRDJywgJ0VUSCcsICdHSE9TVCcsICdORVhUJywgJ1NXQVAnXTsgLy8g0LLQsNC70Y7RgtGLLCDQutC+0YLQvtGA0YvQtSDQstGB0LXQs9C00LAg0LTQvtC70LbQvdGLINCx0YvRgtGMINCyINC00YDQvtC/0LUKCiAgaWYgKGRlbGV0ZWRPcmRlclNlbGwubGVuZ3RoID09PSAxICYmICFwcmVtaXVtQ3VycmVuY2llcy5pbmNsdWRlcyhkZWxldGVkT3JkZXJTZWxsQ3VycmVuY3kpKSB7CiAgICByZWR1Y2Vycy5jdXJyZW5jaWVzLmRlbGV0ZWRQYXJ0aWFsQ3VycmVuY3koZGVsZXRlZE9yZGVyU2VsbEN1cnJlbmN5KTsKICB9IGVsc2UgaWYgKGRlbGV0ZWRPcmRlckJ1eS5sZW5ndGggPT09IDEgJiYgIXByZW1pdW1DdXJyZW5jaWVzLmluY2x1ZGVzKGRlbGV0ZWRPcmRlckJ1eUN1cnJlbmN5KSkgewogICAgcmVkdWNlcnMuY3VycmVuY2llcy5kZWxldGVkUGFydGlhbEN1cnJlbmN5KGRlbGV0ZWRPcmRlckJ1eUN1cnJlbmN5KTsKICB9Cn07Cgp2YXIgaGFzSGlkZGVuT3JkZXJzID0gZnVuY3Rpb24gaGFzSGlkZGVuT3JkZXJzKCkgewogIHJldHVybiBTd2FwQXBwLnNoYXJlZCgpLnNlcnZpY2VzLm9yZGVycy5oYXNIaWRkZW5PcmRlcnMoKTsKfTsKCnZhciBzZW5kUmVxdWVzdCA9IGZ1bmN0aW9uIHNlbmRSZXF1ZXN0KG9yZGVySWQpIHsKICB2YXIgZGVzdGluYXRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkOwogIC8vQAogIHZhciBkZXN0aW5hdGlvbkFkZHJlc3MgPSBkZXN0aW5hdGlvbi5hZGRyZXNzOwogIHZhciBvcmRlciA9IFN3YXBBcHAuc2hhcmVkKCkuc2VydmljZXMub3JkZXJzLmdldEJ5S2V5KG9yZGVySWQpOwogIHZhciB1c2VyQ3VycmVuY3lEYXRhID0gZ2V0VXNlckRhdGEob3JkZXIuYnV5Q3VycmVuY3kpOwoKICB2YXIgX2dldFVzZXJEYXRhID0gZ2V0VXNlckRhdGEob3JkZXIuYnV5Q3VycmVuY3kpLAogICAgICBhZGRyZXNzID0gX2dldFVzZXJEYXRhLmFkZHJlc3MsCiAgICAgIHJlcHV0YXRpb24gPSBfZ2V0VXNlckRhdGEucmVwdXRhdGlvbiwKICAgICAgcmVwdXRhdGlvblByb29mID0gX2dldFVzZXJEYXRhLnJlcHV0YXRpb25Qcm9vZjsKCiAgdmFyIHJlcXVlc3RPcHRpb25zID0gewogICAgYWRkcmVzczogZGVzdGluYXRpb25BZGRyZXNzLAogICAgcGFydGljaXBhbnRNZXRhZGF0YTogewogICAgICBhZGRyZXNzOiBhZGRyZXNzLAogICAgICByZXB1dGF0aW9uOiByZXB1dGF0aW9uLAogICAgICByZXB1dGF0aW9uUHJvb2Y6IHJlcHV0YXRpb25Qcm9vZgogICAgfQogIH07CiAgb3JkZXIuc2VuZFJlcXVlc3QoY2FsbGJhY2ssIHJlcXVlc3RPcHRpb25zKTsKfTsKCnZhciBzZW5kUmVxdWVzdEZvclBhcnRpYWwgPSBmdW5jdGlvbiBzZW5kUmVxdWVzdEZvclBhcnRpYWwob3JkZXJJZCwgbmV3VmFsdWVzKSB7CiAgdmFyIGRlc3RpbmF0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTsKICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDsKICAvL0AKICB2YXIgZGVzdGluYXRpb25BZGRyZXNzID0gZGVzdGluYXRpb24uYWRkcmVzczsKICB2YXIgb3JkZXIgPSBTd2FwQXBwLnNoYXJlZCgpLnNlcnZpY2VzLm9yZGVycy5nZXRCeUtleShvcmRlcklkKTsKICBjb25zb2xlLmxvZygnPj4+c2VuZFJlcXVlc3RGb3JQYXJ0aWFsKCksIG9yZGVyID0nLCBvcmRlcik7CgogIHZhciBfZ2V0VXNlckRhdGEyID0gZ2V0VXNlckRhdGEob3JkZXIuYnV5Q3VycmVuY3kpLAogICAgICBhZGRyZXNzID0gX2dldFVzZXJEYXRhMi5hZGRyZXNzLAogICAgICByZXB1dGF0aW9uID0gX2dldFVzZXJEYXRhMi5yZXB1dGF0aW9uLAogICAgICByZXB1dGF0aW9uUHJvb2YgPSBfZ2V0VXNlckRhdGEyLnJlcHV0YXRpb25Qcm9vZjsKCiAgdmFyIHJlcXVlc3RPcHRpb25zID0gewogICAgYWRkcmVzczogZGVzdGluYXRpb25BZGRyZXNzLAogICAgcGFydGljaXBhbnRNZXRhZGF0YTogewogICAgICBhZGRyZXNzOiBhZGRyZXNzLAogICAgICByZXB1dGF0aW9uOiByZXB1dGF0aW9uLAogICAgICByZXB1dGF0aW9uUHJvb2Y6IHJlcHV0YXRpb25Qcm9vZgogICAgfQogIH07IC8vY29uc29sZS5sb2coJz4+PiBjb3JlOnNlbmRSZXF1ZXN0Rm9yUGFydGlhbCByZXF1ZXN0T3B0aW9ucyA9JywgcmVxdWVzdE9wdGlvbnMpCgogIG9yZGVyLnNlbmRSZXF1ZXN0Rm9yUGFydGlhbChuZXdWYWx1ZXMsIHJlcXVlc3RPcHRpb25zLCBmdW5jdGlvbiAobmV3T3JkZXIsIGlzQWNjZXB0ZWQpIHsKICAgIGNvbnNvbGUubG9nKCduZXdPcmRlcicsIG5ld09yZGVyKTsKICAgIGNvbnNvbGUubG9nKCdpc0FjY2VwdGVkJywgaXNBY2NlcHRlZCk7CiAgICBjYWxsYmFjayhuZXdPcmRlciwgaXNBY2NlcHRlZCk7CiAgfSwgZnVuY3Rpb24gKG9sZE9yZGVyLCBuZXdPcmRlcikgewogICAgdmFyIG9sZFByaWNlID0gUGFpci5mcm9tT3JkZXIob2xkT3JkZXIpLnByaWNlOwogICAgdmFyIG5ld1ByaWNlID0gUGFpci5mcm9tT3JkZXIobmV3T3JkZXIpLnByaWNlOwogICAgY29uc29sZS5sb2coJ3ByaWNlcycsIG9sZFByaWNlLnRvU3RyaW5nKCksIG5ld1ByaWNlLnRvU3RyaW5nKCkpOyAvLyB8IG5ldyAtIG9sZCB8IC8gb2xkIDwgNSUKCiAgICByZXR1cm4gbmV3UHJpY2UubWludXMob2xkUHJpY2UpLmFicygpLmRpdihvbGRQcmljZSkuaXNMZXNzVGhhbk9yRXF1YWxUbygwLjA1KTsKICB9KTsKfTsKCnZhciBjcmVhdGVPcmRlciA9IGZ1bmN0aW9uIGNyZWF0ZU9yZGVyKGRhdGEpIHsKICB2YXIgaXNQYXJ0aWFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICB2YXIgb3JkZXIgPSBTd2FwQXBwLnNoYXJlZCgpLnNlcnZpY2VzLm9yZGVycy5jcmVhdGUoZGF0YSk7CgogIGlmICghaXNQYXJ0aWFsKSB7CiAgICByZXR1cm4gb3JkZXI7CiAgfQoKICBhY3Rpb25zLmNvcmUuc2V0dXBQYXJ0aWFsT3JkZXIob3JkZXIpOwogIHJldHVybiBvcmRlcjsKfTsKCnZhciBzZXR1cFBhcnRpYWxPcmRlciA9IGZ1bmN0aW9uIHNldHVwUGFydGlhbE9yZGVyKG9yZGVyKSB7CiAgdmFyIHBhaXJEYXRhID0gUGFpci5mcm9tT3JkZXIob3JkZXIpOwoKICBpZiAoIXBhaXJEYXRhIHx8ICFwYWlyRGF0YS5wcmljZSkgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIHByaWNlID0gcGFpckRhdGEucHJpY2U7CiAgb3JkZXIuc2V0UmVxdWVzdEhhbmRsZXJGb3JQYXJ0aWFsKCdzZWxsQW1vdW50JywgZnVuY3Rpb24gKF9yZWYsIG9sZE9yZGVyKSB7CiAgICB2YXIgc2VsbEFtb3VudCA9IF9yZWYuc2VsbEFtb3VudDsKICAgIHZhciBvbGRQYWlyID0gUGFpci5mcm9tT3JkZXIob2xkT3JkZXIpOwogICAgZGVidWcoJ29sZFBhaXInLCBvbGRQYWlyKTsgLy8gaWYgQklELCB0aGVuCiAgICAvLyBwcmljZSA9PSBidXlBbW91bnQgLyBzZWxsQW1vdW50CgogICAgdmFyIGJ1eUFtb3VudCA9IG9sZFBhaXIuaXNCaWQoKSA/IHNlbGxBbW91bnQuZGl2KHByaWNlKSA6IHNlbGxBbW91bnQudGltZXMocHJpY2UpOwogICAgZGVidWcoJ25ld0J1eUFtb3VudCcsIGJ1eUFtb3VudCk7CiAgICB2YXIgbmV3T3JkZXIgPSB7CiAgICAgIHNlbGxBbW91bnQ6IHNlbGxBbW91bnQsCiAgICAgIGJ1eUFtb3VudDogYnV5QW1vdW50CiAgICB9OwogICAgZGVidWcoJ25ld09yZGVyJywgbmV3T3JkZXIpOwogICAgcmV0dXJuIG5ld09yZGVyOwogIH0pOwogIG9yZGVyLnNldFJlcXVlc3RIYW5kbGVyRm9yUGFydGlhbCgnYnV5QW1vdW50JywgZnVuY3Rpb24gKF9yZWYyLCBvbGRPcmRlcikgewogICAgdmFyIGJ1eUFtb3VudCA9IF9yZWYyLmJ1eUFtb3VudDsKICAgIHZhciBvbGRQYWlyID0gUGFpci5mcm9tT3JkZXIob2xkT3JkZXIpOwogICAgZGVidWcoJ29sZFBhaXInLCBvbGRQYWlyKTsgLy8gQlVZIFttYWluXSA9IFNFTEwgW2Jhc2VdIENVUlJFTkNZCiAgICAvLyBwcmljZSA9IFttYWluXS9bYmFzZV0gPSBbYnV5XS9bc2VsbF0KICAgIC8vIEJVWSAxMCBFVEggPSBTRUxMIDEgQlRDCiAgICAvLyBwcmljZSA9IDEwID0gYnV5QW1vdW50IC8gc2VsbEFtb3VudAogICAgLy8gbmV3U2VsbEFtb3VudCA9IGJ1eUFtb3VudCAvIHByaWNlCgogICAgdmFyIHNlbGxBbW91bnQgPSBvbGRQYWlyLmlzQmlkKCkgPyBidXlBbW91bnQudGltZXMocHJpY2UpIDogYnV5QW1vdW50LmRpdihwcmljZSk7CiAgICBkZWJ1ZygnbmV3U2VsbEFtb3VudCcsIHNlbGxBbW91bnQpOwogICAgdmFyIG5ld09yZGVyID0gewogICAgICBzZWxsQW1vdW50OiBzZWxsQW1vdW50LAogICAgICBidXlBbW91bnQ6IGJ1eUFtb3VudAogICAgfTsKICAgIGRlYnVnKCduZXdPcmRlcicsIG5ld09yZGVyKTsKICAgIHJldHVybiBuZXdPcmRlcjsKICB9KTsKfTsKCnZhciBpbml0UGFydGlhbE9yZGVycyA9IGZ1bmN0aW9uIGluaXRQYXJ0aWFsT3JkZXJzKCkgewogIFN3YXBBcHAuc2hhcmVkKCkuc2VydmljZXMub3JkZXJzLml0ZW1zLmZvckVhY2goZnVuY3Rpb24gKG9yZGVyKSB7CiAgICBpZiAob3JkZXIgJiYgb3JkZXIuaXNNeSAmJiBvcmRlci5pc1BhcnRpYWwpIHsKICAgICAgYWN0aW9ucy5jb3JlLnNldHVwUGFydGlhbE9yZGVyKG9yZGVyKTsKICAgIH0KICB9KTsKfTsKCnZhciByZXF1ZXN0VG9QZWVyID0gZnVuY3Rpb24gcmVxdWVzdFRvUGVlcihldmVudCwgcGVlciwgZGF0YSwgY2FsbGJhY2spIHsKICBTd2FwQXBwLnNoYXJlZCgpLnNlcnZpY2VzLm9yZGVycy5yZXF1ZXN0VG9QZWVyKGV2ZW50LCBwZWVyLCBkYXRhLCBjYWxsYmFjayk7Cn07Cgp2YXIgdXBkYXRlQ29yZSA9IGZ1bmN0aW9uIHVwZGF0ZUNvcmUoKSB7CiAgU3dhcEFwcC5vbkluaXQoZnVuY3Rpb24gKCkgewogICAgdmFyIG9yZGVycyA9IFN3YXBBcHAuc2hhcmVkKCkuc2VydmljZXMub3JkZXJzLml0ZW1zOwogICAgZ2V0T3JkZXJzKG9yZGVycyk7CiAgICBhY3Rpb25zLmZlZWQuZ2V0RmVlZERhdGFGcm9tT3JkZXIob3JkZXJzKTsKICB9KTsKfTsKCnZhciBnZXRTd2FwSGlzdG9yeSA9IGZ1bmN0aW9uIGdldFN3YXBIaXN0b3J5KCkgewogIHZhciBzd2FwSWQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzd2FwSWQnKSk7CgogIGlmIChzd2FwSWQgPT09IG51bGwgfHwgc3dhcElkLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIGhpc3RvcnlTd2FwID0gc3dhcElkLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIGdldEluZm9ybWF0aW9uQWJvdXRTd2FwKGl0ZW0pOwogIH0pOwogIHJlZHVjZXJzLmhpc3Rvcnkuc2V0U3dhcEhpc3RvcnkoaGlzdG9yeVN3YXApOwp9OwoKdmFyIGdldEluZm9ybWF0aW9uQWJvdXRTd2FwID0gZnVuY3Rpb24gZ2V0SW5mb3JtYXRpb25BYm91dFN3YXAoc3dhcElkKSB7CiAgaWYgKHN3YXBJZC5sZW5ndGggPiAwICYmIHR5cGVvZiBzd2FwSWQgPT09ICdzdHJpbmcnKSB7CiAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBTd2FwQXBwLnNoYXJlZCgpLmVudi5zdG9yYWdlLmdldEl0ZW0oInN3YXAuIi5jb25jYXQoc3dhcElkKSkpLCBTd2FwQXBwLnNoYXJlZCgpLmVudi5zdG9yYWdlLmdldEl0ZW0oImZsb3cuIi5jb25jYXQoc3dhcElkKSkpOwogIH0KfTsKCnZhciBnZXRIaWRkZW5Db2lucyA9IGZ1bmN0aW9uIGdldEhpZGRlbkNvaW5zKCkgewogIHJldHVybiBnZXRTdGF0ZSgpLmNvcmUuaGlkZGVuQ29pbnNMaXN0IHx8IFtdOwp9OwoKdmFyIG1hcmtDb2luQXNIaWRkZW4gPSBmdW5jdGlvbiBtYXJrQ29pbkFzSGlkZGVuKGNvaW4pIHsKICB2YXIgZG9CYWNrdXAgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogIHZhciBsaXN0ID0gZ2V0U3RhdGUoKS5jb3JlLmhpZGRlbkNvaW5zTGlzdCB8fCBbXTsKCiAgaWYgKCFsaXN0LmluY2x1ZGVzKGNvaW4pKSB7CiAgICByZWR1Y2Vycy5jb3JlLm1hcmtDb2luQXNIaWRkZW4oY29pbik7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjb25zdGFudHMubG9jYWxTdG9yYWdlLmhpZGRlbkNvaW5zTGlzdCwgSlNPTi5zdHJpbmdpZnkoZ2V0U3RhdGUoKS5jb3JlLmhpZGRlbkNvaW5zTGlzdCkpOwoKICAgIGlmIChkb0JhY2t1cCkgewogICAgICBhY3Rpb25zLmJhY2t1cE1hbmFnZXIuc2VydmVyQmFja3VwKCk7CiAgICB9CiAgfQp9OwoKdmFyIG1hcmtDb2luQXNWaXNpYmxlID0gZnVuY3Rpb24gbWFya0NvaW5Bc1Zpc2libGUoY29pbikgewogIHZhciBkb0JhY2t1cCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgdmFyIGhpZGRlbkNvaW5zTGlzdCA9IGNvbnN0YW50cy5sb2NhbFN0b3JhZ2UuaGlkZGVuQ29pbnNMaXN0OwogIHZhciBmaW5kZWRDb2luID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShoaWRkZW5Db2luc0xpc3QpKS5maW5kKGZ1bmN0aW9uIChlbCkgewogICAgcmV0dXJuIGVsLmluY2x1ZGVzKGNvaW4pICYmIGVsLmluY2x1ZGVzKCc6Jyk7CiAgfSk7CiAgcmVkdWNlcnMuY29yZS5tYXJrQ29pbkFzVmlzaWJsZShmaW5kZWRDb2luIHx8IGNvaW4pOwogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGhpZGRlbkNvaW5zTGlzdCwgSlNPTi5zdHJpbmdpZnkoZ2V0U3RhdGUoKS5jb3JlLmhpZGRlbkNvaW5zTGlzdCkpOwoKICBpZiAoZG9CYWNrdXApIHsKICAgIGFjdGlvbnMuYmFja3VwTWFuYWdlci5zZXJ2ZXJCYWNrdXAoKTsKICB9Cn07Cgp2YXIgZ2V0V2FsbGV0ID0gZnVuY3Rpb24gZ2V0V2FsbGV0KGZpbmRDb25kaXRpb24pIHsKICAvLyBzcGVjaWZ5IGFkZHJlc3NUeXBlLAogIC8vIG90aGVyd2lzZSBpdCBmaW5kcyB0aGUgZmlyc3Qgd2FsbGV0IGZyb20gYWxsIG9yaWdpbnMsIGluY2x1ZGluZyBtZXRhbWFzawogIHZhciBjdXJyZW5jeSA9IGZpbmRDb25kaXRpb24uY3VycmVuY3ksCiAgICAgIGFkZHJlc3MgPSBmaW5kQ29uZGl0aW9uLmFkZHJlc3MsCiAgICAgIGFkZHJlc3NUeXBlID0gZmluZENvbmRpdGlvbi5hZGRyZXNzVHlwZTsKICB2YXIgd2FsbGV0cyA9IGdldFdhbGxldHMoewogICAgd2l0aEludGVybmFsOiB0cnVlCiAgfSk7CiAgdmFyIGZvdW5kZWQgPSB3YWxsZXRzLmZpbHRlcihmdW5jdGlvbiAod2FsbGV0KSB7CiAgICBpZiAod2FsbGV0LmlzTWV0YW1hc2sgJiYgIXdhbGxldC5pc0Nvbm5lY3RlZCkgcmV0dXJuIGZhbHNlOwogICAgdmFyIGNvbmRpdGlvbk9rID0gY3VycmVuY3kgJiYgd2FsbGV0LmN1cnJlbmN5LnRvTG93ZXJDYXNlKCkgPT09IGN1cnJlbmN5LnRvTG93ZXJDYXNlKCk7CgogICAgaWYgKGFkZHJlc3MpIHsKICAgICAgaWYgKHdhbGxldC5hZGRyZXNzLnRvTG93ZXJDYXNlKCkgPT09IGFkZHJlc3MudG9Mb3dlckNhc2UoKSkgewogICAgICAgIHJldHVybiBjb25kaXRpb25PazsKICAgICAgfQogICAgfQoKICAgIGlmIChhZGRyZXNzVHlwZSkgewogICAgICBpZiAoYWRkcmVzc1R5cGUgPT09IEFkZHJlc3NUeXBlLkludGVybmFsICYmICF3YWxsZXQuaXNNZXRhbWFzayB8fCBhZGRyZXNzVHlwZSA9PT0gQWRkcmVzc1R5cGUuTWV0YW1hc2sgJiYgd2FsbGV0LmlzTWV0YW1hc2spIHsKICAgICAgICByZXR1cm4gY29uZGl0aW9uT2s7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gY29uZGl0aW9uT2s7CiAgfSk7CiAgcmV0dXJuIGZvdW5kZWQubGVuZ3RoID8gZm91bmRlZFswXSA6IGZhbHNlOwp9OwoKdmFyIGdldFdhbGxldHMgPSBmdW5jdGlvbiBnZXRXYWxsZXRzKG9wdGlvbnMpIHsKICB2YXIgd2l0aEludGVybmFsID0gb3B0aW9ucy53aXRoSW50ZXJuYWw7CgogIHZhciBfZ2V0U3RhdGUgPSBnZXRTdGF0ZSgpLAogICAgICBfZ2V0U3RhdGUkdXNlciA9IF9nZXRTdGF0ZS51c2VyLAogICAgICBidGNEYXRhID0gX2dldFN0YXRlJHVzZXIuYnRjRGF0YSwKICAgICAgZ2hvc3REYXRhID0gX2dldFN0YXRlJHVzZXIuZ2hvc3REYXRhLAogICAgICBuZXh0RGF0YSA9IF9nZXRTdGF0ZSR1c2VyLm5leHREYXRhLAogICAgICBidGNNdWx0aXNpZ1NNU0RhdGEgPSBfZ2V0U3RhdGUkdXNlci5idGNNdWx0aXNpZ1NNU0RhdGEsCiAgICAgIGJ0Y011bHRpc2lnVXNlckRhdGEgPSBfZ2V0U3RhdGUkdXNlci5idGNNdWx0aXNpZ1VzZXJEYXRhLAogICAgICBidGNNdWx0aXNpZ1BpbkRhdGEgPSBfZ2V0U3RhdGUkdXNlci5idGNNdWx0aXNpZ1BpbkRhdGEsCiAgICAgIGV0aERhdGEgPSBfZ2V0U3RhdGUkdXNlci5ldGhEYXRhLAogICAgICB0b2tlbnNEYXRhID0gX2dldFN0YXRlJHVzZXIudG9rZW5zRGF0YSwKICAgICAgaXNUb2tlblNpZ25lZCA9IF9nZXRTdGF0ZSR1c2VyLmlzVG9rZW5TaWduZWQsCiAgICAgIG1ldGFtYXNrRGF0YSA9IF9nZXRTdGF0ZSR1c2VyLm1ldGFtYXNrRGF0YTsgLy8gU3dlZXAKCgogIHZhciBfZ2V0U3RhdGUyID0gZ2V0U3RhdGUoKSwKICAgICAgX2dldFN0YXRlMiR1c2VyID0gX2dldFN0YXRlMi51c2VyLAogICAgICBidGNNbmVtb25pY0RhdGEgPSBfZ2V0U3RhdGUyJHVzZXIuYnRjTW5lbW9uaWNEYXRhLAogICAgICBldGhNbmVtb25pY0RhdGEgPSBfZ2V0U3RhdGUyJHVzZXIuZXRoTW5lbW9uaWNEYXRhLAogICAgICBnaG9zdE1uZW1vbmljRGF0YSA9IF9nZXRTdGF0ZTIkdXNlci5naG9zdE1uZW1vbmljRGF0YSwKICAgICAgbmV4dE1uZW1vbmljRGF0YSA9IF9nZXRTdGF0ZTIkdXNlci5uZXh0TW5lbW9uaWNEYXRhOwoKICB2YXIgbWV0YW1hc2tDb25uZWN0ZWQgPSBtZXRhbWFzay5pc0VuYWJsZWQoKSAmJiBtZXRhbWFzay5pc0Nvbm5lY3RlZCgpOwogIHZhciBhbGxEYXRhID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSghY29uZmlnLm9wdHMuY3VyRW5hYmxlZCB8fCBjb25maWcub3B0cy5jdXJFbmFibGVkLmV0aCA/IG1ldGFtYXNrRGF0YSA/IFttZXRhbWFza0RhdGFdIDogW10gOiBbXSksIF90b0NvbnN1bWFibGVBcnJheSghY29uZmlnLm9wdHMuY3VyRW5hYmxlZCB8fCBjb25maWcub3B0cy5jdXJFbmFibGVkLmJ0YyA/IGJ0Y01uZW1vbmljRGF0YSAmJiAhYnRjRGF0YS5pc01uZW1vbmljID8gW2J0Y01uZW1vbmljRGF0YV0gOiBbXSA6IFtdKSwgX3RvQ29uc3VtYWJsZUFycmF5KCFjb25maWcub3B0cy5jdXJFbmFibGVkIHx8IGNvbmZpZy5vcHRzLmN1ckVuYWJsZWQuZXRoID8gZXRoTW5lbW9uaWNEYXRhICYmICFldGhEYXRhLmlzTW5lbW9uaWMgPyBbZXRoTW5lbW9uaWNEYXRhXSA6IFtdIDogW10pLCBfdG9Db25zdW1hYmxlQXJyYXkoIWNvbmZpZy5vcHRzLmN1ckVuYWJsZWQgfHwgY29uZmlnLm9wdHMuY3VyRW5hYmxlZC5idGMgPyBbYnRjRGF0YV0gOiBbXSksIF90b0NvbnN1bWFibGVBcnJheSghY29uZmlnLm9wdHMuY3VyRW5hYmxlZCB8fCBjb25maWcub3B0cy5jdXJFbmFibGVkLmJ0YyA/IFtidGNNdWx0aXNpZ1NNU0RhdGFdIDogW10pLCBfdG9Db25zdW1hYmxlQXJyYXkoIWNvbmZpZy5vcHRzLmN1ckVuYWJsZWQgfHwgY29uZmlnLm9wdHMuY3VyRW5hYmxlZC5idGMgPyBidGNNdWx0aXNpZ1BpbkRhdGEgJiYgYnRjTXVsdGlzaWdQaW5EYXRhLmlzUmVnaXN0ZXJlZCA/IFtidGNNdWx0aXNpZ1BpbkRhdGFdIDogW10gOiBbXSksIF90b0NvbnN1bWFibGVBcnJheSghY29uZmlnLm9wdHMuY3VyRW5hYmxlZCB8fCBjb25maWcub3B0cy5jdXJFbmFibGVkLmJ0YyA/IFtidGNNdWx0aXNpZ1VzZXJEYXRhXSA6IFtdKSwgX3RvQ29uc3VtYWJsZUFycmF5KCFjb25maWcub3B0cy5jdXJFbmFibGVkIHx8IGNvbmZpZy5vcHRzLmN1ckVuYWJsZWQuYnRjID8gYnRjTXVsdGlzaWdVc2VyRGF0YSAmJiBidGNNdWx0aXNpZ1VzZXJEYXRhLndhbGxldHMgPyBidGNNdWx0aXNpZ1VzZXJEYXRhLndhbGxldHMgOiBbXSA6IFtdKSwgX3RvQ29uc3VtYWJsZUFycmF5KCFjb25maWcub3B0cy5jdXJFbmFibGVkIHx8IGNvbmZpZy5vcHRzLmN1ckVuYWJsZWQuZXRoID8gbWV0YW1hc2tDb25uZWN0ZWQgPyB3aXRoSW50ZXJuYWwgPyBbZXRoRGF0YV0gOiBbXSA6IFtldGhEYXRhXSA6IFtdKSwgX3RvQ29uc3VtYWJsZUFycmF5KCFjb25maWcub3B0cy5jdXJFbmFibGVkIHx8IGNvbmZpZy5vcHRzLmN1ckVuYWJsZWQuZ2hvc3QgPyBbZ2hvc3REYXRhXSA6IFtdKSwgX3RvQ29uc3VtYWJsZUFycmF5KCFjb25maWcub3B0cy5jdXJFbmFibGVkIHx8IGNvbmZpZy5vcHRzLmN1ckVuYWJsZWQubmV4dCA/IFtuZXh0RGF0YV0gOiBbXSksIF90b0NvbnN1bWFibGVBcnJheShPYmplY3Qua2V5cyh0b2tlbnNEYXRhKS5maWx0ZXIoZnVuY3Rpb24gKGspIHsKICAgIHJldHVybiAhdG9rZW5zRGF0YVtrXS5yZWR1Y2VyRGF0YVRhcmdldDsKICB9KS5tYXAoZnVuY3Rpb24gKGspIHsKICAgIHJldHVybiB0b2tlbnNEYXRhW2tdOwogIH0pKSkubWFwKGZ1bmN0aW9uIChfcmVmMykgewogICAgdmFyIGFjY291bnQgPSBfcmVmMy5hY2NvdW50LAogICAgICAgIGtleVBhaXIgPSBfcmVmMy5rZXlQYWlyLAogICAgICAgIGRhdGEgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZjMsIFsiYWNjb3VudCIsICJrZXlQYWlyIl0pOwoKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBkYXRhKTsKICB9KTsKICByZXR1cm4gYWxsRGF0YS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtICYmIGl0ZW0uYWRkcmVzczsKICB9KTsKfTsKCnZhciBmZXRjaFdhbGxldEJhbGFuY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmNCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUod2FsbGV0RGF0YSkgewogICAgdmFyIG5hbWUsIGJhbGFuY2UsIF9iYWxhbmNlOwoKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIG5hbWUgPSBoZWxwZXJzLmdldEN1cnJlbmN5S2V5KHdhbGxldERhdGEuY3VycmVuY3kudG9Mb3dlckNhc2UoKSwgdHJ1ZSk7CgogICAgICAgICAgICBpZiAoIWhlbHBlcnMuZXRoVG9rZW4uaXNFdGhUb2tlbih7CiAgICAgICAgICAgICAgbmFtZTogbmFtZQogICAgICAgICAgICB9KSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICByZXR1cm4gYWN0aW9ucy50b2tlbi5mZXRjaEJhbGFuY2Uod2FsbGV0RGF0YS5hZGRyZXNzLCB3YWxsZXREYXRhLmNvbnRyYWN0QWRkcmVzcywgd2FsbGV0RGF0YS5kZWNpbWFscyk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBiYWxhbmNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbmV3IEJpZ051bWJlcihiYWxhbmNlKS50b051bWJlcigpKTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJGYWlsIGZldGNoIGJhbGFuY2UgZm9yIHdhbGxldCAnIi5jb25jYXQobmFtZSwgIiciKSwgX2NvbnRleHQudDApOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyODsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgaWYgKCEoYWN0aW9uc1tuYW1lXSAmJiBhY3Rpb25zW25hbWVdLmZldGNoQmFsYW5jZSAmJiB0eXBlb2YgYWN0aW9uc1tuYW1lXS5mZXRjaEJhbGFuY2UgPT09ICJmdW5jdGlvbiIpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTU7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnNbbmFtZV0uZmV0Y2hCYWxhbmNlKHdhbGxldERhdGEuYWRkcmVzcyk7CgogICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgX2JhbGFuY2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXcgQmlnTnVtYmVyKF9iYWxhbmNlKS50b051bWJlcigpKTsKCiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjI7CiAgICAgICAgICAgIF9jb250ZXh0LnQxID0gX2NvbnRleHRbImNhdGNoIl0oMTUpOwogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJGYWlsIGZldGNoIGJhbGFuY2UgZm9yIHdhbGxldCAnIi5jb25jYXQobmFtZSwgIiciKSwgX2NvbnRleHQudDEpOwoKICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyODsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgY29uc29sZS53YXJuKCJGYWlsIGZldGNoIGJhbGFuY2UgZm9yIHdhbGxldCAnIi5jb25jYXQobmFtZSwgIicgLSBub3QgZmV0Y2hCYWxhbmNlIGluIGFjdGlvbnMiKSk7CgogICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgMCk7CgogICAgICAgICAgY2FzZSAyOToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzIsIDldLCBbMTUsIDIyXV0pOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGZldGNoV2FsbGV0QmFsYW5jZShfeCkgewogICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgewogIHJlbWVtYmVyT3JkZXI6IHJlbWVtYmVyT3JkZXIsCiAgZm9yZ2V0T3JkZXJzOiBmb3JnZXRPcmRlcnMsCiAgZ2V0U3dhcEJ5SWQ6IGdldFN3YXBCeUlkLAogIGdldE9yZGVyczogZ2V0T3JkZXJzLAogIHNldEZpbHRlcjogc2V0RmlsdGVyLAogIGNyZWF0ZU9yZGVyOiBjcmVhdGVPcmRlciwKICBnZXRTd2FwSGlzdG9yeTogZ2V0U3dhcEhpc3RvcnksCiAgdXBkYXRlQ29yZTogdXBkYXRlQ29yZSwKICBzZW5kUmVxdWVzdDogc2VuZFJlcXVlc3QsCiAgc2VuZFJlcXVlc3RGb3JQYXJ0aWFsOiBzZW5kUmVxdWVzdEZvclBhcnRpYWwsCiAgYWNjZXB0UmVxdWVzdDogYWNjZXB0UmVxdWVzdCwKICBkZWNsaW5lUmVxdWVzdDogZGVjbGluZVJlcXVlc3QsCiAgcmVtb3ZlT3JkZXI6IHJlbW92ZU9yZGVyLAogIG1hcmtDb2luQXNIaWRkZW46IG1hcmtDb2luQXNIaWRkZW4sCiAgbWFya0NvaW5Bc1Zpc2libGU6IG1hcmtDb2luQXNWaXNpYmxlLAogIHJlcXVlc3RUb1BlZXI6IHJlcXVlc3RUb1BlZXIsCiAgZ2V0SW5mb3JtYXRpb25BYm91dFN3YXA6IGdldEluZm9ybWF0aW9uQWJvdXRTd2FwLAogIHNhdmVEZWxldGVkT3JkZXI6IHNhdmVEZWxldGVkT3JkZXIsCiAgaGlkZU15T3JkZXJzOiBoaWRlTXlPcmRlcnMsCiAgc2hvd015T3JkZXJzOiBzaG93TXlPcmRlcnMsCiAgaGFzSGlkZGVuT3JkZXJzOiBoYXNIaWRkZW5PcmRlcnMsCiAgc2V0dXBQYXJ0aWFsT3JkZXI6IHNldHVwUGFydGlhbE9yZGVyLAogIGluaXRQYXJ0aWFsT3JkZXJzOiBpbml0UGFydGlhbE9yZGVycywKICBkZWxldGVkUGFydGlhbEN1cnJlbmN5OiBkZWxldGVkUGFydGlhbEN1cnJlbmN5LAogIGFkZEN1cnJlbmN5RnJvbU9yZGVyczogYWRkQ3VycmVuY3lGcm9tT3JkZXJzLAogIGdldFdhbGxldHM6IGdldFdhbGxldHMsCiAgZ2V0V2FsbGV0OiBnZXRXYWxsZXQsCiAgZ2V0SGlkZGVuQ29pbnM6IGdldEhpZGRlbkNvaW5zLAogIGZldGNoV2FsbGV0QmFsYW5jZTogZmV0Y2hXYWxsZXRCYWxhbmNlCn07"},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/redux/actions/core.ts"],"names":["reducers","actions","getState","SwapApp","Swap","constants","Pair","config","BigNumber","metamask","AddressType","helpers","debug","console","log","getOrders","orders","core","addCurrencyFromOrders","isWidget","currenciesGetState","currencies","allCurrencyies","items","map","item","name","toLowerCase","partialCurrency","partialItems","sellOrderArray","sellCurrency","buyOrderArray","buyCurrency","sortedArray","includes","push","hasUpdates","forEach","toUpperCase","title","icon","value","updatePartialItems","getSwapById","id","shared","getUserData","currency","user","btcData","ethData","ghostData","nextData","setFilter","filter","acceptRequest","orderId","participantPeer","order","services","getByKey","declineRequest","rememberOrder","rememberedOrders","savedOrders","localStorage","setItem","JSON","stringify","saveDeletedOrder","deletedOrders","forgetOrders","removeOrder","feed","deleteItemToFeed","remove","updateCore","showMyOrders","hideMyOrders","deletedPartialCurrency","deletedOrder","deletedOrderSellCurrency","deletedOrderBuyCurrency","deletedOrderSell","deletedOrderBuy","premiumCurrencies","length","hasHiddenOrders","sendRequest","destination","callback","destinationAddress","address","userCurrencyData","reputation","reputationProof","requestOptions","participantMetadata","sendRequestForPartial","newValues","newOrder","isAccepted","oldOrder","oldPrice","fromOrder","price","newPrice","toString","minus","abs","div","isLessThanOrEqualTo","createOrder","data","isPartial","create","setupPartialOrder","pairData","setRequestHandlerForPartial","sellAmount","oldPair","buyAmount","isBid","times","initPartialOrders","isMy","requestToPeer","event","peer","onInit","getFeedDataFromOrder","getSwapHistory","swapId","parse","getItem","historySwap","getInformationAboutSwap","history","setSwapHistory","env","storage","getHiddenCoins","hiddenCoinsList","markCoinAsHidden","coin","doBackup","list","backupManager","serverBackup","markCoinAsVisible","findedCoin","find","el","getWallet","findCondition","addressType","wallets","getWallets","withInternal","founded","wallet","isMetamask","isConnected","conditionOk","Internal","Metamask","options","btcMultisigSMSData","btcMultisigUserData","btcMultisigPinData","tokensData","isTokenSigned","metamaskData","btcMnemonicData","ethMnemonicData","ghostMnemonicData","nextMnemonicData","metamaskConnected","isEnabled","allData","opts","curEnabled","eth","btc","isMnemonic","isRegistered","ghost","next","Object","keys","k","reducerDataTarget","account","keyPair","fetchWalletBalance","walletData","getCurrencyKey","ethToken","isEthToken","token","fetchBalance","contractAddress","decimals","balance","toNumber","error","warn"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\nimport reducers from 'redux/core/reducers'\r\nimport actions from 'redux/actions'\r\nimport { getState } from 'redux/core'\r\nimport SwapApp from 'swap.app'\r\nimport Swap from 'swap.swap'\r\nimport { constants } from 'helpers'\r\nimport Pair from 'pages/Exchange/Orders/Pair'\r\nimport config from 'helpers/externalConfig'\r\nimport { BigNumber } from 'bignumber.js'\r\n\r\nimport metamask from 'helpers/metamask'\r\nimport { AddressType } from 'domain/address'\r\n\r\nimport helpers from 'helpers'\r\n\r\nconst debug = (...args) => console.log(...args)\r\n\r\nconst getOrders = (orders) => {\r\n  reducers.core.getOrders({ orders })\r\n  actions.core.addCurrencyFromOrders(orders)\r\n}\r\n\r\nconst addCurrencyFromOrders = (orders) => {\r\n  if (config && config.isWidget) return //        \r\n\r\n  //   ???\r\n  //   reducers.currencies.partialItems  ?\r\n  //    ....\r\n  // TODO    \r\n\r\n  const currenciesGetState = getState().currencies\r\n  const allCurrencyies = currenciesGetState.items.map((item) => item.name.toLowerCase()) //     \r\n  const partialCurrency = currenciesGetState.partialItems //    \r\n\r\n  const sellOrderArray = orders.map((item) => item.sellCurrency.toLowerCase()) //      \r\n  const buyOrderArray = orders.map((item) => item.buyCurrency.toLowerCase()) //      \r\n\r\n  let sortedArray = [...sellOrderArray] //  sellOrderArray  \r\n\r\n  // terators/generators require regenerator-runtime\r\n  for (const sellCurrency of sellOrderArray) {\r\n    // eslint-disable-line\r\n    for (const buyCurrency of buyOrderArray) {\r\n      // eslint-disable-line\r\n      if (sellCurrency !== buyCurrency) {\r\n        if (!sellOrderArray.includes(sellCurrency)) {\r\n          sortedArray.push(sellCurrency.toLowerCase())\r\n        } else if (!sellOrderArray.includes(buyCurrency)) {\r\n          sortedArray.push(buyCurrency.toLowerCase())\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  let hasUpdates = false\r\n\r\n  sortedArray.forEach((item) => {\r\n    //    ,   ,  \r\n    if (!partialCurrency.map((item) => item.name.toLowerCase()).includes(item)) {\r\n      if (allCurrencyies.includes(item)) {\r\n        //       \r\n        hasUpdates = true\r\n        partialCurrency.push({\r\n          name: item.toUpperCase(),\r\n          title: item.toUpperCase(),\r\n          icon: item.toLowerCase(),\r\n          value: item.toLowerCase(),\r\n        })\r\n      }\r\n    }\r\n  })\r\n\r\n  if (hasUpdates) {\r\n    reducers.currencies.updatePartialItems(partialCurrency)\r\n  }\r\n}\r\n//@\r\nconst getSwapById = (id) => new Swap(id, SwapApp.shared())\r\n\r\nconst getUserData = (currency) => {\r\n  switch (currency.toUpperCase()) {\r\n    case 'BTC':\r\n      return getState().user.btcData\r\n\r\n    case 'ETH':\r\n      return getState().user.ethData\r\n\r\n    case 'GHOST':\r\n      return getState().user.ghostData\r\n\r\n    case 'NEXT':\r\n      return getState().user.nextData\r\n\r\n    default:\r\n      return {}\r\n  }\r\n}\r\n\r\nconst setFilter = (filter) => {\r\n  reducers.core.setFilter({ filter })\r\n}\r\n\r\nconst acceptRequest = (orderId, participantPeer) => {\r\n  const order = SwapApp.shared().services.orders.getByKey(orderId)\r\n  order.acceptRequest(participantPeer)\r\n}\r\n\r\nconst declineRequest = (orderId, participantPeer) => {\r\n  const order = SwapApp.shared().services.orders.getByKey(orderId)\r\n  order.declineRequest(participantPeer)\r\n}\r\n\r\nconst rememberOrder = (orderId) => {\r\n  reducers.rememberedOrders.savedOrders(orderId)\r\n  localStorage.setItem(\r\n    constants.localStorage.savedOrders,\r\n    JSON.stringify(getState().rememberedOrders.savedOrders)\r\n  )\r\n}\r\n\r\nconst saveDeletedOrder = (orderId) => {\r\n  reducers.rememberedOrders.deletedOrders(orderId)\r\n  localStorage.setItem(\r\n    constants.localStorage.deletedOrders,\r\n    JSON.stringify(getState().rememberedOrders.deletedOrders)\r\n  )\r\n}\r\n\r\nconst forgetOrders = (orderId) => {\r\n  reducers.rememberedOrders.forgetOrders(orderId)\r\n  localStorage.setItem(\r\n    constants.localStorage.savedOrders,\r\n    JSON.stringify(getState().rememberedOrders.savedOrders)\r\n  )\r\n}\r\n\r\nconst removeOrder = (orderId) => {\r\n  actions.feed.deleteItemToFeed(orderId)\r\n  SwapApp.shared().services.orders.remove(orderId)\r\n  actions.core.updateCore()\r\n}\r\n\r\nconst showMyOrders = () => {\r\n  SwapApp.shared().services.orders.showMyOrders()\r\n}\r\n\r\nconst hideMyOrders = () => {\r\n  SwapApp.shared().services.orders.hideMyOrders()\r\n}\r\n\r\nconst deletedPartialCurrency = (orderId) => {\r\n  const deletedOrder = SwapApp.shared().services.orders.getByKey(orderId)\r\n  const deletedOrderSellCurrency = deletedOrder.sellCurrency\r\n  const deletedOrderBuyCurrency = deletedOrder.buyCurrency\r\n  const orders = SwapApp.shared().services.orders.items\r\n\r\n  const deletedOrderSell = orders.filter(\r\n    (item) => item.sellCurrency.toUpperCase() === deletedOrderSellCurrency\r\n  )\r\n  const deletedOrderBuy = orders.filter(\r\n    (item) => item.buyCurrency.toUpperCase() === deletedOrderBuyCurrency\r\n  )\r\n\r\n  const premiumCurrencies = ['BTC', 'ETH', 'GHOST', 'NEXT', 'SWAP'] // ,      \r\n\r\n  if (deletedOrderSell.length === 1 && !premiumCurrencies.includes(deletedOrderSellCurrency)) {\r\n    reducers.currencies.deletedPartialCurrency(deletedOrderSellCurrency)\r\n  } else if (deletedOrderBuy.length === 1 && !premiumCurrencies.includes(deletedOrderBuyCurrency)) {\r\n    reducers.currencies.deletedPartialCurrency(deletedOrderBuyCurrency)\r\n  }\r\n}\r\n\r\nconst hasHiddenOrders = () => SwapApp.shared().services.orders.hasHiddenOrders()\r\n\r\nconst sendRequest = (orderId, destination = {}, callback) => {\r\n  //@\r\n  const { address: destinationAddress } = destination\r\n\r\n  const order = SwapApp.shared().services.orders.getByKey(orderId)\r\n\r\n  const userCurrencyData = getUserData(order.buyCurrency)\r\n  const { address, reputation, reputationProof } = getUserData(order.buyCurrency)\r\n\r\n  const requestOptions = {\r\n    address: destinationAddress,\r\n    participantMetadata: {\r\n      address,\r\n      reputation,\r\n      reputationProof,\r\n    },\r\n  }\r\n\r\n  order.sendRequest(callback, requestOptions)\r\n}\r\n\r\nconst sendRequestForPartial = (orderId, newValues, destination = {}, callback) => {\r\n  //@\r\n  const { address: destinationAddress } = destination\r\n\r\n  const order = SwapApp.shared().services.orders.getByKey(orderId)\r\n\r\n  console.log('>>>sendRequestForPartial(), order =', order)\r\n\r\n  const { address, reputation, reputationProof } = getUserData(order.buyCurrency)\r\n\r\n  const requestOptions = {\r\n    address: destinationAddress,\r\n    participantMetadata: {\r\n      address,\r\n      reputation,\r\n      reputationProof,\r\n    },\r\n  }\r\n\r\n  //console.log('>>> core:sendRequestForPartial requestOptions =', requestOptions)\r\n\r\n  order.sendRequestForPartial(\r\n    newValues,\r\n    requestOptions,\r\n    (newOrder, isAccepted) => {\r\n      console.log('newOrder', newOrder)\r\n      console.log('isAccepted', isAccepted)\r\n\r\n      callback(newOrder, isAccepted)\r\n    },\r\n    (oldOrder, newOrder) => {\r\n      const oldPrice = Pair.fromOrder(oldOrder).price\r\n      const newPrice = Pair.fromOrder(newOrder).price\r\n\r\n      console.log('prices', oldPrice.toString(), newPrice.toString())\r\n      // | new - old | / old < 5%\r\n      return newPrice.minus(oldPrice).abs().div(oldPrice).isLessThanOrEqualTo(0.05)\r\n    }\r\n  )\r\n}\r\n\r\nconst createOrder = (data, isPartial = false) => {\r\n  const order = SwapApp.shared().services.orders.create(data)\r\n  if (!isPartial) {\r\n    return order\r\n  }\r\n\r\n  actions.core.setupPartialOrder(order)\r\n  return order\r\n}\r\n\r\nconst setupPartialOrder = (order) => {\r\n  const pairData = Pair.fromOrder(order)\r\n\r\n  if (!pairData || !pairData.price) {\r\n    return\r\n  }\r\n\r\n  const { price } = pairData\r\n\r\n  order.setRequestHandlerForPartial('sellAmount', ({ sellAmount }, oldOrder) => {\r\n    const oldPair = Pair.fromOrder(oldOrder)\r\n    debug('oldPair', oldPair)\r\n\r\n    // if BID, then\r\n    // price == buyAmount / sellAmount\r\n\r\n    const buyAmount = oldPair.isBid() ? sellAmount.div(price) : sellAmount.times(price)\r\n\r\n    debug('newBuyAmount', buyAmount)\r\n\r\n    const newOrder = { sellAmount, buyAmount }\r\n    debug('newOrder', newOrder)\r\n\r\n    return newOrder\r\n  })\r\n\r\n  order.setRequestHandlerForPartial('buyAmount', ({ buyAmount }, oldOrder) => {\r\n    const oldPair = Pair.fromOrder(oldOrder)\r\n    debug('oldPair', oldPair)\r\n\r\n    // BUY [main] = SELL [base] CURRENCY\r\n    // price = [main]/[base] = [buy]/[sell]\r\n\r\n    // BUY 10 ETH = SELL 1 BTC\r\n    // price = 10 = buyAmount / sellAmount\r\n    // newSellAmount = buyAmount / price\r\n\r\n    const sellAmount = oldPair.isBid() ? buyAmount.times(price) : buyAmount.div(price)\r\n\r\n    debug('newSellAmount', sellAmount)\r\n\r\n    const newOrder = { sellAmount, buyAmount }\r\n    debug('newOrder', newOrder)\r\n\r\n    return newOrder\r\n  })\r\n}\r\n\r\nconst initPartialOrders = () => {\r\n  SwapApp.shared().services.orders.items.forEach((order) => {\r\n    if (order && order.isMy && order.isPartial) {\r\n      actions.core.setupPartialOrder(order)\r\n    }\r\n  })\r\n}\r\n\r\nconst requestToPeer = (event, peer, data, callback) => {\r\n  SwapApp.shared().services.orders.requestToPeer(event, peer, data, callback)\r\n}\r\n\r\nconst updateCore = () => {\r\n  SwapApp.onInit(() => {\r\n    const orders = SwapApp.shared().services.orders.items\r\n\r\n    getOrders(orders)\r\n\r\n    actions.feed.getFeedDataFromOrder(orders)\r\n  })\r\n}\r\n\r\nconst getSwapHistory = () => {\r\n  const swapId = JSON.parse(localStorage.getItem('swapId'))\r\n\r\n  if (swapId === null || swapId.length === 0) {\r\n    return\r\n  }\r\n\r\n  const historySwap = swapId.map((item) => getInformationAboutSwap(item))\r\n\r\n  reducers.history.setSwapHistory(historySwap)\r\n}\r\n\r\nconst getInformationAboutSwap = (swapId) => {\r\n  if (swapId.length > 0 && typeof swapId === 'string') {\r\n    return {\r\n      ...SwapApp.shared().env.storage.getItem(`swap.${swapId}`),\r\n      ...SwapApp.shared().env.storage.getItem(`flow.${swapId}`),\r\n    }\r\n  }\r\n}\r\n\r\nconst getHiddenCoins = () => getState().core.hiddenCoinsList || []\r\n\r\nconst markCoinAsHidden = (coin, doBackup = false) => {\r\n  let list = getState().core.hiddenCoinsList || []\r\n  if (!list.includes(coin)) {\r\n    reducers.core.markCoinAsHidden(coin)\r\n    localStorage.setItem(\r\n      constants.localStorage.hiddenCoinsList,\r\n      JSON.stringify(getState().core.hiddenCoinsList)\r\n    )\r\n\r\n    if (doBackup) {\r\n      actions.backupManager.serverBackup()\r\n    }\r\n  }\r\n}\r\n\r\nconst markCoinAsVisible = (coin, doBackup = false) => {\r\n  const { hiddenCoinsList } = constants.localStorage\r\n\r\n  const findedCoin = JSON.parse(localStorage.getItem(hiddenCoinsList)).find(\r\n    (el) => el.includes(coin) && el.includes(':')\r\n  )\r\n\r\n  reducers.core.markCoinAsVisible(findedCoin || coin)\r\n  localStorage.setItem(hiddenCoinsList, JSON.stringify(getState().core.hiddenCoinsList))\r\n\r\n  if (doBackup) {\r\n    actions.backupManager.serverBackup()\r\n  }\r\n}\r\n\r\ninterface I_getWallet_FindCondition {\r\n  currency?: string\r\n  address?: string\r\n  addressType?: string\r\n}\r\nconst getWallet = (findCondition: I_getWallet_FindCondition) => {\r\n  // specify addressType,\r\n  // otherwise it finds the first wallet from all origins, including metamask\r\n  const { currency, address, addressType } = findCondition\r\n\r\n  const wallets = getWallets({ withInternal: true })\r\n  const founded = wallets.filter((wallet) => {\r\n    if (wallet.isMetamask && !wallet.isConnected) return false\r\n    const conditionOk = currency && wallet.currency.toLowerCase() === currency.toLowerCase()\r\n\r\n    if (address) {\r\n      if (wallet.address.toLowerCase() === address.toLowerCase()) {\r\n        return conditionOk\r\n      }\r\n    }\r\n\r\n    if (addressType) {\r\n      if (\r\n        (addressType === AddressType.Internal && !wallet.isMetamask) ||\r\n        (addressType === AddressType.Metamask && wallet.isMetamask)\r\n      ) {\r\n        return conditionOk\r\n      }\r\n    }\r\n\r\n    return conditionOk\r\n  })\r\n\r\n  return founded.length ? founded[0] : false\r\n}\r\n\r\nconst getWallets = (options) => {\r\n  const { withInternal } = options\r\n\r\n  const {\r\n    user: {\r\n      btcData,\r\n      ghostData,\r\n      nextData,\r\n      btcMultisigSMSData,\r\n      btcMultisigUserData,\r\n      btcMultisigPinData,\r\n      ethData,\r\n      tokensData,\r\n      isTokenSigned,\r\n\r\n      metamaskData,\r\n    },\r\n  } = getState()\r\n\r\n  // Sweep\r\n  const {\r\n    user: { btcMnemonicData, ethMnemonicData, ghostMnemonicData, nextMnemonicData },\r\n  } = getState()\r\n\r\n  const metamaskConnected = metamask.isEnabled() && metamask.isConnected()\r\n\r\n  const allData = [\r\n    ...(!config.opts.curEnabled || config.opts.curEnabled.eth\r\n      ? metamaskData\r\n        ? [metamaskData]\r\n        : []\r\n      : []),\r\n    ...(!config.opts.curEnabled || config.opts.curEnabled.btc\r\n      ? btcMnemonicData && !btcData.isMnemonic\r\n        ? [btcMnemonicData]\r\n        : []\r\n      : []), // Sweep\r\n    ...(!config.opts.curEnabled || config.opts.curEnabled.eth\r\n      ? ethMnemonicData && !ethData.isMnemonic\r\n        ? [ethMnemonicData]\r\n        : []\r\n      : []), // Sweep\r\n    ...(!config.opts.curEnabled || config.opts.curEnabled.btc ? [btcData] : []),\r\n    ...(!config.opts.curEnabled || config.opts.curEnabled.btc ? [btcMultisigSMSData] : []),\r\n    ...(!config.opts.curEnabled || config.opts.curEnabled.btc\r\n      ? btcMultisigPinData && btcMultisigPinData.isRegistered\r\n        ? [btcMultisigPinData]\r\n        : []\r\n      : []),\r\n    ...(!config.opts.curEnabled || config.opts.curEnabled.btc ? [btcMultisigUserData] : []),\r\n    ...(!config.opts.curEnabled || config.opts.curEnabled.btc\r\n      ? btcMultisigUserData && btcMultisigUserData.wallets\r\n        ? btcMultisigUserData.wallets\r\n        : []\r\n      : []),\r\n    ...(!config.opts.curEnabled || config.opts.curEnabled.eth\r\n      ? metamaskConnected\r\n        ? withInternal\r\n          ? [ethData]\r\n          : []\r\n        : [ethData]\r\n      : []),\r\n    ...(!config.opts.curEnabled || config.opts.curEnabled.ghost ? [ghostData] : []),\r\n    ...(!config.opts.curEnabled || config.opts.curEnabled.next ? [nextData] : []),\r\n    ...Object.keys(tokensData)\r\n      .filter((k) => !tokensData[k].reducerDataTarget)\r\n      .map((k) => tokensData[k]),\r\n  ].map(({ account, keyPair, ...data }) => ({\r\n    ...data,\r\n  }))\r\n\r\n  return allData.filter((item) => item && item.address)\r\n}\r\n\r\nconst fetchWalletBalance = async (walletData): Promise<number> => {\r\n  const name = helpers.getCurrencyKey(walletData.currency.toLowerCase(), true)\r\n  if (helpers.ethToken.isEthToken({ name })) {\r\n    try {\r\n      const balance = await actions.token.fetchBalance(\r\n        walletData.address,\r\n        walletData.contractAddress,\r\n        walletData.decimals\r\n      )\r\n      return new BigNumber(balance).toNumber()\r\n    } catch (err) {\r\n      console.error(`Fail fetch balance for wallet '${name}'`, err)\r\n    }\r\n  } else {\r\n    if (\r\n      actions[name] &&\r\n      actions[name].fetchBalance &&\r\n      typeof actions[name].fetchBalance === `function`\r\n    ) {\r\n      try {\r\n        const balance = await actions[name].fetchBalance(walletData.address)\r\n        return new BigNumber(balance).toNumber()\r\n      } catch (err) {\r\n        console.error(`Fail fetch balance for wallet '${name}'`, err)\r\n      }\r\n    } else {\r\n      console.warn(`Fail fetch balance for wallet '${name}' - not fetchBalance in actions`)\r\n    }\r\n  }\r\n  return 0\r\n}\r\n\r\nexport default {\r\n  rememberOrder,\r\n  forgetOrders,\r\n  getSwapById,\r\n  getOrders,\r\n  setFilter,\r\n  createOrder,\r\n  getSwapHistory,\r\n  updateCore,\r\n  sendRequest,\r\n  sendRequestForPartial,\r\n  acceptRequest,\r\n  declineRequest,\r\n  removeOrder,\r\n  markCoinAsHidden,\r\n  markCoinAsVisible,\r\n  requestToPeer,\r\n  getInformationAboutSwap,\r\n  saveDeletedOrder,\r\n  hideMyOrders,\r\n  showMyOrders,\r\n  hasHiddenOrders,\r\n  setupPartialOrder,\r\n  initPartialOrders,\r\n  deletedPartialCurrency,\r\n  addCurrencyFromOrders,\r\n  getWallets,\r\n  getWallet,\r\n  getHiddenCoins,\r\n  fetchWalletBalance,\r\n}\r\n"]}]}