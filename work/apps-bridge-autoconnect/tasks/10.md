---
status: done
depends_on: [9]
wave: 4
skills: [infrastructure]
verify: bash
reviewers: []
teammate_name: deployer
---

# Task 10: Deploy MCW (GitHub Pages)

## Required Skills

Before starting, load:
- `/skill:infrastructure` — [skills/infrastructure/SKILL.md](~/.claude/skills/infrastructure/SKILL.md)

## Description

Deploy the MCW bridge client changes to production by merging the PR to the `master` branch. GitHub Actions will automatically build the mainnet bundle and deploy to `swaponline.github.io` via GitHub Pages. This completes the MCW-side deployment, making the updated bridge client (with `isMetaMask: true` and all auto-connect improvements) available for all dApps that load it dynamically. The deployment is fully automated via CI/CD - no manual intervention required beyond merging the PR.

## What to do

1. Verify all pre-deploy QA checks from Task 9 are complete and passing
2. Merge the PR for branch `issue-5268-apps-layout` to `master` branch in MultiCurrencyWallet repo
3. Monitor GitHub Actions workflow execution for the deploy job
4. Verify deployment completed successfully - check wallet-apps-bridge-client.js is accessible
5. Verify no errors in production - open `#/apps` page and check browser console


## Acceptance Criteria

- [ ] AC1: PR merged to `master` branch successfully
- [ ] AC2: GitHub Actions workflow "Deploy to swaponline.github.io" completed successfully
- [ ] AC3: Bridge client file accessible at `https://swaponline.github.io/wallet-apps-bridge-client.js`
- [ ] AC4: Opening `https://swaponline.github.io/#/apps` shows no console errors
- [ ] AC5: `curl -I https://swaponline.github.io/wallet-apps-bridge-client.js` returns HTTP 200

## Context Files

**Feature context:**
- [user-spec.md](../user-spec.md)
- [tech-spec.md](../tech-spec.md)
- [decisions.md](../decisions.md)

**Project knowledge:**
- [project.md](/root/MultiCurrencyWallet/.claude/skills/project-knowledge/references/project.md)
- [architecture.md](/root/MultiCurrencyWallet/.claude/skills/project-knowledge/references/architecture.md)
- [deployment.md](/root/MultiCurrencyWallet/.claude/skills/project-knowledge/references/deployment.md)

**Code files:**
- [.github/workflows/deploymaster.yml](/root/MultiCurrencyWallet/.github/workflows/deploymaster.yml)

## Verification Steps

1. **Check GitHub Actions status**: Navigate to https://github.com/swaponline/MultiCurrencyWallet/actions → verify latest workflow run for "Deploy to swaponline.github.io" shows green checkmark (success)

2. **Verify bridge client accessibility**: Run `curl -I https://swaponline.github.io/wallet-apps-bridge-client.js` → expect HTTP 200 response

3. **Check file content**: Run `curl https://swaponline.github.io/wallet-apps-bridge-client.js | grep 'isMetaMask: true'` → expect to find the updated flag

4. **Check production wallet**: Open https://swaponline.github.io/#/apps in browser → open DevTools console → verify no JavaScript errors related to bridge or apps page

5. **Verify GitHub Pages deployment**: Check https://github.com/swaponline/swaponline.github.io repository for latest commit from buildbot with timestamp matching merge time

## Details

**Deployment Pipeline:**
- GitHub Actions workflow defined in `.github/workflows/deploymaster.yml`
- Triggers automatically on push to `master` branch
- Process: checkout code → npm install → run `scripts/deploy` script → build mainnet bundle (CONFIG=mainnet) → push to `swaponline.github.io` repo
- Build time: approximately 3-5 minutes
- No manual configuration or secrets management required (handled by GitHub Actions)

**Branch to merge:**
- Source branch: `issue-5268-apps-layout` (contains all bridge client changes)
- Target branch: `master`
- Repository: swaponline/MultiCurrencyWallet

**Post-merge verification:**
- GitHub Actions automatically deploys within 5 minutes of merge
- The `wallet-apps-bridge-client.js` file will be updated at `https://swaponline.github.io/wallet-apps-bridge-client.js`
- Changes include: `isMetaMask: true` flag and improved auto-connect support

**Dependencies:**
- Task 9 (Pre-deploy QA) must be complete with all tests passing
- All previous tasks (1-8) must be merged to `issue-5268-apps-layout` branch

**Rollback plan:**
- If deployment fails or introduces errors: revert the merge commit on `master`
- GitHub Actions will automatically redeploy the previous version
- Rollback time: ~5 minutes (same as deployment time)

**Edge cases:**
- GitHub Actions workflow failure: Check workflow logs at https://github.com/swaponline/MultiCurrencyWallet/actions for error details
- CDN cache delay: GitHub Pages CDN may take 1-2 minutes to propagate changes globally
- Build failures: Usually due to npm dependencies or Webpack configuration issues (check logs)

**Security considerations:**
- Deployment uses SSH key stored in GitHub Actions secret `buildbot`
- No credentials or API keys needed in codebase (client-side app)
- Bridge client is public-facing (no sensitive data)

## Reviewers

No reviewers for deployment task. Verification is automated via bash checks.

## Post-completion

- [ ] Записать краткий отчёт в decisions.md: merge commit hash, GitHub Actions workflow URL, deployment timestamp, verification results
- [ ] Если были проблемы с деплоем — описать проблему и решение
- [ ] Проверить что bridge client доступен публично и содержит все изменения из feature-ветки
